function locationCtrl(a,b,c,d,e){a.mapOptions={zoom:14,icon:"//developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png",center:new google.maps.LatLng(a.$parent.$parent.ubicacion.latitude,a.$parent.$parent.ubicacion.longitude),mapTypeId:google.maps.MapTypeId.ROADMAP,zoomControl:!0,disableDefaultUI:!0},a.load=function(){a.$watch("myMap",function(b,c){if(c){google.maps.event.trigger(a.myMap,"resize"),a.myMap.setCenter(new google.maps.LatLng(a.$parent.$parent.ubicacion.latitude,a.$parent.$parent.ubicacion.longitude));var d=new google.maps.LatLng(a.$parent.$parent.ubicacion.latitude,a.$parent.$parent.ubicacion.longitude);marker=new google.maps.Marker({map:c,animation:google.maps.Animation.DROP,position:d})}})}}function pageTitle(a,b){return{link:function(c,d){var e=function(a,c,e,f,g){var h="DAIMONT";c.data&&c.data.pageTitle&&(h="DAIMONT | "+c.data.pageTitle),b(function(){d.text(h)})};a.$on("$stateChangeStart",e)}}}function icheck(a){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){return a(function(){var a;return a=d.value,b.$watch(d.ngModel,function(a){$(c).iCheck("update")}),$(c).iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"}).on("ifChanged",function(f){return"checkbox"===$(c).attr("type")&&d.ngModel&&b.$apply(function(){return e.$setViewValue(f.target.checked)}),"radio"===$(c).attr("type")&&d.ngModel?b.$apply(function(){return e.$setViewValue(a)}):void 0})})}}}$(document).ready(function(){}),angular.module("shoplyApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.router","firebase","selectize","angularUtils.directives.dirPagination","ngImgCrop","angular-preload-image","jkuri.datepicker","vcRecaptcha","ui.map","facebook"]).config(["$stateProvider","$httpProvider","constants","$urlRouterProvider","FacebookProvider",function(a,b,c,d,e){e.init("448351572192242"),b.interceptors.push(["$injector","$q","sweetAlert","storage",function(a,c,d,e){var f=a.get("$rootScope");return{request:function(a){return b.defaults.withCredentials=!1,window.localStorage.token&&(b.defaults.headers.common["x-shoply-auth"]=window.localStorage.token,b.defaults.headers.common["x-shoply-user"]=angular.fromJson(window.localStorage.user)?angular.fromJson(window.localStorage.user)._id:null,angular.fromJson(window.localStorage.user)._company?b.defaults.headers.common["x-shoply-company"]=angular.fromJson(window.localStorage.user)._company._id||angular.fromJson(window.localStorage.user)._company||angular.fromJson(localStorage.company)._id||$rootScope.user._company:localStorage.company&&(b.defaults.headers.common["x-shoply-company"]=angular.fromJson(localStorage.company)._id||$rootScope.user._company)),console.log(a,"request"),"POST"==a.method&&(a.data.metadata=a.data.metadata||{},a.data.metadata._author=window.localStorage.user?angular.fromJson(window.localStorage.user)._id:null),a||c.when(a)},response:function(a){return a},responseError:function(a){switch(a.status){case 401:if(e["delete"]("token"),e["delete"]("user"),delete f.isLogged,window.location.hash.match("login"))return c.reject(a);d.swal({title:"La sesión ha expirado",text:"Tiempo de sesión agotado, por favor ingrese nuevamente",imageUrl:"images/expired.6e234e9e.png"},function(){window.sweet&&window.sweet.hide(),window.modal&&window.modal.close(),window.localStorage.clear(),window.location="#/login"});break;default:return c.reject(a)}}}}]),d.otherwise("/dashboard"),a.state("home",{url:"/",templateUrl:"views/home/home.html",data:{pageTitle:"Inicio"}}).state("home.empezar",{url:"home/empezar",templateUrl:"views/forms/register.html",data:{pageTitle:"Registrarse y Continuar"}}).state("home.continuar",{url:"home/continuar",templateUrl:"views/forms/login.html",data:{pageTitle:"Ingresar y Continuar"}}).state("home.sms",{url:"home/sms",templateUrl:"views/forms/sms-checking.html",data:{pageTitle:"Verificando..."}}).state("about",{url:"/acercade",templateUrl:"views/aboutus/aboutus.html",data:{pageTitle:"Acerca de"}}).state("faq",{url:"/preguntas frecuentes",templateUrl:"views/faq/faq.html",data:{pageTitle:"FAQ"}}).state("login",{url:"/login",templateUrl:"views/login/login.html",data:{pageTitle:"Entrar"}}).state("signup",{url:"/signup",templateUrl:"views/signup/signup.html",controller:"signupCtrl",data:{pageTitle:"Registrarse"}}).state("forgot",{url:"/forgot",templateUrl:"views/forgot/forgot.html",data:{pageTitle:"Recuperar clave"}}).state("reset",{url:"/reset/:token",templateUrl:"views/reset/reset.html",data:{pageTitle:"Cambiar clave"}}).state("dashboard.change-password",{url:"/change-password",access:{requiredAuthentication:!0},templateUrl:"views/reset/change_password.html",data:{pageTitle:"Cambiar clave"}}).state("dashboard",{url:"/dashboard",access:{requiredAuthentication:!0},templateUrl:"views/dashboard/dashboard.html",data:{pageTitle:"Administración"}})}]).run(["$rootScope","constants","storage","$state","sounds","api","$window",function(a,b,c,d,e,f,g){a.currency=b.currency,a.base=b.uploadFilesUrl,a.isLogged=c.get("user"),a.user=c.get("user"),a.state=d,a.online=navigator.onLine,g.addEventListener("offline",function(){a.$apply(function(){a.online=!1})},!1),g.addEventListener("online",function(){a.$apply(function(){a.online=!0})},!1),a.$on("$stateChangeStart",function(b,e,f,g,h){console.log("nextRoute",e),"home.empezar"===e.name||"home.continuar"===e.name||"home.sms"===e.name?a.switch_summary=!0:a.switch_summary=!1,window.modal&&window.modal.close(),null!=e&&null!=e.access&&e.access.requiredAuthentication&&!c.get("token")&&(b.preventDefault(),d.transitionTo("login"))})}]),angular.module("shoplyApp").controller("HomeCtrl",["$scope","$filter","Facebook","$timeout","storage",function(a,b,c,d,e){a.current_date=new Date,a.form={},a.form.data={},a.form.data.system_quote=5e3,a.load=function(){e.get("rememberEmail")&&(a.fromStore=!0,a.form.data.email=e.get("rememberEmail")),a.form.data.pay_day=a.pay_day(a.form.data.days[0])},a.$watch(function(){return c.isReady()},function(b){a.facebookReady=!0}),a.getLoginStatus=function(){c.getLoginStatus(function(b){"connected"===b.status?(a.loggedIn=!0,a.me(function(b){a.user=b})):a.loggedIn=!1})},a.me=function(a){c.api("/me",{fields:"id, name, email, first_name, last_name, picture"},a)},a.facebook_login=function(){c.login(function(b){"connected"==b.status&&a.me(function(b){a.user=b})},{scope:"email"})},a.login=function(){if(a.loginForm.$invalid)return void modal.incompleteForm();var b=function(b){if("EMPLOYE"==b.user.type||"ADMINISTRATOR"==b.user.type||"OWNER"==b.user.type){var c=b.user,d=(b.user._permission,b.token);e.save("token",d),e.save("user",c),$rootScope.isLogged=b.user,$rootScope.user=e.get("user"),$state.go(constants.login_state_sucess)}else sweetAlert.swal("Inhabilitado.","Privilegios son insuficientes.","error"),a.unprivileged=!0},c=function(b){a.failed=!0};account.usuario().ingresar(a.form.data).then(b,c)},a.remember=function(b){b&&a.form.data.email?e.save("rememberEmail",a.form.data.email):e["delete"]("rememberEmail")},a.pay_day=function(a){var b=new Date;return new Date(b.getTime()+24*a*3600*1e3)},a.totalize=function(){a.form.data.total_payment=a.form.data.amount[0]+a.form.data.interests+(a.form.data.system_quote||0)},a.$watch("form.data.days",function(b,c){c&&(a.form.data.pay_day=a.pay_day(c[0])),b&&(a.form.data.pay_day=a.pay_day(b[0]))}),a.$watch("form.data.amount",function(b,c){c&&(a.form.data.interests=.01817*c[0],a.totalize()),b&&(a.form.data.interests=.01817*b[0],a.totalize())})}]),angular.module("shoplyApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("shoplyApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("shoplyApp").controller("UserCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("shoplyApp").controller("signupCtrl",["$scope","account","$state","sweetAlert","storage","Facebook",function(a,b,c,d,e,f){a.register=function(){var e=function(b){b&&(toastr.success("Gracias por Registrarte :)"),delete a.formRegister,c.go("login"))},f=function(a){409==a&&d.swal("No se pudo registrar.","Este email ya esta registrado.","error")};if(a.signup.$valid){if(a.formRegister.data.password!=a.formRegister.data.confirm_password)return void d.swal("Formulario Incompleto.","las contraseñas no coinciden.","error");b.usuario().register(angular.extend(a.formRegister.data,{username:a.formRegister.data.email})).then(e,f)}else a.signup.$invalid&&modal.incompleteForm()},a.load=function(){e.get("rememberEmail")&&(a.fromStore=!0,a.form={},a.form.data={},a.form.data.email=e.get("rememberEmail"))},a.$watch(function(){return f.isReady()},function(b){a.facebookReady=!0}),a.getLoginStatus=function(){f.getLoginStatus(function(b){"connected"===b.status?(a.loggedIn=!0,a.me(function(b){a.user=b})):a.loggedIn=!1})},a.me=function(a){f.api("/me",{fields:"id, name, email, first_name, last_name, picture"},a)},a.facebook_login=function(){f.login(function(b){"connected"==b.status&&a.me(function(b){a.user=b})},{scope:"email"})},a.login=function(){if(a.loginForm.$invalid)return void modal.incompleteForm();var f=function(b){if("EMPLOYE"==b.user.type||"ADMINISTRATOR"==b.user.type||"OWNER"==b.user.type){var f=b.user,g=(b.user._permission,b.token);e.save("token",g),e.save("user",f),$rootScope.isLogged=b.user,$rootScope.user=e.get("user"),c.go(constants.login_state_sucess)}else d.swal("Inhabilitado.","Privilegios son insuficientes.","error"),a.unprivileged=!0},g=function(b){a.failed=!0};b.usuario().ingresar(a.form.data).then(f,g)},a.remember=function(b){b&&a.form.data.email?e.save("rememberEmail",a.form.data.email):e["delete"]("rememberEmail")}}]),angular.module("shoplyApp").controller("ProfileCtrl",["$scope","api","modal","constants","$state","storage","account","$rootScope",function(a,b,c,d,e,f,g,h){a.update=function(){b.user(h.user._id).put(h.user).success(function(a){a&&(f.update("user",h.user),delete h.beforeUpdate,sweetAlert("Registro Modificado","Tu perfil ha sido actualizado","success"))})}}]),angular.module("shoplyApp").controller("SellerCtrl",["$scope","$timeout","$rootScope","sweetAlert","constants","$state","modal","api","storage",function(a,b,c,d,e,f,g,h,i){a.Records=!1,a.load=function(){h.user().get().success(function(b){a.records=b.filter(function(a){return"SELLER"==a.type}),a.Records=!0})},a.doTonnage=function(){f.go("dashboard.crear-arqueo",{employee:c.grid.selected})},a.verRutas=function(){a.record=angular.copy(this.record._route),window.modal=g.show({templateUrl:"views/vendedores/verRutas.html",size:"md",scope:a,backdrop:"static"},function(a){a.$close()})},a.create=function(){window.modal=g.show({templateUrl:"views/vendedores/agregar_vendedor.html",size:"md",scope:a,backdrop:"static"},function(a){return a.formVendedor.$invalid?void g.incompleteForm():(a.form.type="SELLER",void h.user().post(a.form).success(function(b){b&&(d.swal("Registro completado.","has registrado un nuevo vendedor.","success"),a.$close(),a.load(),delete a.form)}).error(function(a,b){409==b&&d.swal("No se pudo registrar.","Este email ya esta registrado.","error")}))})},a.edit=function(){a.formEdit=angular.copy(this.record),a.formEdit._route=a.formEdit._route.map(function(a){return a._id}),a.formEdit._grocery=a.formEdit._grocery?a.formEdit._grocery.map(function(a){return a._id}):null,delete a.formEdit.password,window.modal=g.show({templateUrl:"views/vendedores/editar_vendedor.html",size:"md",scope:a,backdrop:"static"},function(a){return a.formEditVendedor.$invalid?void g.incompleteForm():void(a.formEdit.password?h.verification_code().add(a.formEdit._id).get().success(function(b){b&&d.swal({title:"Escriba el codigo de verificación",type:"input",showCancelButton:!1,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Codigo de verificación"},function(b){a.formEdit.verificationCode=b,h.user(a.formEdit._id).put(a.formEdit).success(function(b){b&&(d.swal("Registro Modificado","Registro modificado correctamente.","success"),a.load(),a.$close(),delete a.formEdit)}).error(function(a,b){409==b&&d.swal("Email en uso.","este email ya se encuentra en uso.","warning"),400==b&&d.swal("Error de validación","Codigo de verificación incorrecto.","warning")})})}):h.user(a.formEdit._id).put(a.formEdit).success(function(b){b&&(d.swal("Registro Modificado","Registro modificado correctamente.","success"),a.load(),a.$close(),delete a.formEdit)}).error(function(){409==status&&d.swal("Email en uso.","este email ya se encuentra en uso.","warning")}))})},a["delete"]=function(){var b=this.record;g.removeConfirm({closeOnConfirm:!0},function(c){c&&h.user(b._id)["delete"]().success(function(c){a.records.splice(a.records.indexOf(b),1)})})}}]),angular.module("shoplyApp").controller("ClientCtrl",["$scope","$rootScope","sweetAlert","constants","$state","modal","api","storage",function(a,b,c,d,e,f,g,h){a.Records=!1,a.load=function(){g.user().get().success(function(b){a.records=b.filter(function(a){return"CLIENT"==a.type})||[],a.Records=!0})},a.create=function(){window.modal=f.show({templateUrl:"views/clientes/agregar-cliente.html",size:"md",scope:a,backdrop:!0},function(a){switch(a.selected){case"natural":if(a.clienteNaturalForm.$invalid)return void f.incompleteForm();var b=angular.extend(a.formPersonaNatural,{type:"CLIENT"});b.data.persona=a.selected,g.user().post(b).success(function(b){b&&(c.swal("Registro completado.","has registrado un nuevo vendedor.","success"),a.$close(),a.load(),delete a.formPersonaNatural)}).error(function(a,b){409==b&&c.swal("No se pudo registrar.","Este email ya esta registrado.","error")});break;case"juridica":if(a.clienteJuridicoForm.$invalid)return void f.incompleteForm();var b=angular.extend(a.formPersonaJuridica,{type:"CLIENT"});b.data.persona=a.selected,g.user().post(b).success(function(b){b&&(c.swal("Registro completado.","has registrado un nuevo vendedor.","success"),a.$close(),a.load(),delete a.formPersonaJuridica)}).error(function(a,b){409==b&&c.swal("No se pudo registrar.","Este email ya esta registrado.","error")});break;default:f.incompleteForm()}})},a.editForm=function(){switch(this.record.data.persona){case"natural":a.formEditPersonaNatural=angular.copy(this.record),a.selected=this.record.data.persona;break;case"juridica":a.formEditPersonaJuridica=angular.copy(this.record),a.selected=this.record.data.persona;break;default:f.incompleteForm()}window.modal=f.show({templateUrl:"views/clientes/editar_cliente.html",size:"md",scope:a,backdrop:!0},function(a){switch(a.selected){case"natural":if(a.clienteEditNaturalForm.$invalid)return void f.incompleteForm();g.user(a.formEditPersonaNatural._id).put(a.formEditPersonaNatural).success(function(b){b&&(c.swal("Registro completado.","has registrado un nuevo vendedor.","success"),a.$close(),a.load(),delete a.formEditPersonaNatural)}).error(function(a,b){409==b&&c.swal("No se pudo registrar.","Este email ya esta registrado.","error")});break;case"juridica":if(a.clienteEditJuridicoForm.$invalid)return void f.incompleteForm();g.user(a.formEditPersonaJuridica._id).put(a.formEditPersonaJuridica).success(function(b){b&&(c.swal("Registro completado.","has registrado un nuevo vendedor.","success"),a.$close(),a.load(),delete a.formEditPersonaJuridica)}).error(function(a,b){409==b&&c.swal("No se pudo registrar.","Este email ya esta registrado.","error")});break;default:f.incompleteForm()}})},a["delete"]=function(){var b=this.record;f.removeConfirm({closeOnConfirm:!0},function(c){c&&g.user(b._id)["delete"]().success(function(c){a.records.splice(a.records.indexOf(b),1)})})}}]),angular.module("shoplyApp").controller("RouteCtrl",["$scope","$rootScope","sweetAlert","constants","$state","modal","api","storage",function(a,b,c,d,e,f,g,h){a.Records=!1,a.load=function(){g.rutas().get().success(function(b){a.records=b||[],a.Records=!0})},a.create=function(){window.modal=f.show({templateUrl:"views/rutas/agregar-ruta.html",size:"md",scope:a,backdrop:"static"},function(a){return a.formRuta.$invalid?void f.incompleteForm():void g.rutas().post(a.form).success(function(b){b&&(c.swal("Registro completado.","has registrado un nuevo vendedor.","success"),a.$close(),a.load(),delete a.form)})})},a.edit=function(){a.formEdit=angular.copy(this.record),a.formEdit.data.barrios&&(a.barrios=a.formEdit.data.barrios.map(function(a){var b=new Object;return b.text=a,b.value=a,b})),window.modal=f.show({templateUrl:"views/rutas/editar-ruta.html",size:"md",scope:a,backdrop:"static"},function(a){return a.rutaEditForm.$invalid?void f.incompleteForm():void g.rutas(a.formEdit._id).put(a.formEdit).success(function(b){b&&(c.swal("Registro Modificado","Registro modificado correctamente.","success"),a.load(),a.$close(),delete a.formEdit)})})},a["delete"]=function(){var b=this.record;f.removeConfirm({closeOnConfirm:!0},function(c){c&&g.rutas(b._id)["delete"]().success(function(c){a.records.splice(a.records.indexOf(b),1)})})}}]),angular.module("shoplyApp").controller("ContadoresCtrl",["$scope","modal","api",function(a,b,c){a.loading=!0,a.load=function(){c.contadores().get().success(function(b){a.records=b||[],a.loading=!1})},a.agregar=function(){if(a.formContador.$invalid)return void b.incompleteForm();var d=angular.extend(a.form,{entityName:a._entity.text});c.contadores().post(d).success(function(b){b&&(a.records.push(b),delete a.form.data)}).error(function(a,b){409==b&&sweetAlert("Registro Duplicado","una entidad no puede contener 2 contadores.","warning")})},a.borrar=function(){var d=this.record;b.removeConfirm({closeOnConfirm:!0},function(b){b&&c.contadores(d._id)["delete"]().success(function(b){b&&a.records.splice(a.records.indexOf(d),1)})})},a.edit=function(){a.formEdit=angular.copy(this.record),window.modal=b.show({templateUrl:"views/contador/editar_contadores.html",size:"md",scope:a},function(a){if(a.formEditContador.$invalid)return void b.incompleteForm();var d=new Object;d._entity=a.formEdit.entity,d.entityName=a._Editentity.text,d.field=a.formEdit.field,d.prefix=a.formEdit.prefix,d.min=a.formEdit.seq,c.contadores(a.formEdit._id).put(d).success(function(b){b&&(sweetAlert("Registro Modificado","Registro modificado correctamente.","success"),a.load(),a.$close(),delete a.formEdit)})})}}]),angular.module("shoplyApp").controller("CasaComercialCtrl",["$scope","modal","api",function(a,b,c){a.loading=!0,a.load=function(){c.casa_comercial().get().success(function(b){a.records=b||[],a.loading=!1})},a.agregar=function(){return a.formCasaComercial.$invalid?void b.incompleteForm():void c.casa_comercial().post(a.form).success(function(b){b&&(a.records.push(b),delete a.form.data)}).error(function(a,b){409==b&&sweetAlert("Registro Duplicado","una entidad no puede contener 2 contadores.","warning")})},a.borrar=function(){var d=this.record;b.removeConfirm({closeOnConfirm:!0},function(b){b&&c.casa_comercial(d._id)["delete"]().success(function(b){b&&a.records.splice(a.records.indexOf(d),1)})})},a.edit=function(){a.formEdit=angular.copy(this.record),window.modal=b.show({templateUrl:"views/casaComercial/editar-casaComercial.html",size:"md",scope:a},function(a){return a.$$childTail.$invalid?void b.incompleteForm():void c.casa_comercial(a.formEdit._id).put(a.formEdit).success(function(b){b&&(sweetAlert("Registro Modificado","Registro modificado correctamente.","success"),a.load(),a.$close(),delete a.formEdit)})})}}]),angular.module("shoplyApp").controller("ExistenciasCtrl",["$scope","$timeout","$rootScope","sweetAlert","constants","$state","modal","api","storage",function(a,b,c,d,e,f,g,h,i){a.totalVentas=0,a.totalBases=0,a.getStockDetail=function(){a.totalVentas=0,a.totalBases=0,h.cantidades().add("stock/detail").post(a.form).success(function(b){a.records=b})},a.totalizeVentas=function(){a.totalVentas=a.totalVentas+this.record._product.data.precio_venta*this.record.amount},a.totalizeBases=function(){a.totalBases=a.totalBases+(this.record._product.data.precio+this.record._product.data.valor_utilidad)*this.record.amount}}]),angular.module("shoplyApp").service("account",["$q","constants","$http",function(a,b,c){return this.usuario=function(){return{ingresar:function(d){var e=a.defer();return c.post(b.base_url+"login",d).success(function(a,b,c,d){e.resolve(a)}).error(function(a,b,c,d){e.reject(a)}),e.promise},register:function(d){var e=a.defer();return c.post(b.base_url+"user",d).success(function(a,b,c,d){e.resolve(a)}).error(function(a,b,c,d){e.reject(b)}),e.promise},password_reset:function(d){var e=a.defer();return c.post(b.base_url+"password-reset/",d).success(function(a,b,c,d){e.resolve(a)}).error(function(a,b,c,d){e.reject(b)}),e.promise},salir:function(){storage.get("token")&&(storage["delete"]("token"),storage["delete"]("user"),window.localStorage.clear(),window.location="#/login")}}},this}]),angular.module("shoplyApp").controller("RequestCtrl",["$scope","$window","$timeout","constants","api","$state","modal","$rootScope","$filter",function(a,b,c,d,e,f,g,h,i){a.request_status=d.request_status,a.Records=!1,h.$on("incoming_request",function(b,c){a.records.push(c)}),a.setFormat=function(){a.filter?a.filter._ini=i("date")(a.dt,"yyyy-MM-dd"):(a.filter={},a.filter._ini=i("date")(a.dt,"yyyy-MM-dd"))},a.today=function(){a.dt=new Date},a.today(),a.clear=function(){a.dt=null},a.dateOptions={formatYear:"yy",startingDay:1},a.open2=function(){a.popup2.opened=!0},a.setDate=function(b,c,d){a.dt=new Date(b,c,d)},a.formats=["dd-MMMM-yyyy","yyyy-MM-dd","dd.MM.yyyy","shortDate"],a.format=a.formats[1],a.altInputFormats=["M!/d!/yyyy"],a.popup2={opened:!1},a.setFormatEnd=function(){a.filter?a.filter._end=i("date")(a.dtEnd,"yyyy-MM-dd"):(a.filter={},a.filter._end=i("date")(a.dtEnd,"yyyy-MM-dd"))},a.todayEnd=function(){a.dtEnd=new Date},a.todayEnd(),a.clearEdt=function(){a.dtEnd=null},a.dateOptionsEnd={formatYear:"yy",startingDay:1},a.openEnd=function(){a.popupEnd.opened=!0},a.setDateEnd=function(b,c,d){a.dtEnd=new Date(b,c,d)},a.formatsEnd=["dd-MMMM-yyyy","yyyy-MM-dd","dd.MM.yyyy","shortDate"],a.formatEnd=a.formatsEnd[1],a.popupEnd={opened:!1},a.data_export=[],a.load=function(){e.pedido().get().success(function(b){a.records=b||[],a.Records=!0;for(var c=0;c<a.records.length;c++)for(var d=0;d<a.records[c].shoppingCart.length;d++){var e={};e.ref=a.records[c].shoppingCart[d].refMixed,e.descripcion=a.records[c].shoppingCart[d].producto,e.unidades=a.records[c].shoppingCart[d].cantidad,e.dcto=a.records[c].data.descuento||0,e.costo=a.records[c].shoppingCart[d].precio||0,e.precio_venta=a.records[c].shoppingCart[d].precio_VentaFacturado||a.records[c].shoppingCart[d].precio_Venta||0,e.valor_iva=a.records[c].shoppingCart[d].valor_iva,e.valor_utilidad=a.records[c].shoppingCart[d].valor_utilidad||0,e.dcto=a.records[c].data.descuento||0,e.numpedido=a.records[c].id,a.data_export.push(e)}})},a.generateExport=function(){if(this.record&&this.record.shoppingCart){this.single_data_export=[];for(var a=0;a<this.record.shoppingCart.length;a++){var b={};b.ref=this.record.shoppingCart[a].refMixed,b.descripcion=this.record.shoppingCart[a].producto,b.unidades=this.record.shoppingCart[a].cantidad,b.dcto=this.record.data.descuento||0,b.costo=this.record.shoppingCart[a].precio||0,b.precio_venta=this.record.shoppingCart[a].precio_VentaFacturado||this.record.shoppingCart[a].precio_Venta||0,b.valor_iva=this.record.shoppingCart[a].valor_iva,b.valor_utilidad=this.record.shoppingCart[a].valor_utilidad||0,b.dcto=this.record.data.descuento||0,b.numpedido=this.record.id,this.single_data_export.push(b)}}},a.ToProductionRequest=function(){a.productionRequest=a.data.currentPageFiltered.filter(function(a){return a.add}),f.go("dashboard.vista-previa",{requests:a.productionRequest||[]})},a.ToSingleProductionRequest=function(){a.productionRequest=[this.record],f.go("dashboard.vista-previa",{requests:a.productionRequest||[]})},a.location=function(){return this.record.data.geo?(a.ubicacion=this.record.data.geo,void g.show({templateUrl:"views/ordenes/localizacion.html",size:"md",scope:a,backdrop:"static"},function(a){a.$close()})):void sweetAlert("Ups","Coordenadas no disponibles","warning")},a["delete"]=function(){var b=this.record;g.removeConfirm({closeOnConfirm:!0},function(c){c&&e.pedido(b._id)["delete"]().success(function(c){sweetAlert("Correcto","Se ha eliminado este registro","success"),a.records.splice(a.records.indexOf(b),1)})})},a.detail=function(){f.go("dashboard.detalle_pedido",{pedido:this.record._id})},a.myConfig={valueField:"status",labelField:"status",placeholder:"Estado",onInitialize:function(a){},maxItems:1}}]),angular.module("shoplyApp").controller("VistaPreviaCtrl",["$scope","$window","$timeout","constants","api","$state","modal","$rootScope","$filter","$stateParams","$location",function(a,b,c,d,e,f,g,h,i,j,k){a.request_status=d.request_status,a.Records=!1,a.setFormat=function(){a.filter?a.filter._ini=i("date")(a.dt,"yyyy-MM-dd"):(a.filter={},a.filter._ini=i("date")(a.dt,"yyyy-MM-dd"))},a.today=function(){a.dt=new Date},a.today(),a.clear=function(){a.dt=null},a.dateOptions={formatYear:"yy",startingDay:1},a.open2=function(){a.popup2.opened=!0},a.setDate=function(b,c,d){a.dt=new Date(b,c,d)},a.formats=["dd-MMMM-yyyy","yyyy-MM-dd","dd.MM.yyyy","shortDate"],a.format=a.formats[1],a.altInputFormats=["M!/d!/yyyy"],a.popup2={opened:!1},a.setFormatEnd=function(){a.filter?a.filter._end=i("date")(a.dtEnd,"yyyy-MM-dd"):(a.filter={},a.filter._end=i("date")(a.dtEnd,"yyyy-MM-dd"))},a.todayEnd=function(){a.dtEnd=new Date},a.todayEnd(),a.clearEdt=function(){a.dtEnd=null},a.dateOptionsEnd={formatYear:"yy",startingDay:1},a.openEnd=function(){a.popupEnd.opened=!0},a.setDateEnd=function(b,c,d){a.dtEnd=new Date(b,c,d)},a.formatsEnd=["dd-MMMM-yyyy","yyyy-MM-dd","dd.MM.yyyy","shortDate"],a.formatEnd=a.formatsEnd[1],a.popupEnd={opened:!1},a.data_export=[],a.load=function(){if(!j.requests||0==j.requests)return void k.url("dashboard/ordenes");for(var b=[],c=0;c<j.requests.length;c++)for(var d=0;d<j.requests[c].shoppingCart.length;d++)j.requests[c].shoppingCart[d].pedido=j.requests[c].id,j.requests[c].shoppingCart[d]._client=j.requests[c]._client||null,j.requests[c].shoppingCart[d]._seller=j.requests[c]._seller||null,j.requests[c].shoppingCart[d].createdAt=j.requests[c].createdAt||null,j.requests[c].shoppingCart[d].updatedAt=j.requests[c].updatedAt||null,b.push(j.requests[c].shoppingCart[d]);console.log("todos",b),a.records=b},a.$watch("_product",function(b,c){c&&!b&&delete a._productObj}),a.totalize=function(a){for(var b=0;b<a.length;b++)this.totalCantidades=this.totalCantidades+a[b].cantidad||0},a.generateExport=function(){if(this.record&&this.record.shoppingCart){this.single_data_export=[];for(var a=0;a<this.record.shoppingCart.length;a++){var b={};b.ref=this.record.shoppingCart[a].refMixed,b.descripcion=this.record.shoppingCart[a].producto,b.unidades=this.record.shoppingCart[a].cantidad,b.dcto=this.record.data.descuento||0,b.costo=this.record.shoppingCart[a].precio||0,b.precio_venta=this.record.shoppingCart[a].precio_VentaFacturado||this.record.shoppingCart[a].precio_Venta||0,b.valor_iva=this.record.shoppingCart[a].valor_iva,b.valor_utilidad=this.record.shoppingCart[a].valor_utilidad||0,b.dcto=this.record.data.descuento||0,b.numpedido=this.record.id,this.single_data_export.push(b)}}},a.location=function(){return this.record.data.geo?(a.ubicacion=this.record.data.geo,void g.show({templateUrl:"views/ordenes/localizacion.html",size:"md",scope:a,backdrop:"static"},function(a){a.$close()})):void sweetAlert("Ups","Coordenadas no disponibles","warning")},a["delete"]=function(){var b=this.record;g.removeConfirm({closeOnConfirm:!0},function(c){c&&e.pedido(b._id)["delete"]().success(function(c){sweetAlert("Correcto","Se ha eliminado este registro","success"),a.records.splice(a.records.indexOf(b),1)})})},a.detail=function(){f.go("dashboard.detalle_pedido",{pedido:this.record._id})},a.ToProduction=function(){a.productionItem=this.record,a.getNextId=function(){e.producciones().add("nextId").get().success(function(b){b&&(a.form.data.produccion=b.nextId)})},g.show({templateUrl:"views/produccion/agregarProduccion.html",size:"md",scope:a,backdrop:"static"},function(a){a.$close()})},a.MostrarTallasCantidades=function(){a.set=this.record,g.show({templateUrl:"views/ordenes/TallasCantidades.html",size:"md",scope:a,backdrop:"static"},function(a){a.$close()})},a.myConfig={valueField:"status",labelField:"status",placeholder:"Estado",onInitialize:function(a){},maxItems:1}}]),angular.module("shoplyApp").controller("locationCtrl",locationCtrl),locationCtrl.$inject=["$scope","$rootScope","sweetAlert","$state","$timeout"],angular.module("shoplyApp").controller("employeCtrl",["$scope","$timeout","$rootScope","sweetAlert","constants","$state","modal","api","storage",function(a,b,c,d,e,f,g,h,i){a.Records=!1,a.load=function(){h.user().get().success(function(b){a.records=b.filter(function(a){return"EMPLOYE"==a.type}),a.Records=!0})},a.doTonnage=function(){f.go("dashboard.crear-arqueo",{employee:c.grid.selected})},a.create=function(){window.modal=g.show({templateUrl:"views/empleado/agregar_empleado.html",size:"md",scope:a,backdrop:"static"},function(a){return a.formEmploye.$invalid?void g.incompleteForm():(a.form.type="EMPLOYE",void h.user().post(a.form).success(function(b){b&&(d.swal("Registro completado.","has registrado un nuevo empleado.","success"),a.$close(),a.load(),delete a.form)}).error(function(a,b){409==b&&d.swal("Email en uso.","este email ya se encuentra en uso.","warning")}))})},a.edit=function(){a.formEdit=angular.copy(this.record),a.formEdit._route=a.formEdit._route.map(function(a){return a._id}),a.formEdit._permission=a.formEdit._permission?a.formEdit._permission._id:null,a.formEdit._grocery=a.formEdit._grocery?a.formEdit._grocery.map(function(a){return a._id}):null,delete a.formEdit.password,window.modal=g.show({templateUrl:"views/empleado/editar_empleado.html",size:"md",scope:a,backdrop:"static"},function(a){return a.formEditEmploye.$invalid?void g.incompleteForm():void(a.formEdit.password?h.verification_code().add(a.formEdit._id).get().success(function(b){b&&d.swal({title:"Escriba el codigo de verificación",type:"input",showCancelButton:!1,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Codigo de verificación"},function(b){a.formEdit.verificationCode=b,h.user(a.formEdit._id).put(a.formEdit).success(function(b){b&&(d.swal("Registro Modificado","Registro modificado correctamente.","success"),a.load(),a.$close(),delete a.formEdit)}).error(function(a,b){409==b&&d.swal("Email en uso.","este email ya se encuentra en uso.","warning"),400==b&&d.swal("Error de validación","Codigo de verificación incorrecto.","warning")})})}):h.user(a.formEdit._id).put(a.formEdit).success(function(b){b&&(d.swal("Registro Modificado","Registro modificado correctamente.","success"),a.load(),a.$close(),delete a.formEdit)}))})},a["delete"]=function(){var b=this.record||c.grid.value;g.removeConfirm({closeOnConfirm:!0},function(c){c&&h.user(b._id)["delete"]().success(function(c){a.records.splice(a.records.indexOf(b),1)})})}}]),angular.module("shoplyApp").controller("PermisoCtrl",["$scope","$window","$rootScope","$timeout","sweetAlert","constants","$state","modal","api","storage",function(a,b,c,d,e,f,g,h,i,j){a.Records=!1,a.menus=b.permisos.menus,a.forms=b.permisos.forms,a.$watch("form.data._menu",function(b,c){a.formsCollection=angular.copy(a.forms.filter(function(a){return a.parent==b}))}),a.$watch("formEdit.data._menu",function(b,c){a.formsCollectionEdit=angular.copy(a.forms.filter(function(a){return a.parent==b}))}),a.load=function(){a.permission&&delete a.permission,i.permiso().get().success(function(b){a.records=b||[],a.Records=!0})},a.addMenu=function(){a.permission?(a.form.data.menuText=a.getObj("menus",a.form.data._menu).nombre,a.form.data.menuIcon=a.getObj("menus",a.form.data._menu).icon,a.form.data.formText=a.getObj("forms",a.form.data._form)?a.getObj("forms",a.form.data._form).nombre:null,a.permission.push(angular.copy(a.form.data)),a.form.data._form=null,a.form.data.access=null):(a.permission=[],a.form.data.menuText=a.getObj("menus",a.form.data._menu).nombre,
a.form.data.menuIcon=a.getObj("menus",a.form.data._menu).icon,a.form.data.formText=a.getObj("forms",a.form.data._form)?a.getObj("forms",a.form.data._form).nombre:null,a.permission.push(angular.copy(a.form.data)),a.form.data._form=null,a.form.data.access=null)},a.getObj=function(b,c){return a[b].filter(function(a){return a.id==c})[0]},a.addMenuEdit=function(){var b={};b._menu=a.formEdit.data._menu,b.access=a.formEdit.data.access,b._form=a.formEdit.data._form,b.menuText=a.getObj("menus",a.formEdit.data._menu).nombre,b.menuIcon=a.getObj("menus",a.formEdit.data._menu).icon,b.formText=a.getObj("forms",a.formEdit.data._form)?a.getObj("forms",a.formEdit.data._form).nombre:null,a.formEdit.data.permission.push(b)},a.create=function(){window.modal=h.show({templateUrl:"views/permisos/agregar_permiso.html",size:"md",scope:a,backdrop:"static"},function(a){return a.permisoForm.$invalid?void h.incompleteForm():(a.formData=new Object,a.formData.data=new Object,a.formData.data.permission=a.permission,void e.swal({title:"",type:"input",showCancelButton:!1,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Perfil"},function(b){a.formData.data.profile=b,i.permiso().post(a.formData).success(function(b){b&&(e.swal("Registro completado.","Has creado un nuevo perfil.","success"),d(a.load()),delete a.permission,delete a.formData,a.$close(),window.swal.close())})}))})},a.verFormularios=function(){a.record=angular.copy(this.record.data.permission),window.modal=h.show({templateUrl:"views/permisos/verFormularios.html",size:"md",scope:a,backdrop:"static"},function(a){a.$close()})},a.edit=function(){a.formEdit=angular.copy(this.record),window.modal=h.show({templateUrl:"views/permisos/editar_permiso.html",size:"md",scope:a,backdrop:"static"},function(a){return a.formEditarPermiso.$invalid?void h.incompleteForm():void e.swal({title:"",type:"input",inputValue:a.formEdit.data.profile,showCancelButton:!1,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Perfil"},function(b){a.formEdit.data.profile=b,delete a.formEdit.data._menu,delete a.formEdit.data._form,delete a.formEdit.data.access,i.permiso(a.formEdit._id).put(a.formEdit).success(function(b){b&&(e.swal("Registro Modificado","Registro modificado correctamente.","success"),a.$close(),delete a.formEdit.data,a.load())})})})},a.removeFromList=function(){var b=this.record||c.grid.value;h.removeConfirm({closeOnConfirm:!0},function(c){c&&(a.permission.splice(a.permission.indexOf(b),1),a.$apply())})},a.removeFromListEdit=function(){var b=this.record||c.grid.value;h.removeConfirm({closeOnConfirm:!0},function(c){c&&(a.formEdit.data.permission.splice(a.formEdit.data.permission.indexOf(b),1),a.$apply())})},a["delete"]=function(){var b=this.record;h.removeConfirm({closeOnConfirm:!0},function(c){c&&i.permiso(b._id)["delete"]().success(function(c){c&&a.records.splice(a.records.indexOf(b),1)})})}}]),angular.module("shoplyApp").controller("GroceryCtrl",["$scope","$timeout","$rootScope","sweetAlert","constants","$state","modal","api","storage",function(a,b,c,d,e,f,g,h,i){a.Records=!1,a.load=function(){h.bodega().get().success(function(b){a.records=b||[],a.Records=!0})},a.create=function(){window.modal=g.show({templateUrl:"views/bodega/agregar_bodega.html",size:"md",scope:a,backdrop:"static"},function(a){return a.formBodega.$invalid?void g.incompleteForm():void h.bodega().post(a.form).success(function(c){c&&(d.swal("Registro completado.","has registrado una nueva empresa.","success"),b(a.load()),a.$close(),delete a.form)})})},a.edit=function(){a.formEdit=angular.copy(this.record),a.formEdit._responsible=a.formEdit._responsible?a.formEdit._responsible._id:null,window.modal=g.show({templateUrl:"views/bodega/editar_bodega.html",size:"md",scope:a,backdrop:"static"},function(a){return a.formEditarBodega.$invalid?void g.incompleteForm():void h.bodega(a.formEdit._id).put(a.formEdit).success(function(b){b&&(d.swal("Registro Modificado","Registro modificado correctamente.","success"),a.load(),a.$close(),delete a.formEdit.data)})})},a["delete"]=function(b){var e=b||this.record;return e._id==c.user._company._id?void d.swal("Ups!!","No puedes eliminar una empresa en uso.","warning"):void g.removeConfirm({closeOnConfirm:!0},function(b){b&&h.bodega(e._id)["delete"]().success(function(b){b&&a.records.splice(a.records.indexOf(e),1)})})}}]),angular.module("shoplyApp").controller("EntradaCtrl",["$scope","$timeout","$rootScope","sweetAlert","constants","$state","modal","api","storage",function(a,b,c,d,e,f,g,h,i){a.Records=!1,a.load=function(){h.entradas().get().success(function(b){a.records=b||[],a.Records=!0})},a.create=function(){window.modal=g.show({templateUrl:"views/entradas/agregar_entrada.html",size:"lg",scope:a,backdrop:"static"},function(a){return a.formCreateInput.$invalid?void g.incompleteForm():(a.form.data.totalCosto=0,a.form.data.totalprecioVenta=0,a.form.data.cantidad=0,a.form.data._product=a.recordsNew.map(function(b){return delete b.$order,a.form.data.totalCosto+=b.precio*b.cantidad,a.form.data.totalprecioVenta+=b.total,a.form.data.cantidad+=b.cantidad,b}),void h.entradas().post(a.form).success(function(c){c&&(d.swal("Registro completado.","has agregado una nueva entrada.","success"),b(a.load()),a.$close(),delete a.form)}))})},a.edit=function(){a.formEdit=angular.copy(this.record),a.formEdit._responsible=a.formEdit._responsible?a.formEdit._responsible._id:null,window.modal=g.show({templateUrl:"views/entradas/editar_entrada.html",size:"md",scope:a,backdrop:"static"},function(a){return a.formEditarBodega.$invalid?void g.incompleteForm():void h.entradas(a.formEdit._id).put(a.formEdit).success(function(b){b&&(d.swal("Registro Modificado","Registro modificado correctamente.","success"),a.load(),a.$close(),delete a.formEdit.data)})})},a["delete"]=function(b){var e=b||this.record;return e._id==c.user._company._id?void d.swal("Ups!!","No puedes eliminar una empresa en uso.","warning"):void g.removeConfirm({closeOnConfirm:!0},function(b){b&&h.entradas(e._id)["delete"]().success(function(b){b&&a.records.splice(a.records.indexOf(e),1)})})}}]),angular.module("shoplyApp").controller("EntradaCreateCtrl",["$scope","$timeout","$rootScope","sweetAlert","constants","$state","modal","api","storage","shoppingCart",function(a,b,c,d,e,f,g,h,i,j){a.tasks=[],a.load=function(){a.$parent.recordsNew=[]},a.addToTask=function(){return this.task?void a.tasks.push(this.$index):void a.tasks.splice(a.tasks.splice[this.$index],1)},a.agregarCantidadMultiple=function(){window.modal=g.show({templateUrl:"views/facturacion/agregar-cantidad.html",size:"sm",scope:a,backdrop:"static"},function(a){if(a.cantidadModel){for(var b=0;b<a.tasks.length;b++)a.$parent.recordsNew[b].cantidad=parseInt(a.cantidadModel||1),a.$parent.recordsNew[b].total=parseInt((a.cantidadModel||1)*a.$parent.recordsNew[b].precio_venta);a.$close()}})},a.$watch("recordsNew",function(b,c){b.length>0&&(a.total=j.totalize(b)-j.totalizeDiscount(b)||0,a.TotalIva=j.totalizeIva(b),a.subTotal=a.total-a.TotalIva,a.descuento=j.totalizeDiscount(b))},!0),a.$watch("_product",function(b,c){if(b){var d=!1;angular.forEach(a.$parent.recordsNew,function(a){a._id==b&&(d=!0,a.valor_descuento&&(a.valor_descuento=a.valor_descuento+a.valor_descuento),a.cantidad=a.cantidad+1,a.total=a.precio_venta*a.cantidad)}),d||a.$parent.recordsNew.push(angular.copy(angular.extend(a._productObj,{cantidad:1,total:1*a._productObj.precio_venta}))),delete a._product}}),a.agregarCantidad=function(){var b=this.record;window.modal=g.show({templateUrl:"views/facturacion/agregar-cantidad.html",size:"sm",scope:a,backdrop:"static"},function(a){a.cantidadModel&&(a.$parent.recordsNew[a.$parent.recordsNew.indexOf(b)].cantidad=parseInt(a.cantidadModel||1),a.$parent.recordsNew[a.$parent.recordsNew.indexOf(b)].total=parseInt((a.cantidadModel||1)*b.precio_venta),a.$close())})}}]),angular.module("shoplyApp").controller("SalidaCtrl",["$scope","$timeout","$rootScope","sweetAlert","constants","$state","modal","api","storage",function(a,b,c,d,e,f,g,h,i){a.Records=!1,a.load=function(){h.salidas().get().success(function(b){a.records=b||[],a.Records=!0})},a.create=function(){window.modal=g.show({templateUrl:"views/salidas/agregar_salida.html",size:"lg",scope:a,backdrop:"static"},function(a){return a.formCreateOutput.$invalid?void g.incompleteForm():(a.form.data.totalCosto=0,a.form.data.totalprecioVenta=0,a.form.data.cantidad=0,a.form.data._product=a.recordsNew.map(function(b){return delete b.$order,a.form.data.totalCosto+=b.precio*b.cantidad,a.form.data.totalprecioVenta+=b.total,a.form.data.cantidad+=b.cantidad,b}),void h.salidas().post(a.form).success(function(c){c&&(d.swal("Registro completado.","has agregado una nueva entrada.","success"),b(a.load()),a.$close(),delete a.form)}))})},a.edit=function(){a.formEdit=angular.copy(this.record),a.formEdit._responsible=a.formEdit._responsible?a.formEdit._responsible._id:null,window.modal=g.show({templateUrl:"views/entradas/editar_entrada.html",size:"md",scope:a,backdrop:"static"},function(a){return a.formEditarBodega.$invalid?void g.incompleteForm():void h.salidas(a.formEdit._id).put(a.formEdit).success(function(b){b&&(d.swal("Registro Modificado","Registro modificado correctamente.","success"),a.load(),a.$close(),delete a.formEdit.data)})})},a["delete"]=function(b){var e=b||this.record;return e._id==c.user._company._id?void d.swal("Ups!!","No puedes eliminar una empresa en uso.","warning"):void g.removeConfirm({closeOnConfirm:!0},function(b){b&&h.salidas(e._id)["delete"]().success(function(b){b&&a.records.splice(a.records.indexOf(e),1)})})}}]),angular.module("shoplyApp").controller("SalidaCreateCtrl",["$scope","$timeout","$rootScope","sweetAlert","constants","$state","modal","api","storage","shoppingCart",function(a,b,c,d,e,f,g,h,i,j){a.load=function(){a.$parent.recordsNew=[]},a.tasks=[],a.addToTask=function(){return this.task?void a.tasks.push(this.$index):void a.tasks.splice(a.tasks.splice[this.$index],1)},a.agregarCantidadMultiple=function(){window.modal=g.show({templateUrl:"views/facturacion/agregar-cantidad.html",size:"sm",scope:a,backdrop:"static"},function(a){if(a.cantidadModel){for(var b=0;b<a.tasks.length;b++)a.$parent.recordsNew[b].cantidad=parseInt(a.cantidadModel||1),a.$parent.recordsNew[b].total=parseInt((a.cantidadModel||1)*a.$parent.recordsNew[b].precio_venta);a.$close()}})},a.$watch("recordsNew",function(b,c){b.length>0&&(a.total=j.totalize(b)-j.totalizeDiscount(b)||0,a.TotalIva=j.totalizeIva(b),a.subTotal=a.total-a.TotalIva,a.descuento=j.totalizeDiscount(b))},!0),a.$watch("_product",function(b,c){if(b){var d=!1;angular.forEach(a.$parent.recordsNew,function(a){a._id==b&&(d=!0,a.valor_descuento&&(a.valor_descuento=a.valor_descuento+a.valor_descuento),a.cantidad=a.cantidad+1,a.total=a.precio_venta*a.cantidad)}),d||a.$parent.recordsNew.push(angular.copy(angular.extend(a._productObj,{cantidad:1,total:1*a._productObj.precio_venta}))),delete a._product}}),a.agregarCantidad=function(){var b=this.record;window.modal=g.show({templateUrl:"views/facturacion/agregar-cantidad.html",size:"sm",scope:a,backdrop:"static"},function(a){a.cantidadModel&&(a.$parent.recordsNew[a.$parent.recordsNew.indexOf(b)].cantidad=parseInt(a.cantidadModel||1),a.$parent.recordsNew[a.$parent.recordsNew.indexOf(b)].total=parseInt((a.cantidadModel||1)*b.precio_venta),a.$close())})}}]),angular.module("shoplyApp").controller("LotesCtrl",["$scope","modal","api","$stateParams",function(a,b,c,d){a.Records=!1,a.load=function(){d.requests&&(a.requests=d.requests,console.log(d.requests)),c.lotes().get().success(function(b){a.records=b||[],a.Records=!0})},a.MostrarTallasCantidades=function(c){a.set=this.record,a.allowWrite=c,b.show({templateUrl:"views/ordenes/TallasCantidades.html",size:"md",scope:a,backdrop:"static"},function(a){a.$close()})},a.MostrarMateriales=function(c){a.components=this.record.component,b.show({templateUrl:"views/lotes/materiales.html",size:"lg",scope:a,backdrop:"static"},function(a){a.$close()})},a.listado=function(c){c?a.listadoProducts=c:a.listadoProducts=angular.copy(this.record.data.request),window.modal=b.show({templateUrl:"views/lotes/listado.html",size:"lg",scope:a,backdrop:"static"},function(a){a.$close()})},a.producir=function(){a.productionDate=new Date,a.productionRequestRecords=[],a.formProduction={},a.formProduction.data={},a.formProduction.data.lote=this.record,window.modal=b.show({templateUrl:"views/produccion/agregarProduccion.html",size:"lg",scope:a,backdrop:"static"},function(a){a.$close()})},a.agregar=function(){window.modal=b.show({templateUrl:"views/lotes/crear_lotes.html",size:"md",scope:a,backdrop:"static"},function(a){return a.formLotes.$invalid?void b.incompleteForm():(a.form.data.request=a.$parent.requests,void c.lotes().post(a.form).success(function(b){b&&(a.records.push(b),delete a.form.data,delete a.$parent.requests,a.$close(),sweetAlert("Registro Creado","Registro creado correctamente.","success"))}))})},a.borrar=function(){var d=this.record;b.removeConfirm({closeOnConfirm:!0},function(b){b&&c.lotes(d._id)["delete"]().success(function(b){b&&a.records.splice(a.records.indexOf(d),1)})})},a.edit=function(){a.formEdit=angular.copy(this.record),window.modal=b.show({templateUrl:"views/iva/editar_ivas.html",size:"md",scope:a},function(a){return a.$$childTail.formEditIva.$invalid?void b.incompleteForm():void c.lotes(a.formEdit._id).put(a.formEdit).success(function(b){b&&(sweetAlert("Registro Modificado","Registro modificado correctamente.","success"),a.load(),a.$close(),delete a.formEdit)})})}}]),angular.module("shoplyApp").controller("AppsCtrl",["$scope","$stateParams","$timeout","sweetAlert","constants","$state","modal","api","storage","$rootScope",function(a,b,c,d,e,f,g,h,i,j){a.Records=!1,a.load=function(){h.apps().get().success(function(b){a.records=b||[],a.Records=!0})},a.getPublic=function(){h.apps().add("public/"+b.app).get().success(function(b){a.records=b||[],a.Records=!0})},a.edit=function(){a.formEdit=angular.copy(j.grid.value),window.modal=g.show({templateUrl:"views/apps/editar_app.html",size:"md",scope:a,backdrop:"static"},function(a){if(a.appEditForm.$invalid)return void g.incompleteForm();a.loading=!0;var b=new FormData;b.append("data",JSON.stringify(a.formEdit.data)),b.append("splash",a.form.splash),b.append("icon",a.form.icono),h.apps().add("build").post(b,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(b){b.data&&(a.loading=!1,d.swal("Correcto","Aplicacion creada correctamente ","success"),a.load(),a.$close())})})},a.create=function(){window.modal=g.show({templateUrl:"views/apps/agregar_app.html",size:"md",scope:a,backdrop:"static"},function(a){if(a.appForm.$invalid)return void g.incompleteForm();a.loading=!0;var b=new FormData;b.append("data",JSON.stringify(a.form.data)),b.append("splash",a.form.splash),b.append("icon",a.form.icono),h.apps().add("build").post(b,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(b){b.data&&(a.loading=!1,d.swal("Correcto","Aplicacion creada correctamente ","success"),a.load(),a.$close())})})},a["delete"]=function(){var b=this.record||j.grid.value;g.removeConfirm({closeOnConfirm:!0},function(c){c&&h.apps(b._id)["delete"]().success(function(c){a.records.splice(a.records.indexOf(b),1)})})}}]),angular.module("shoplyApp").service("api",["$http","constants",function(a,b){return this.get=function(){var b=this.url;return this.reset(),a.get(b)},this.post=function(b,c){var d=this.url;return this.reset(),a.post(d,b||{},c||{headers:{"Content-Type":"application/json"}})},this.put=function(b){var c=this.url;return this.reset(),a.put(c,b||{})},this["delete"]=function(){var b=this.url;return this.reset(),a["delete"](b)},this.Headers=null,this.add=function(a){return this.url+=a,this},this.headers=function(a){return this.Headers=a,this},this.reset=function(){this.url=""},this.user=function(a){return a?this.url=b.base_url+"user/"+a:this.url=b.base_url+"user/",this},this.recover=function(){return this.url=b.base_url+"recover/",this},this.reset_password=function(){return this.url=b.base_url+"reset/",this},this.verification_code=function(){return this.url=b.base_url+"user/verification-code/",this},this.permiso=function(a){return a?this.url=b.base_url+"permisos/"+a:this.url=b.base_url+"permisos/",this},this.bodega=function(a){return a?this.url=b.base_url+"bodegas/"+a:this.url=b.base_url+"bodegas/",this},this.entradas=function(a){return a?this.url=b.base_url+"entradas/"+a:this.url=b.base_url+"entradas/",this},this.salidas=function(a){return a?this.url=b.base_url+"salidas/"+a:this.url=b.base_url+"salidas/",this},this.producto=function(a){return a?this.url=b.base_url+"producto/"+a:this.url=b.base_url+"producto/",this},this.pedido=function(a){return a?this.url=b.base_url+"pedido/"+a:this.url=b.base_url+"pedido/",this},this.rutas=function(a){return a?this.url=b.base_url+"rutas/"+a:this.url=b.base_url+"rutas/",this},this.metadata=function(a){return a?this.url=b.base_url+"metadata/"+a:this.url=b.base_url+"entity/",this},this.ivas=function(a){return a?this.url=b.base_url+"ivas/"+a:this.url=b.base_url+"ivas/",this},this.formas_pagos=function(a){return a?this.url=b.base_url+"formasPago/"+a:this.url=b.base_url+"formasPago/",this},this.casa_comercial=function(a){return a?this.url=b.base_url+"casa-comercial/"+a:this.url=b.base_url+"casa-comercial/",this},this.facturacion=function(a){return a?this.url=b.base_url+"facturacion/"+a:this.url=b.base_url+"facturacion/",this},this.referencias=function(a){return a?this.url=b.base_url+"referencias/"+a:this.url=b.base_url+"referencias/",this},this.contadores=function(a){return a?this.url=b.base_url+"contadores/"+a:this.url=b.base_url+"contadores/",this},this.cantidades=function(){return this.url=b.base_url+"cantidades/",this},this.transportador=function(a){return a?this.url=b.base_url+"transportador/"+a:this.url=b.base_url+"transportador/",this},this.categoria=function(a){return a?this.url=b.base_url+"categoria/"+a:this.url=b.base_url+"categoria/",this},this.producciones=function(a){return a?this.url=b.base_url+"producciones/"+a:this.url=b.base_url+"producciones/",this},this.lotes=function(a){return a?this.url=b.base_url+"lotes/"+a:this.url=b.base_url+"lotes/",this},this.empresa=function(a){return a?this.url=b.base_url+"empresa/"+a:this.url=b.base_url+"empresa/",this},this.arqueos=function(a){return a?this.url=b.base_url+"arqueos/"+a:this.url=b.base_url+"arqueos/",this},this.apps=function(a){return a?this.url=b.base_url+"apps/"+a:this.url=b.base_url+"apps/",this},this.upload=function(){return this.url=b.uploadURL,this},this.uploadLocal=function(){return this.url=b.base_url+"upload-local/",this},this.s3=function(){return this.url=b.base_url+"upload-amazon/",this},this}]),angular.module("shoplyApp").service("permission",["$rootScope",function(a){return{canView:function(b){var c=!1;return a.user&&a.user._permission&&"EMPLOYE"==a.user.type?angular.forEach(a.user._permission.data.permission,function(a){a._menu==b&&(c=a.access?a.access.view:!1)}):a.user&&"ADMINISTRATOR"==a.user.type&&(c=!0),c},canViewForm:function(b){var c=!1;return a.user&&a.user._permission&&"EMPLOYE"==a.user.type?angular.forEach(a.user._permission.data.permission,function(a){a._form==b&&(c=a.access?a.access.view:!1)}):a.user&&"ADMINISTRATOR"==a.user.type&&(c=!0),c},canCreate:function(b){var c=!1;return a.user&&a.user._permission&&"EMPLOYE"==a.user.type?angular.forEach(a.user._permission.data.permission,function(a){a._menu==b&&(c=a.access?a.access.view:!1)}):a.user&&"ADMINISTRATOR"==a.user.type&&(c=!0),c},canUpdate:function(b){var c=!1;return a.user&&a.user._permission&&"EMPLOYE"==a.user.type?angular.forEach(a.user._permission.data.permission,function(a){a._menu==b&&(c=a.access?a.access.view:!1)}):a.user&&"ADMINISTRATOR"==a.user.type&&(c=!0),c},canDelete:function(b){var c=!1;return a.user&&a.user._permission&&"EMPLOYE"==a.user.type?angular.forEach(a.user._permission.data.permission,function(a){a._menu==b&&(c=a.access?a.access.view:!1)}):a.user&&"ADMINISTRATOR"==a.user.type&&(c=!0),c}}}]),angular.module("shoplyApp").constant("constants",{base_url:"http://www.daimont.com:8080/api/",socket:"http://www.daimont.com:8080",login_state_sucess:"dashboard",uploadURL:"http://www.daimont.com:8080/api/uploads",base_resource:"http://www.daimont.com:8080/api/resource/",currency:"COP",iva:[{valor:5,text:"5%"},{valor:10,text:"10%"}],company:{company_name:"Mi Empresa",company_address:"cra 25A#35-56",company_phone:"(+57) 301 290 4420",company_email:"company@gmail.com",company_fax:"company@gmail.com"}}),angular.module("shoplyApp").service("storage",function(){return this.get=function(a){return window.localStorage[a]?window.localStorage[a].match(/\[\{?.*\}?\]/)?JSON.parse(window.localStorage[a]):window.localStorage[a]:void 0},this.save=function(a,b){window.localStorage[a]="object"==typeof b?JSON.stringify(b):b},this.update=function(a,b){window.localStorage[a]=window.localStorage[a].match("[{|}]")?JSON.stringify(b):b},this["delete"]=function(a){delete window.localStorage[a]},this}),angular.module("shoplyApp").service("sounds",function(){return{onRequest:function(){var a=new Audio("statics/onRequest.mp3");a.play()}}}),angular.module("shoplyApp").service("modal",["$uibModal",function(a){return{showLoading:function(b,c){window.modal=a.open({templateUrl:"views/modal/loader.html",size:"sm"})},show:function(b,c,d){window.modal=a.open({templateUrl:b.templateUrl,backdrop:b.backdrop,size:b.size||"md",windowClass:b.windowClass,animation:!1,scope:b.scope,controller:["$scope",function(a){a.ok=function(){c(a)},a.cancel=function(){return d?void d(a):void a.$close()}}]}),window.modal.result.then(function(){console.log("Modal Closed!!!")},function(){})},confirm:function(a,b){var c={confirmButtonColor:"#DD6B55",confirmButtonText:"Si",cancelButtonText:"No",showCancelButton:!0,closeOnConfirm:!1,closeOnCancel:!0};window.sweet=sweetAlert(angular.extend(c,a),b)},removeConfirm:function(a,b){var c={title:"Está Seguro?",text:"Una vez eliminado este registro, no podrá volver a usarlo.",type:"warning",confirmButtonColor:"#DD6B55",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",showCancelButton:!0,closeOnConfirm:!1,closeOnCancel:!0};window.sweet=sweetAlert(angular.extend(c,a),b)},incompleteForm:function(a){var b={confirmButtonText:"Ok",showCancelButton:!1,title:"Formulario no completado",text:"Los campos con (*) son obligatorios",type:"error"};window.sweet=sweetAlert(b,a)}}}]),angular.module("shoplyApp").service("shoppingCart",["$rootScope",function(a){return{totalize:function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c].precio_VentaFacturado||a[c].precio_venta);return b},totalizeIva:function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c].ivaFacturado);return b},totalizeBases:function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c].precio_baseFacturado);return b},totalizeDiscount:function(a){for(var b=[],c=0;c<a.length;c++)b.push(parseInt(a[c].descuento));return b}}}]),angular.module("shoplyApp").controller("LoginCtrl",["$scope","sweetAlert","constants","$state","storage","account","$rootScope","Facebook",function(a,b,c,d,e,f,g,h){a.load=function(){e.get("rememberEmail")&&(a.fromStore=!0,a.form={},a.form.data={},a.form.data.email=e.get("rememberEmail"))},a.$watch(function(){return h.isReady()},function(b){a.facebookReady=!0}),a.getLoginStatus=function(){h.getLoginStatus(function(b){"connected"===b.status?(a.loggedIn=!0,a.me(function(b){a.user=b,d.go(c.login_state_sucess)})):a.loggedIn=!1})},a.me=function(a){h.api("/me",{fields:"id, name, email, first_name, last_name, picture"},a)},a.facebook_login=function(){h.login(function(b){"connected"==b.status&&a.me(function(b){a.user=b,d.go(c.login_state_sucess)})},{scope:"email"})},a.login=function(){if(a.loginForm.$invalid)return void modal.incompleteForm();var h=function(f){if("CLIENT"==f.user.type||"ADMINISTRATOR"==f.user.type){var h=f.user,i=f.token;e.save("token",i),e.save("user",h),g.isLogged=f.user,g.user=e.get("user"),d.go(c.login_state_sucess)}else b.swal("Inhabilitado.","Privilegios son insuficientes.","error"),a.unprivileged=!0},i=function(b){a.failed=!0};f.usuario().ingresar(a.form.data).then(h,i)},a.remember=function(b){b&&a.form.data.email?e.save("rememberEmail",a.form.data.email):e["delete"]("rememberEmail")}}]),angular.module("shoplyApp").controller("RequestdetailCtrl",["$scope","api","$stateParams","$state",function(a,b,c,d){a.load=function(){a.Records=!1,b.pedido(c.pedido).get().success(function(b){a.record=b,a.Records=!0})},a.facturar=function(){d.go("dashboard.facturacion-pedido",{pedido:c.pedido})}}]),angular.module("shoplyApp").controller("ProductosCtrl",["$scope","$rootScope","modal","api","constants","$state","storage",function(a,b,c,d,e,f,g){a.Records=!1,a.recordsProductos=[],a.recordsServices=[],a.unidades=[{label:"Metros",value:"M",rel:[{label:"Centimetros",value:"CM",numeric:100},{label:"Milimimetros",value:"MM",numeric:1e3},{label:"Decimetros",value:"DC",numeric:10},{label:"Metros",value:"M",numeric:1}]},{label:"Litros",value:"L",rel:[{label:"Centimetros",value:"CM",numeric:100},{label:"Milimimetros",value:"MM",numeric:1e3},{label:"Decimetros",value:"DC",numeric:10},{label:"Metros",value:"M",numeric:1}]},{label:"Unidad",value:"UND",rel:[{label:"Centimetros",value:"CM",numeric:100},{label:"Milimimetros",value:"MM",numeric:1e3},{label:"Decimetros",value:"DC",numeric:10},{label:"Metros",value:"M",numeric:1}]}],a.setUnidadValue=function(){angular.forEach(a.unidades,function(b,c){return a.unidades[c].value==a.form.data.unidadDeMedida?void(a.unidadObject=b):void 0})},a.setUnidadValueEdit=function(){angular.forEach(a.unidades,function(b,c){return a.unidades[c].value==a.formEdit.data.unidadDeMedida?void(a.unidadObjectEdit=b):void 0})},a.load=function(){d.producto().get().success(function(b){a.records=b||[],a.Records=!0}),angular.fromJson(g.get("recentColors"))&&(a.recentsColors=angular.fromJson(g.get("recentColors")))},a.loadCreate=function(){delete a.totalBase,delete a.unidadCantidad,delete a.unidadSet,delete a.areaVolumen,delete a.cantidadTotalUnidades,delete a.unidadText,a.recordsServices.length=0,a.recordsProductos&&a.recordsProductos.length>0&&(a.recordsProductos.length=0)},a.conversiones=function(){return a.form.data.cantidad?(a._rel=a.unidadObject.rel,a.form.data.cantidad&&(a.unidadCantidad=a.form.data.cantidad),a.onSelectRel=function(){a.unidadCantidad=angular.copy(a.form.data.cantidad)*parseInt(a.unidadSet),angular.forEach(a._rel,function(b,c){return a._rel[c].numeric==a.unidadSet?(a.unidadText=a._rel[c].label,void(a.unidadTextElevado=a.unidadText+"²")):void 0})},a.onChangeAreaVolumen=function(){a.cantidadTotalUnidades=a.unidadCantidad*a.areaVolumen+" "+a.unidadTextElevado},void c.show({templateUrl:"views/productos/conversiones.html",size:"lg",scope:a,backdrop:"static",windowClass:"modal-center"},function(a){a.form.data.conversion={},a.form.data.conversion.unidadCantidad=a.unidadCantidad||null,a.form.data.conversion.unidadSet=a.unidadSet||null,a.form.data.conversion.unidadText=a.unidadText||null,a.form.data.conversion.areaVolumen=a.areaVolumen||null,a.form.data.conversion.cantidadTotalUnidades=a.cantidadTotalUnidades||null,a.$close()})):void toastr.warning("Debe digitar una cantidad.")},a.conversionesEdit=function(){return a.formEdit.data.cantidad?(a.setUnidadValueEdit(),a._relEdit=a.unidadObjectEdit.rel,a.unidadCantidadEdit=a.formEdit.data.conversion.unidadCantidad||a.formEdit.data.cantidad?a.formEdit.data.conversion.unidadCantidad||a.formEdit.data.cantidad:null,a.onSelectRelEdit=function(){a.unidadCantidadEdit=angular.copy(a.formEdit.data.cantidad)*parseInt(a.unidadSetEdit),angular.forEach(a._relEdit,function(b,c){return a._relEdit[c].numeric==a.unidadSetEdit?(a.unidadTextEdit=a._relEdit[c].label,void(a.unidadTextElevadoEdit=a.unidadTextEdit+"²")):void 0})},a.onChangeAreaVolumenEdit=function(){a.cantidadTotalUnidadesEdit=a.unidadCantidadEdit*a.areaVolumenEdit+" "+a.unidadTextElevadoEdit},void c.show({templateUrl:"views/productos/editar_conversiones.html",size:"lg",scope:a,backdrop:"static"},function(a){a.formEdit.data.conversion={},a.formEdit.data.conversion.unidadCantidad=a.unidadCantidadEdit||null,a.formEdit.data.conversion.unidadSet=a.unidadSetEdit||null,a.formEdit.data.conversion.unidadText=a.unidadTextEdit||null,a.formEdit.data.conversion.areaVolumen=a.areaVolumenEdit||null,a.formEdit.data.conversion.cantidadTotalUnidades=a.cantidadTotalUnidadesEdit||null,a.$close()})):void toastr.warning("Debe digitar una cantidad.")},a.loadRecent=function(){a.form.data.color=a.recentsColors},a.setDefaultColor=function(b){for(var c=0;c<a.form.data.color.length;c++)b!=c&&(a.form.data.color[c].predeterminado=!1)},a.setDefaultColorEdit=function(b){for(var c=0;c<a.formEdit.data.color.length;c++)b!=c&&(a.formEdit.data.color[c].predeterminado=!1)},a.addColor=function(){a.form.data.color?(a.form.data.color.push({descripcion:a.apariencia.descripcionColor,color:a.apariencia.color,predeterminado:a.apariencia.predeterminado}),g.save("recentColors",a.form.data.color)):(a.form.data.color=[],a.form.data.color.push({descripcion:a.apariencia.descripcionColor,color:a.apariencia.color,predeterminado:a.apariencia.predeterminado}),g.save("recentColors",a.form.data.color)),delete a.apariencia},a.removeColor=function(){a.form.data.color.splice(a.form.data.color.indexOf(this.color),1)},a.addColorEdit=function(){a.formEdit.data.color?a.formEdit.data.color.push({descripcion:a.apariencia.descripcionColor,color:a.apariencia.color}):(a.formEdit.data.color=[],a.formEdit.data.color.push({descripcion:a.apariencia.descripcionColor,color:a.apariencia.color})),delete a.apariencia},a.removeColorEdit=function(){a.formEdit.data.color.splice(a.formEdit.data.color.indexOf(this.color),1)},a.verImpuestos=function(){a.record=this.record._iva,window.modal=c.show({templateUrl:"views/productos/verIvas.html",size:"sm",scope:a,backdrop:"static"},function(a){a.$close()})},a.$watch("_grocery",function(b,c){delete a.total,b&&d.cantidades().add("stock/"+b).add("/"+a.formEdit._id).get().success(function(b){a.stocks=b,0==a.stocks.length?a.msg="No se encontraron movimientos en esta bodega":delete a.msg})}),a.setBaseComponente=function(){this.record&&this.record.conversion&&(this.record.data.baseComponent=(this.record.precio_venta||this.record.precio)/(this.record.conversion.areaVolumen*this.record.conversion.unidadCantidad)*angular.copy(this.record.cantidad),this.record.data.baseIva=(this.record.precio+this.record.valor_iva)*this.record.data.cantidad)},a.setBaseComponenteEdit=function(){this.record.conversion?(this.record.cantidad=this.record.data.cantidad,this.record.data.baseComponent=(this.record.precio_venta||this.record.precio)/(this.record.conversion.areaVolumen*this.record.conversion.unidadCantidad)*angular.copy(this.record.cantidad),this.record.data.baseIva=(this.record.precio+this.record.valor_iva)*this.record.data.cantidad):(this.record.cantidad=this.record.data.cantidad,this.record.data.baseComponent=(this.record.precio_venta||this.record.precio)*angular.copy(this.record.cantidad),this.record.data.baseIva=(this.record.precio+this.record.valor_iva)*this.record.cantidad)},a.onTypeQty=function(){this.record.conversion?(this.record.cantidad=this.record.cantidad,this.record.data.baseComponent=(this.record.precio_venta||this.record.precio)/(this.record.conversion.areaVolumen*this.record.conversion.unidadCantidad)*angular.copy(this.record.cantidad),this.record.data.baseIva=(this.record.precio+this.record.valor_iva)*this.record.data.cantidad):(this.record.cantidad=this.record.cantidad,this.record.data.baseComponent=(this.record.precio_venta||this.record.precio)*angular.copy(this.record.cantidad),this.record.data.baseIva=(this.record.precio+this.record.valor_iva)*this.record.cantidad)},a.onTypeQtyService=function(){this.record.cantidad=this.record.cantidad,this.record.data.baseComponent=(this.record.precio_venta||this.record.precio)*angular.copy(this.record.cantidad),this.record.data.baseIva=(this.record.precio+this.record.valor_iva)*this.record.cantidad},a.onTypeQtyEdit=function(){
this.record.conversion?(this.record.data.baseComponent=(this.record.precio||this.record.precio_venta)/this.record.conversion.areaVolumen*this.record.cantidad,this.record.data.baseIva=(this.record.precio+this.record.valor_iva)*this.record.cantidad):(this.record.data.baseComponent=(this.record.precio_venta||this.record.precio)*this.record.cantidad,this.record.data.baseIva=(this.record.precio_venta||this.record.precio)*this.record.cantidad)},a.onTypeQtyServiceEdit=function(){this.record.data.baseComponent=(this.record.precio_venta||this.record.precio)*this.record.cantidad,this.record.data.baseIva=(this.record.precio_venta||this.record.precio)*this.record.cantidad},a.onTypeQtyEditComponent=function(){this.record.conversion?(this.record.data.baseComponent=(this.record.precio_venta||this.record.precio)/(this.record.conversion.areaVolumen*this.record.conversion.unidadCantidad)*angular.copy(this.record.cantidad),this.record.data.baseIva=(this.record.precio_venta||this.record.precio+this.record.valor_iva)*this.record.cantidad):(this.record.data.baseComponent=(this.record.precio_venta||this.record.precio)*angular.copy(this.record.cantidad),this.record.data.baseIva=(this.record.precio_venta||this.record.precio)*angular.copy(this.record.cantidad))},a.totalizeBase=function(){for(var b=[],c=0,d=0;d<a.recordsProductos.length;d++)b.push(a.recordsProductos[d].data.baseComponent||a.recordsProductos[d].precio_venta||a.recordsProductos[d].precio);for(var e=0;e<b.length;e++)console.log("y",b[e]),c+=b[e];a.totalBase=c},a.totalizeBaseServices=function(){for(var b=[],c=0,d=0;d<a.recordsServices.length;d++)b.push(a.recordsServices[d].data.baseComponent||a.recordsServices[d].precio_venta||a.recordsServices[d].precio);for(var e=0;e<b.length;e++)console.log("y",b[e]),c+=b[e];a.totalBaseService=c},a.totalizeBaseComponentIva=function(){for(var b=[],c=0,d=0;d<a.recordsProductos.length;d++)b.push(a.recordsProductos[d].data.baseComponent||a.recordsProductos[d].precio_venta||a.recordsProductos[d].precio);for(var e=0;e<b.length;e++)console.log("y",b[e]),c+=b[e];a.totalBaseIva=c},a.totalizeBaseComponentEdit=function(){for(var b=[],c=0,d=0;d<a.recordsProductosEdit.length;d++)b.push(a.recordsProductosEdit[d].data.baseComponent||a.recordsProductosEdit[d].precio_venta||a.recordsProductosEdit[d].precio);for(var e=0;e<b.length;e++)console.log("y",b[e]),c+=b[e];a.totalBaseEdit=c},a.totalizeBaseServicesEdit=function(){console.log("this",this);for(var b=[],c=0,d=0;d<a.formEdit.data.services.length;d++)b.push(a.formEdit.data.services[d].data.baseComponent||a.formEdit.data.services[d].precio);for(var e=0;e<b.length;e++)console.log("y",b[e]),c+=b[e];a.totalBaseServiceEdit=c},a.totalizeBaseComponentIvaEdit=function(){for(var b=[],c=0,d=0;d<a.recordsProductosEdit.length;d++)b.push(a.recordsProductosEdit[d].data.baseIva||(a.recordsProductosEdit[d].precio+a.recordsProductosEdit[d].valor_iva)*a.recordsProductosEdit[d].data.cantidad||0);for(var e=0;e<b.length;e++)console.log("y",b[e]),c+=b[e];a.totalBaseIvaEdit=c},a.options=["transparent","#FF8A80","#FFD180","#FFFF8D","#CFD8DC","#80D8FF","#A7FFEB","#CCFF90"],a.color="#FF8A80",a.colorChanged=function(a,b){console.log("from ",b," to ",a)},a.$watch("recordsProductos",function(b,c){b&&b.length>0&&(a.totalizeBase(),a.totalizeBaseComponentIva(),a.form.precio_venta<=a.totalBase&&toastr.warning("El costo de este producto esta por debajo del valor total del los materiales"))},!0),a.$watch("recordsProductosEdit",function(b,c){b&&(a.totalizeBaseComponentEdit(),a.totalizeBaseComponentIvaEdit())},!0),a.removefromComponentList=function(){a.recordsProductos.splice(a.recordsProductos.indexOf(this.record),1)},a.removefromComponentListEdit=function(){a.recordsProductosEdit.splice(a.recordsProductosEdit.indexOf(this.record),1)},a.$watch("_productAdd",function(b,c){if(b){var d={title:"Está Seguro?",text:"Este Producto tiene conversiones desea trabajar con el.",type:"warning",confirmButtonColor:"#DD6B55",confirmButtonText:"Si",cancelButtonText:"No",showCancelButton:!0,closeOnConfirm:!1,closeOnCancel:!1};a._productAddObj.conversion?window.sweet=sweetAlert(d,function(b){b?(a._productAddObj.data={},a._productAddObj.data.cantidad=1,a._productAddObj.data.baseComponent=(a._productAddObj.precio_venta||a._productAddObj.precio)/a._productAddObj.conversion.areaVolumen,a._productAddObj.isConversion=!0,a.recordsProductos.push(a._productAddObj),a.$apply(),window.sweetAlert.close()):(a._productAddObj.data={},a._productAddObj.data.cantidad=1,a.recordsProductos.push(a._productAddObj),a.$apply(),window.sweetAlert.close())}):(a._productAddObj.data={},a._productAddObj.conversion=!1,a._productAddObj.data.cantidad=1,a.recordsProductos.push(a._productAddObj)),delete a._productAdd}},!0),a.$watch("_productAddEdit",function(b,c){if(b){var d={title:"Está Seguro?",text:"Este Producto tiene conversiones desea trabajar con el.",type:"warning",confirmButtonColor:"#DD6B55",confirmButtonText:"Si",cancelButtonText:"No",showCancelButton:!0,closeOnConfirm:!1,closeOnCancel:!1};a._productAddObjEdit.conversion?window.sweet=sweetAlert(d,function(b){return b?(a._productAddObjEdit.data={},a._productAddObjEdit.data.cantidad=1,a._productAddObjEdit.data.baseComponent=(a._productAddObjEdit.precio_venta||a._productAddObjEdit.precio)/a._productAddObjEdit.conversion.areaVolumen,a._productAddObjEdit.isConversion=!0,a.recordsProductosEdit?(a.recordsProductosEdit.push(a._productAddObjEdit),a.$apply(),void window.sweetAlert.close()):(a.recordsProductosEdit=[],a.recordsProductosEdit.push(a._productAddObjEdit),a.$apply(),void window.sweetAlert.close())):(a._productAddObjEdit.data={},a._productAddObjEdit.data.cantidad=1,a.recordsProductosEdit?(a.recordsProductosEdit.push(a._productAddObjEdit),a.$apply(),void window.sweetAlert.close()):(a.recordsProductosEdit=[],a.recordsProductosEdit.push(a._productAddObjEdit),a.$apply(),void window.sweetAlert.close()))}):a.recordsProductosEdit?(a._productAddObjEdit.data={},a._productAddObjEdit.data.cantidad=1,a.recordsProductosEdit.push(a._productAddObjEdit)):(a.recordsProductosEdit=[],a._productAddObjEdit.data={},a._productAddObjEdit.data.cantidad=1,a.recordsProductosEdit.push(a._productAddObjEdit))}delete a._productAddEdit},!0),a.$watch("formEdit.data.services",function(b,c){b&&(a.totalizeBaseServicesEdit(),a.formEdit.data.precio<=a.totalBaseServiceEdit&&toastr.warning("El costo de este producto esta por debajo del valor total del los servicios"))},!0),a.$watch("recordsServices",function(b,c){b&&(a.totalizeBaseServices(),a.form.data.precio=a.totalBaseService)},!0),a.removeServicefromComponentList=function(){a.recordsServices.splice(a.recordsServices.indexOf(this.record),1)},a.removeServiceFromListEdit=function(){a.formEdit.data.services.splice(a.formEdit.data.services.indexOf(this.record),1)},a.$watch("_serviceAdd",function(b,c){b&&(a._serviceAddObj.data={},a._serviceAddObj.data.cantidad=1,a._serviceAddObj.data.baseComponent=(a._serviceAddObj.precio_venta||a._serviceAddObj.precio)*a._serviceAddObj.cantidad,a.recordsServices.push(a._serviceAddObj),a.form.data.services=a.recordsServices.map(function(a){return{_id:a._id}}),delete a._serviceAdd)}),a.$watch("_serviceAddEdit",function(b,c){b&&(a.formEdit.data.services?(a._serviceAddObjEdit.data={},a._serviceAddObjEdit.data.cantidad=1,a.formEdit.data.services.push(a._serviceAddObjEdit)):(a.formEdit.data.services=[],a._serviceAddObjEdit.data={},a._serviceAddObjEdit.data.cantidad=1,a.formEdit.data.services.push(a._serviceAddObjEdit)),delete a._serviceAddEdit)}),a.getByProduct=function(){a.total=0,d.cantidades().add("stock/"+a.formEdit._id).get().success(function(b){a.stocks=b,a.stocks.map(function(b){return a.total=a.total+parseInt(b.amount),b}),0==a.stocks.length?a.msg="No se encontraron movimientos en esta bodega":delete a.msg})},a.setBaseService=function(){this.record.data.baseComponent=(this.record.precio_venta||this.record.precio)*angular.copy(this.record.cantidad),this.record.data.baseIva=(this.record.precio+this.record.valor_iva)*this.record.cantidad},a.detail=function(){var a=f.href("dashboard.detalle_producto",{producto:b.grid.value._id});window.open(a,"_blank")},a.edit=function(){a.recordsProductosEdit&&(delete a.recordsProductosEdit,delete a.totalBaseEdit,delete a.totalBaseIvaEdit),a.recordsServices&&delete a.totalBaseServiceEdit,a.formEdit=angular.copy(this.record),a.formEdit._category=this.record._category?this.record._category._id:null,a.formEdit._commercial_home=this.record._commercial_home?this.record._commercial_home._id:null,a.ivaValue=this.record._iva?this.record._iva.data.valor:0,a.formEdit._iva=this.record._iva?this.record._iva._id:null,a.formEdit.data.conversion&&(a.unidadCantidadEdit=a.formEdit.data.conversion.unidadCantidad||null,a.unidadSetEdit=a.formEdit.data.conversion.unidadSet||null,a.areaVolumenEdit=a.formEdit.data.conversion.areaVolumen||null,a.cantidadTotalUnidadesEdit=a.formEdit.data.conversion.cantidadTotalUnidades||null),a.formEdit.data.tags&&(a.tags=a.formEdit.data.tags.map(function(a){var b=new Object;return b.text=a,b.value=a,b})),a.formEdit._reference.reference&&(a.reference=a.formEdit._reference.reference.map(function(a){var b=new Object;return b.text=a,b.value=a,b})),a.formEdit.data.component&&(a.recordsProductosEdit=a.formEdit.data.component.map(function(a){var b=new Object;return b=a._id.data,b.data={},b.data.cantidad=a.cantidad,b.iva=a._id._iva,b._reference=a._id._reference,b._category=a._id._category,b._id=a._id._id,b.idcomposed=a._id.idcomposed,b})),a.formEdit.data.services&&(a.formEdit.data.services=a.formEdit.data.services.map(function(a){var b=new Object;return b=a._id.data,b.data={},b.cantidad=a.cantidad,b.iva=a._id._iva,b._reference=a._id._reference,b._category=a._id._category,b._id=a._id._id,b.idcomposed=a._id.idcomposed,b})),window.modal=c.show({templateUrl:"views/productos/editar_producto.html",size:"lg",scope:a,backdrop:"static"},function(a){if(a.formProducto.$invalid)return void c.incompleteForm();var b=angular.copy(a.formEdit);a.formEdit.data.services&&(b.data.services=angular.copy(a.formEdit.data.services.map(function(a){return{_id:a._id,cantidad:a.cantidad}}))),a.formEdit.data.component?b.data.component=angular.copy(a.recordsProductosEdit.map(function(a){return{_id:a._id,cantidad:a.cantidad}})):a.recordsProductosEdit&&(b.data.component=angular.copy(a.recordsProductosEdit.map(function(a){return{_id:a._id,cantidad:a.cantidad}}))),d.producto(a.formEdit._id).put(b).success(function(b){b&&(sweetAlert("Registro Modificado","Registro modificado correctamente.","success"),a.load(),a.$close(),delete a.form.data)})})},a.$watch("form.data.precio",function(b,c){try{var d=parseInt(a.iva?a.iva.valor:0)/100*a.form.data.precio||0,e=(a.form.data.utilidad||0)/100*a.form.data.precio||0;a.form.data.valor_utilidad=e,a.form.data.valor_iva=d,a.form.data.precio_venta=d+e+a.form.data.precio}catch(f){}}),a.$watch("iva.valor",function(b,c){try{a.form.data.valor_iva=(a.form.data.precio+a.form.data.valor_utilidad)*(parseInt(b)/100),a.form.data.precio_venta=a.form.data.valor_iva+a.form.data.precio+a.form.data.valor_utilidad}catch(d){}}),a.$watch("form.data.utilidad",function(b,c){try{a.form.data.valor_utilidad=a.form.data.precio*(a.form.data.utilidad/100),a.form.data.precio_venta=a.form.data.valor_iva+a.form.data.valor_utilidad+a.form.data.precio}catch(d){}}),a.editLoad=function(){a.stocks&&a.stocks.length>0&&delete a.stocks,a._grocery&&delete a._grocery,a.$watch("formEdit.data.precio",function(b,c){try{var d=parseInt(a.EditIva?a.EditIva.valor:a.ivaValue)/100*a.formEdit.data.precio||0,e=(a.formEdit.data.utilidad||0)/100*a.formEdit.data.precio||0;a.formEdit.data.valor_utilidad=e,a.formEdit.data.valor_iva=d,a.formEdit.data.precio_venta=d+e+a.formEdit.data.precio}catch(f){console.log("error",f)}}),a.$watch("EditIva.valor",function(b,c){try{b||c?a.formEdit.data.valor_iva=a.formEdit.data.precio*(parseInt(b||0)/100):a.formEdit.data.valor_iva=(a.formEdit.data.precio+a.formEdit.data.valor_utilidad)*(parseInt(a.ivaValue)/100),a.formEdit.data.precio_venta=a.formEdit.data.valor_iva+a.formEdit.data.precio+a.formEdit.data.valor_utilidad}catch(d){console.log("error",d)}}),a.$watch("formEdit.data.utilidad",function(b,c){try{a.formEdit.data.valor_utilidad=a.formEdit.data.precio*(a.formEdit.data.utilidad/100),a.formEdit.data.precio_venta=a.formEdit.data.valor_iva+a.formEdit.data.valor_utilidad+a.formEdit.data.precio}catch(d){console.log("error",d)}})},a.create=function(){d.bodega().get().success(function(b){return 0==b.length?void sweetAlert("No Existen Bodegas","Debe existir almenos una bodega","error"):(window.modal=c.show({templateUrl:"views/productos/agregar-producto.html",size:"lg",scope:a,backdrop:"static"},function(a){return a.formProducto.$invalid?void c.incompleteForm():(a.recordsProductos&&a.recordsProductos.length>0&&(a.form.data.component=a.recordsProductos.map(function(a){return console.log("component iter",a),{_id:a._id,cantidad:a.cantidad}})),void d.producto().post(a.form).success(function(b){b&&(a.load(),a.$close(),g.get("recentsColors")&&g.save("recentsColors",scope.form.data.color),delete a.form.data,sweetAlert("Registro completado.","has registrado un nuevo producto.","success"))}).error(function(a,b){409==b&&sweetAlert("Referencia duplicada","La referencia: "+a.reference+" ya existe","warning")}))}),void a.$apply())})},a["delete"]=function(){var b=this.record;c.removeConfirm({closeOnConfirm:!0},function(c){c&&d.producto(b._id)["delete"]().success(function(c){c&&a.records.splice(a.records.indexOf(b),1)})})}}]),angular.module("shoplyApp").controller("ResetPasswordCtrl",["$scope","$stateParams","api","sweetAlert","account","storage","$state",function(a,b,c,d,e,f,g){a.reset=function(){a.resetForm.$valid&&(a.form.data.link=b.token,c.reset_password().add(b.token).post(a.form.data).then(function(b){b&&(d.swal("Cambio de clave!","se ha cambiado correctamente","success"),delete a.form,g.go("login"))},function(a){404==a.status&&d.swal({title:"Expiró",text:"Este enlace ha caducado.",type:"error"})}))}}]),angular.module("shoplyApp").directive("estadoProducto",function(){function a(a,b){a.records=b.product_status,a.myConfig={valueField:"status",labelField:"status",placeholder:"Estado",maxItems:1}}return a.$inject=["$scope","constants"],{template:'<selectize config="myConfig" options="records" ng-model="ngModel"></selectize>',restrict:"E",scope:{ngModel:"="},controller:a,link:function(a,b,c){}}}),angular.module("shoplyApp").directive("iva",function(){function a(a,b,c){c.ivas().get().success(function(b){a.records=b.map(function(a){var b=a.data;return b._id=a._id,b})}),a.$watch("ngModel",function(b,c){b&&angular.forEach(a.records,function(c){c._id==b&&(a.setObject=c)})}),a.myConfig={valueField:"_id",labelField:"descripcion",placeholder:"Iva",maxItems:1,allowEmptyOption:a.emptyOption}}return a.$inject=["$scope","constants","api"],{template:'<selectize config="myConfig" options="records" ng-model="ngModel"></selectize>',restrict:"E",scope:{ngModel:"=",setObject:"=",emptyOption:"@"},controller:a,link:function(a,b,c){}}}),angular.module("shoplyApp").directive("choice",["$rootScope",function(a){return{restrict:"A",scope:{choice:"=choice",value:"=value"},link:function(a,b,c){a.$watch("choice",function(c){console.log(c==a.choice),b.toggleClass("sp-active",c===a.value)}),b.addClass("sp-choosable"),b.bind("click",function(){a.$apply(function(){a.choice=a.value})}),b.on("$destroy",function(){})}}}]),angular.module("shoplyApp").directive("cropper",["$rootScope","$timeout","modal",function(a,b,c){function d(a){a.open=function(){c.show({templateUrl:"views/utils/cropper2.html",size:"md",scope:a},function(a){a.$close()})}}function e(a,c,d){var e=function(b){var c=b.currentTarget.files[0],d=new FileReader;a.isLoaded=!1,d.onload=function(b){a.$apply(function(a){a.myImage=b.target.result,a.isLoaded=!0,a.open()})},d.readAsDataURL(c)};b(function(){angular.element(document.querySelector("#"+a.uploadId)).on("change",e)})}return d.$inject=["$scope"],{restrict:"EA",template:'<div><div ng-show="!isLoaded" ><input type="file" id="{{uploadId}}" class="hidden"><label style="width: 100%;float: left;position: relative;height: 350px;line-height: 7; font-size: 50px;" for="{{uploadId}}" class="text-center custom-btn custom-btn-primary"><i class="icon icon-picture"></i>Subir</label></div></div>',scope:{ngModel:"=",uploadId:"@"},controller:d,link:e}}]),angular.module("shoplyApp").directive("clienteField",function(){function a(a,b,c,d){a.data?a.records=data:b.user().get().success(function(b){a.records=b.filter(function(a){return a.full_name=a.name?a.name+" "+a.last_name:a.data.razon_social,"CLIENT"==a.type})}),a.myConfig={loadingClass:"selectizeLoading",create:!1,valueField:a.key,labelField:a.label,placeholder:"Cliente",openOnFocus:!1,selectOnTab:!0,maxItems:1,setFocus:a.setFocus||!1}}return a.$inject=["$scope","api","modal","$rootScope"],{template:'<selectize focus-on="true" config="myConfig" options="records" ng-model="ngModel"></selectize>',restrict:"EA",scope:{ngModel:"=ngModel",key:"@",label:"@",data:"=data",setFocus:"="},controller:a,link:function(a,b,c){a.$root.$on("focusOn",function(a,c){c&&b[0].firstChild.selectize.focus()})}}}),angular.module("shoplyApp").directive("requestField",function(){function a(a,b){a.records=[{text:"Orden de Pedido",value:"Orden de Pedido"},{text:"Remisión",value:"Remisión"}],a.myConfig={valueField:"value",labelField:"text",placeholder:"Tipo",maxItems:1,allowEmptyOption:a.emptyOption}}return a.$inject=["$scope","constants"],{template:'<selectize config="myConfig" options="records" ng-model="ngModel"></selectize>',restrict:"E",scope:{ngModel:"=",emptyOption:"@"},controller:a,link:function(a,b,c){}}}),angular.module("shoplyApp").directive("estadoPedido",function(){function a(a,b){a.records=b.request_status,a.myConfig={valueField:"status",allowEmptyOption:!0,labelField:"status",placeholder:"Estado",maxItems:1}}return a.$inject=["$scope","constants"],{template:'<selectize config="myConfig" options="records" ng-model="ngModel"></selectize>',restrict:"E",scope:{ngModel:"="},controller:a,link:function(a,b,c){}}}),angular.module("shoplyApp").directive("companyField",function(){function a(a,b,c,d){b.empresa().add("user/"+d.user._id).get().success(function(b){a.records=b.map(function(a){var b=new Object;return b.name=a.data.empresa,b._id=a._id,b.decripcion=a.data.descripcion,b})||[]}),a.myConfig={loadingClass:"selectizeLoading",valueField:a.key,labelField:a.label,placeholder:"Empresa",maxItems:1}}return a.$inject=["$scope","api","modal","$rootScope"],{template:'<selectize config="myConfig" options="records" ng-model="ngModel"></selectize>',restrict:"EA",scope:{ngModel:"=",key:"@",label:"@"},controller:a,link:function(a,b,c){}}}),angular.module("shoplyApp").directive("employeeField",function(){function a(a,b,c,d){b.user().get().success(function(b){a.records=b.filter(function(a){return"EMPLOYE"==a.type})}),a.myConfig={valueField:a.key,labelField:a.label,placeholder:a.placeholder,maxItems:1,allowEmptyOption:a.emptyOption}}return a.$inject=["$scope","api","modal","$rootScope"],{template:'<selectize config="myConfig" options="records" ng-model="ngModel"></selectize>',restrict:"EA",scope:{ngModel:"=",key:"@",label:"@",placeholder:"@",allowEmptyOption:"@"},controller:a,link:function(a,b,c){}}}),angular.module("shoplyApp").directive("bodegaField",function(){function a(a,b,c,d){b.bodega().get().success(function(b){a.records=b.map(function(a){var b=new Object;return b.name=a.data.bodega,b._id=a._id,b})||[]}),a.myConfig={valueField:a.key,labelField:a.label,placeholder:"Bodega",selectOnTab:!0,allowEmptyOption:a.emptyOption,maxItems:parseInt(a.itemsMax),plugins:parseInt(a.itemsMax)>1?["remove_button"]:void 0}}return a.$inject=["$scope","api","modal","$rootScope"],{template:'<selectize config="myConfig" options="records" ng-model="ngModel"></selectize>',restrict:"EA",scope:{ngModel:"=",key:"@",label:"@",emptyOption:"@",itemsMax:"@"},controller:a,link:function(a,b,c){}}}),angular.module("shoplyApp").directive("spSidebarMenu",function(){return{templateUrl:"views/system-shoply/sp-sidebar.html",restrict:"EA",link:function(a,b,c){b.find("#sp-menu").metisMenu()}}}),angular.module("shoplyApp").directive("spSidebarHeader",function(){return{templateUrl:"views/system-shoply/sp-sidebar-header.html",restrict:"EA",link:function(a,b,c){}}}),angular.module("shoplyApp").directive("spHeaderToolbar",function(){return{templateUrl:"views/system-shoply/sp-header-toolbar.html",restrict:"EA",link:function(a,b,c){}}}),angular.module("shoplyApp").directive("entidadField",function(){function a(a,b){a.records=[{text:"Productos",value:"_product"},{text:"Pedidos",value:"_request"},{text:"Facturas",value:"_invoice"},{text:"Arqueos",value:"_tonnage"},{text:"Bodega",value:"_grocery"},{text:"Entradas",value:"_inputs"},{text:"Salidas",value:"_outputs"},{text:"Producciones",value:"_productions"},{text:"Lotes",value:"_lotes"}],a.myConfig={valueField:"value",labelField:"text",placeholder:"Entidad",maxItems:1,onItemAdd:function(b,c){angular.forEach(a.records,function(c,d){return c.value==b?void(a.setObject=a.records[d]):void 0})}}}return a.$inject=["$scope","constants"],{template:'<selectize config="myConfig" options="records" ng-model="ngModel"></selectize>',restrict:"E",scope:{ngModel:"=",setObject:"="},controller:a,link:function(a,b,c){}}}),angular.module("shoplyApp").directive("uiFocus",["$timeout","$parse",function(a,b){return{link:function(c,d,e){var f=b(e.uiFocus);c.$watch(f,function(b){b===!0&&a(function(){d[0].focus()})}),d.bind("blur",function(){c.$apply(function(){f=!1})})}}}]),angular.module("shoplyApp").directive("focusOn",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){b.$watch(d.focusOn,function(b){a(function(){b?c.focus():c.blur()})})}}}]),angular.module("shoplyApp").directive("referenceField",function(){function a(a,b,c,d){a.myConfig={create:!0,valueField:a.key,labelField:a.label,placeholder:"Escriba la referencia y presione [enter]",plugins:["remove_button"]}}return a.$inject=["$scope","api","modal","$rootScope"],{template:'<selectize config="myConfig" options="[]" ng-model="ngModel"></selectize>',restrict:"EA",scope:{ngModel:"=",key:"@",label:"@"},controller:a,link:function(a,b,c){}}}),angular.module("shoplyApp").directive("spGalleryPreview",function(){function a(a){a.setImage=function(){a.selection=this.image},a.next=function(){return-1==a.images.indexOf(a.selection)?void(a.selection=a.images[1]):void(a.selection=a.images[a.images.indexOf(a.selection)+1])},a.prev=function(){return console.log("indice",a.images.indexOf(a.selection)),0==a.images.indexOf(a.selection)||-1==a.images.indexOf(a.selection)?void(a.selection=a.images[a.images.length-1]):void(a.selection=a.images[a.images.indexOf(a.selection)-1])}}return a.$inject=["$scope"],{templateUrl:"views/system-shoply/sp-gallery-preview.html",restrict:"EA",scope:{images:"="},controller:a,link:function(a,b,c){}}}),angular.module("shoplyApp").controller("ProductdetailCtrl",["$scope","api","$stateParams",function(a,b,c){a.load=function(){c.producto&&b.producto(c.producto).get().success(function(b){a.record=b})},a.upload=function(){var c=new FormData,d=a.myFiles[0];c.append("file",d),b.upload().post(c,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(a){console.log(a)})}}]),angular.module("shoplyApp").controller("ProduccionCtrl",["$scope","$rootScope","modal","api","constants","$state","storage",function(a,b,c,d,e,f,g){a.Records=!1,a.recordsProductos=[],a.load=function(){d.producciones().get().success(function(b){a.records=b||[],a.Records=!0})}}]),angular.module("shoplyApp").controller("IvasCtrl",["$scope","modal","api",function(a,b,c){a.load=function(){a.loading=!0,c.ivas().get().success(function(b){a.records=b||[],a.loading=!1})},a.agregar=function(){return a.formIva.$invalid?void b.incompleteForm():void c.ivas().post(a.form).success(function(b){b&&(a.records.push(b),delete a.form.data)})},a.borrar=function(){var d=this.record;b.removeConfirm({closeOnConfirm:!0},function(b){b&&c.ivas(d._id)["delete"]().success(function(b){b&&a.records.splice(a.records.indexOf(d),1)})})},a.edit=function(){a.formEdit=angular.copy(this.record),window.modal=b.show({templateUrl:"views/iva/editar_ivas.html",size:"md",scope:a},function(a){return a.$$childTail.formEditIva.$invalid?void b.incompleteForm():void c.ivas(a.formEdit._id).put(a.formEdit).success(function(b){b&&(sweetAlert("Registro Modificado","Registro modificado correctamente.","success"),a.load(),a.$close(),delete a.formEdit)})})}}]),angular.module("shoplyApp").directive("imageUploader",["api","modal",function(a,b,c,d){function e(c,d){c.image_final="",c.ghost=[],c.load=function(){},c.show=function(){c.file=this.file.preview||this.file.URL,b.show({templateUrl:"views/utils/preview.html",size:"md",scope:c},function(a){a.$close()})},c.remove=function(){c.ngModel.splice(c.ngModel.indexOf(this.file),1),c.ngModel.length<=c.items&&(c.showAlert=!1)},c.edit=function(){c.editImage=this.file,b.show({templateUrl:"views/utils/cropper2.html",size:"md",scope:c},function(b){b.editImage.loading=!0,a.uploadLocal().post({data:b.image_final}).then(function(a){a&&(b.editImage.loading=!1,b.udate=new Date,b.editImage.URL=a.data.url,delete b.editImage.preview)},function(a){}),b.$close()})}}return e.$inject=["$scope","$http"],{restrict:"EA",templateUrl:"views/utils/uploader.html",scope:{ngModel:"=",buttonText:"@",area:"@",title:"@",label:"@",items:"="},controller:e,link:function(a,b,c){var d=angular.element(b).find("#file");d.on("change",function(b){a.$apply(function(){a.files=b.currentTarget.files,a.files.length>a.items&&(a.showAlert=!0),angular.forEach(a.files,function(b){var c=new FileReader;c.onload=function(c){b.preview=c.target.result,b.udate=new Date,b.aname=b.name,a.ghost.push(b),a.$apply()},c.readAsDataURL(b),a.ngModel?a.ngModel.push(b):(a.ngModel=[],a.ngModel.push(b))})})})}}}]),angular.module("shoplyApp").directive("uploaderDrop",["api","$window","$timeout",function(a,b,c){function d(a){}return d.$inject=["$scope"],{restrict:"EA",replace:!0,template:'<div class="drop-box"><input type="file" name="{{selector}}" id="{{selector}}" class="hidden"><label for="{{selector}}"><span class="">{{ngModel.name || "Seleccionar o Arrastrar"}}</span><p style="color: #e66e6e;padding: 4px;background-color: whitesmoke; border-radius: 3px;font-size: smaller;" ng-show="showErrorFile"><i class="glyphicon glyphicon-remove-sign"></i>&nbsp;{{showErrorFile}}</p></label></div>',scope:{ngModel:"=",selector:"@",size:"=",ext:"="},controller:d,link:function(a,b,d){c(function(){var c=document.getElementById(d.selector);angular.element(c).on("change",function(c){a.$apply(function(){a.ngModel=c.currentTarget.files[0];var b=parseFloat(c.currentTarget.files[0].size/1024/1024).toFixed(2),d=c.currentTarget.files[0].name.split(".")[1];return-1==a.ext.indexOf(d)?void(a.showErrorFile="Este archivo no es valido"):b>a.size?void(a.showErrorFile="Archivo pesado! tamaño maximo "+a.size+"MB"):void(a.showErrorFile=!1)}),b.addClass("success")})}),b.on("dragover",function(a){a.preventDefault(),a.stopPropagation()}),b.on("dragenter",function(a){a.preventDefault(),a.stopPropagation()}),b.on("drop",function(c){return c.preventDefault(),c.stopPropagation(),c.originalEvent.dataTransfer&&c.originalEvent.dataTransfer.files.length>0&&a.$apply(function(){var d=parseFloat(c.originalEvent.dataTransfer.files[0].size/1024/1024).toFixed(2),e=c.originalEvent.dataTransfer.files[0].name.split(".")[1];return-1==a.ext.indexOf(e)?void(a.showErrorFile="Este archivo no es valido"):d>a.size?void(a.showErrorFile="Archivo pesado! tamaño maximo "+a.size+"MB"):(a.showErrorFile=!1,b.addClass("success"),void(a.ngModel=c.originalEvent.dataTransfer.files[0]))}),!1})}}}]),angular.module("shoplyApp").directive("departamentoField",function(){function a(a,b,c){a.records=b.departamentos,a.myConfig={valueField:"name",labelField:"name",placeholder:"Departamento",searchField:["name"],selectOnTab:!0,maxItems:1,allowEmptyOption:a.emptyOption,onChange:function(b){angular.forEach(a.records,function(d){return d.name==b?(c.$emit("departamentoField::changed",d.code),void a.$apply()):void 0})}}}return a.$inject=["$scope","$window","$rootScope"],{template:'<selectize config="myConfig" options="records" ng-model="ngModel"></selectize>',restrict:"E",scope:{ngModel:"=",emptyOption:"@"},controller:a,link:function(a,b,c){console.log(b)}}}),angular.module("shoplyApp").directive("ciudadField",["$window",function(a){function b(b,c,d){b.records=a.municipios,c.$on("departamentoField::changed",function(c,d){b.records=angular.copy(a.municipios).filter(function(a){return a.code_dpto==d}),b.$apply()}),b.myConfig={valueField:"name",labelField:"name",searchField:["name"],placeholder:"Ciudad",selectOnTab:!0,maxItems:1,allowEmptyOption:b.emptyOption}}return b.$inject=["$scope","$rootScope","$filter"],{template:'<selectize config="myConfig" options="records" ng-model="ngModel"></selectize>',restrict:"E",scope:{ngModel:"=",emptyOption:"@"},controller:b,link:function(a,b,c){}}}]),angular.module("shoplyApp").directive("rutasField",function(){function a(a,b,c,d){b.rutas().get().success(function(b){a.records=b.map(function(a){var b=a.data;return b._id=a._id,b})}),a.myConfig={valueField:a.key,labelField:a.label,placeholder:"Elijas las rutas",selectOnTab:!0,maxItems:1,allowEmptyOption:a.emptyOption}}return a.$inject=["$scope","api","modal","$rootScope"],{template:'<selectize config="myConfig" options="records" ng-model="ngModel"></selectize>',restrict:"EA",scope:{ngModel:"=",key:"@",label:"@",emptyOption:"@"},controller:a,link:function(a,b,c){}}}),angular.module("shoplyApp").directive("pageTitle",pageTitle),angular.module("shoplyApp").directive("icheck",icheck),pageTitle.$inject=["$rootScope","$timeout"],icheck.$inject=["$timeout"],angular.module("shoplyApp").directive("vendedorField",function(){function a(a,b,c,d){b.user().get().success(function(b){a.records=b.filter(function(a){return"SELLER"==a.type||"EMPLOYE"==a.type})}),a.myConfig={valueField:a.key,labelField:a.label,placeholder:"Vendedor",maxItems:1,allowEmptyOption:a.emptyOption}}return a.$inject=["$scope","api","modal","$rootScope"],{template:'<selectize config="myConfig" options="records" ng-model="ngModel"></selectize>',restrict:"EA",scope:{ngModel:"=",key:"@",label:"@",emptyOption:"@"},controller:a,link:function(a,b,c){}}}),angular.module("shoplyApp").directive("perfilField",function(){function a(a,b,c){c.permiso().get().success(function(b){a.records=b.map(function(a){var b=a.data;return b._id=a._id,b})}),a.myConfig={valueField:a.key,labelField:a.label,placeholder:"Entidad",maxItems:1,selectOnTab:!0,onItemAdd:function(b,c){angular.forEach(a.records,function(c,d){return c.value==b?void(a.setObject=a.records[d]):void 0})}}}return a.$inject=["$scope","constants","api"],{template:'<selectize config="myConfig" options="records" ng-model="ngModel"></selectize>',restrict:"E",scope:{ngModel:"=",setObject:"=",key:"@",label:"@"},controller:a,link:function(a,b,c){}}}),angular.module("shoplyApp").directive("slider",function(){return{replace:!0,template:'<div class="slider"></div>',restrict:"EA",scope:{range:"=",initial:"@",ngModel:"=",step:"@"},link:function(a,b,c){var d=noUiSlider.create(angular.element(b)[0],{start:parseInt(a.initial),connect:[!0,!1],step:parseInt(a.step),range:{min:a.range[0],max:a.range[1]}});d.on("update",function(b,c){a.ngModel=b.map(function(a){return Math.round(a)}),a.$apply()})}}}),angular.module("shoplyApp").directive("pinCode",function(){return{replace:!0,templateUrl:"views/components/pin.html",restrict:"EA",scope:{range:"=",initial:"@",ngModel:"=",step:"@"},link:function(a,b,c){var d="",e="1593",f=document.getElementsByClassName("dot"),g=document.getElementsByClassName("number");f=Array.from(f),g=Array.from(g);var h=document.getElementsByClassName("numbers")[0];$(h).on("click",".number",function(a){var b=$(this);b.addClass("grow"),d+=b.index()+1,$(f[d.length-1]).addClass("active"),d.length>=4&&(d!==e?f.forEach(function(a){$(a).addClass("wrong"),
$(document.body).addClass("wrong")}):f.forEach(function(a){$(a).addClass("correct"),$(document.body).addClass("correct")}),setTimeout(function(){f.forEach(function(a){a.className="dot"}),d=""},900),setTimeout(function(){document.body.className=""},1e3)),setTimeout(function(){b.className="number"},1e3)})}}}),angular.module("shoplyApp").directive("casaComercial",function(){function a(a,b,c){c.casa_comercial().get().success(function(b){a.records=b.map(function(a){var b=new Object;return b.name=a.data.descripcion_corta,b._id=a._id,b})||[]}),a.myConfig={valueField:a.key,labelField:a.label,placeholder:a.placeholder,maxItems:1,allowEmptyOption:a.emptyOption}}return a.$inject=["$scope","constants","api"],{template:'<selectize config="myConfig" options="records" ng-model="ngModel"></selectize>',restrict:"E",scope:{ngModel:"=",key:"@",label:"@",emptyOption:"@",placeholder:"@"},controller:a,link:function(a,b,c){}}}),angular.module("shoplyApp").filter("selectedItems",function(){return function(a,b){return console.log("inicial",b),b?a.filter(function(a){for(var c=0;c<a._route.length;c++)return a._route[c]._id==b?!0:!1;return!1}):a}}),angular.module("shoplyApp").filter("dateRange",function(){return function(a,b,c){return null!=b&&null!=c&&void 0!=b&&void 0!=c&&(a=a.filter(function(a){if(null!=a.createdAt){var d=new Date(a.createdAt);return d>=new Date(b)&&d<=new Date(c)}})),a}}),window.departamentos=[{code:"5",name:"Antioquia"},{code:"8",name:"Atlántico"},{code:"11",name:"Bogotá D.C"},{code:"13",name:"Bolívar"},{code:"15",name:"Boyacá"},{code:"17",name:"Caldas"},{code:"18",name:"Caquetá"},{code:"19",name:"Cauca"},{code:"20",name:"Cesar"},{code:"23",name:"Córdoba"},{code:"25",name:"Cundinamarca"},{code:"27",name:"Chocó"},{code:"41",name:"Huila"},{code:"44",name:"La Guajira"},{code:"47",name:"Magdalena"},{code:"50",name:"Meta"},{code:"52",name:"Nariño"},{code:"54",name:"Norte de Santander"},{code:"63",name:"Quindio"},{code:"66",name:"Risaralda"},{code:"68",name:"Santander"},{code:"70",name:"Sucre"},{code:"73",name:"Tolima"},{code:"76",name:"Valle del Cauca"},{code:"81",name:"Arauca"},{code:"85",name:"Casanare"},{code:"86",name:"Putumayo"},{code:"88",name:"Archipiélago de San Andrés, Providencia y Santa Catalina"},{code:"91",name:"Amazonas"},{code:"94",name:"Guainía"},{code:"95",name:"Guaviare"},{code:"97",name:"Vaupés"},{code:"99",name:"Vichada"}],window.permisos={menus:[{nombre:"Ajustes",id:"mnuAjustes",icon:"fa-cogs"},{nombre:"Permisos",id:"mnuPermisos",icon:"fa-universal-access"},{nombre:"Usuarios",id:"mnuUsuarios",icon:"fa-users"},{nombre:"Productos",id:"mnuProductos",icon:"fa-shopping-bag"},{nombre:"Rutas",id:"mnuRutas",icon:"fa-street-view"},{nombre:"Categorias",id:"mnuCategorias",icon:"fa-folder-open"},{nombre:"Pedidos",id:"mnuPedidos",icon:"fa-shopping-cart"},{nombre:"Facturacion",id:"mnuFacturacion",icon:"fa-credit-card"},{nombre:"Arqueos",id:"mnuArqueos",icon:"fa-calculator"},{nombre:"Apps",id:"mnuApps",icon:"fa-android"},{nombre:"Empresa",id:"mnuEmpresas",icon:"fa-building-o"}],forms:[{parent:"mnuAjustes",nombre:"Ivas",id:"frmIvas"},{parent:"mnuAjustes",nombre:"Formas de Pago",id:"frmFormaPagos"},{parent:"mnuAjustes",nombre:"Consecutivos",id:"frmConsecutivos"},{parent:"mnuAjustes",nombre:"Casas Comerciales",id:"frmCasaComercial"},{parent:"mnuUsuarios",nombre:"Usuarios",id:"frmUsuarios"},{parent:"mnuUsuarios",nombre:"Empleados",id:"frmEmpleados"},{parent:"mnuUsuarios",nombre:"Vendedores",id:"frmVendedores"},{parent:"mnuFacturacion",nombre:"Nueva Facturacion",id:"frmNuevaFacturacion"},{parent:"mnuFacturacion",nombre:"Buscar Facturacion",id:"frmBuscarFacturacion"},{parent:"mnuFacturacion",nombre:"Devoluciones",id:"frmDevoluciones"}]},Selectize.define("no_match",function(a){var b=this;b.onNotMatch=function(){b.settings.noMatch()},b.refreshOptions=function(){var a=b.refreshOptions;return function(){a.apply(b,arguments),this.hasOptions||""==this.$control_input.val()||this.onNotMatch()}}()}),window.municipios=[{code_dpto:"5",code:"5001",name:"MEDELLÍN"},{code_dpto:"5",code:"5002",name:"ABEJORRAL"},{code_dpto:"5",code:"5004",name:"ABRIAQUÍ"},{code_dpto:"5",code:"5021",name:"ALEJANDRÍA"},{code_dpto:"5",code:"5030",name:"AMAGÁ"},{code_dpto:"5",code:"5031",name:"AMALFI"},{code_dpto:"5",code:"5034",name:"ANDES"},{code_dpto:"5",code:"5036",name:"ANGELÓPOLIS"},{code_dpto:"5",code:"5038",name:"ANGOSTURA"},{code_dpto:"5",code:"5040",name:"ANORÍ"},{code_dpto:"5",code:"5042",name:"SANTAFÉ DE ANTIOQUIA"},{code_dpto:"5",code:"5044",name:"ANZA"},{code_dpto:"5",code:"5045",name:"APARTADÓ"},{code_dpto:"5",code:"5051",name:"ARBOLETES"},{code_dpto:"5",code:"5055",name:"ARGELIA"},{code_dpto:"5",code:"5059",name:"ARMENIA"},{code_dpto:"5",code:"5079",name:"BARBOSA"},{code_dpto:"5",code:"5086",name:"BELMIRA"},{code_dpto:"5",code:"5088",name:"BELLO"},{code_dpto:"5",code:"5091",name:"BETANIA"},{code_dpto:"5",code:"5093",name:"BETULIA"},{code_dpto:"5",code:"5101",name:"CIUDAD BOLÍVAR"},{code_dpto:"5",code:"5107",name:"BRICEÑO"},{code_dpto:"5",code:"5113",name:"BURITICÁ"},{code_dpto:"5",code:"5120",name:"CÁCERES"},{code_dpto:"5",code:"5125",name:"CAICEDO"},{code_dpto:"5",code:"5129",name:"CALDAS"},{code_dpto:"5",code:"5134",name:"CAMPAMENTO"},{code_dpto:"5",code:"5138",name:"CAÑASGORDAS"},{code_dpto:"5",code:"5142",name:"CARACOLÍ"},{code_dpto:"5",code:"5145",name:"CARAMANTA"},{code_dpto:"5",code:"5147",name:"CAREPA"},{code_dpto:"5",code:"5148",name:"EL CARMEN DE VIBORAL"},{code_dpto:"5",code:"5150",name:"CAROLINA"},{code_dpto:"5",code:"5154",name:"CAUCASIA"},{code_dpto:"5",code:"5172",name:"CHIGORODÓ"},{code_dpto:"5",code:"5190",name:"CISNEROS"},{code_dpto:"5",code:"5197",name:"COCORNÁ"},{code_dpto:"5",code:"5206",name:"CONCEPCIÓN"},{code_dpto:"5",code:"5209",name:"CONCORDIA"},{code_dpto:"5",code:"5212",name:"COPACABANA"},{code_dpto:"5",code:"5234",name:"DABEIBA"},{code_dpto:"5",code:"5237",name:"DON MATÍAS"},{code_dpto:"5",code:"5240",name:"EBÉJICO"},{code_dpto:"5",code:"5250",name:"EL BAGRE"},{code_dpto:"5",code:"5264",name:"ENTRERRIOS"},{code_dpto:"5",code:"5266",name:"ENVIGADO"},{code_dpto:"5",code:"5282",name:"FREDONIA"},{code_dpto:"5",code:"5284",name:"FRONTINO"},{code_dpto:"5",code:"5306",name:"GIRALDO"},{code_dpto:"5",code:"5308",name:"GIRARDOTA"},{code_dpto:"5",code:"5310",name:"GÓMEZ PLATA"},{code_dpto:"5",code:"5313",name:"GRANADA"},{code_dpto:"5",code:"5315",name:"GUADALUPE"},{code_dpto:"5",code:"5318",name:"GUARNE"},{code_dpto:"5",code:"5321",name:"GUATAPE"},{code_dpto:"5",code:"5347",name:"HELICONIA"},{code_dpto:"5",code:"5353",name:"HISPANIA"},{code_dpto:"5",code:"5360",name:"ITAGUI"},{code_dpto:"5",code:"5361",name:"ITUANGO"},{code_dpto:"5",code:"5364",name:"JARDÍN"},{code_dpto:"5",code:"5368",name:"JERICÓ"},{code_dpto:"5",code:"5376",name:"LA CEJA"},{code_dpto:"5",code:"5380",name:"LA ESTRELLA"},{code_dpto:"5",code:"5390",name:"LA PINTADA"},{code_dpto:"5",code:"5400",name:"LA UNIÓN"},{code_dpto:"5",code:"5411",name:"LIBORINA"},{code_dpto:"5",code:"5425",name:"MACEO"},{code_dpto:"5",code:"5440",name:"MARINILLA"},{code_dpto:"5",code:"5467",name:"MONTEBELLO"},{code_dpto:"5",code:"5475",name:"MURINDÓ"},{code_dpto:"5",code:"5480",name:"MUTATÁ"},{code_dpto:"5",code:"5483",name:"NARIÑO"},{code_dpto:"5",code:"5490",name:"NECOCLÍ"},{code_dpto:"5",code:"5495",name:"NECHÍ"},{code_dpto:"5",code:"5501",name:"OLAYA"},{code_dpto:"5",code:"5541",name:"PEÑOL"},{code_dpto:"5",code:"5543",name:"PEQUE"},{code_dpto:"5",code:"5576",name:"PUEBLORRICO"},{code_dpto:"5",code:"5579",name:"PUERTO BERRÍO"},{code_dpto:"5",code:"5585",name:"PUERTO NARE"},{code_dpto:"5",code:"5591",name:"PUERTO TRIUNFO"},{code_dpto:"5",code:"5604",name:"REMEDIOS"},{code_dpto:"5",code:"5607",name:"RETIRO"},{code_dpto:"5",code:"5615",name:"RIONEGRO"},{code_dpto:"5",code:"5628",name:"SABANALARGA"},{code_dpto:"5",code:"5631",name:"SABANETA"},{code_dpto:"5",code:"5642",name:"SALGAR"},{code_dpto:"5",code:"5647",name:"SAN ANDRÉS DE CUERQUÍA"},{code_dpto:"5",code:"5649",name:"SAN CARLOS"},{code_dpto:"5",code:"5652",name:"SAN FRANCISCO"},{code_dpto:"5",code:"5656",name:"SAN JERÓNIMO"},{code_dpto:"5",code:"5658",name:"SAN JOSÉ DE LA MONTAÑA"},{code_dpto:"5",code:"5659",name:"SAN JUAN DE URABÁ"},{code_dpto:"5",code:"5660",name:"SAN LUIS"},{code_dpto:"5",code:"5664",name:"SAN PEDRO"},{code_dpto:"5",code:"5665",name:"SAN PEDRO DE URABA"},{code_dpto:"5",code:"5667",name:"SAN RAFAEL"},{code_dpto:"5",code:"5670",name:"SAN ROQUE"},{code_dpto:"5",code:"5674",name:"SAN VICENTE"},{code_dpto:"5",code:"5679",name:"SANTA BÁRBARA"},{code_dpto:"5",code:"5686",name:"SANTA ROSA DE OSOS"},{code_dpto:"5",code:"5690",name:"SANTO DOMINGO"},{code_dpto:"5",code:"5697",name:"EL SANTUARIO"},{code_dpto:"5",code:"5736",name:"SEGOVIA"},{code_dpto:"5",code:"5756",name:"SONSON"},{code_dpto:"5",code:"5761",name:"SOPETRÁN"},{code_dpto:"5",code:"5789",name:"TÁMESIS"},{code_dpto:"5",code:"5790",name:"TARAZÁ"},{code_dpto:"5",code:"5792",name:"TARSO"},{code_dpto:"5",code:"5809",name:"TITIRIBÍ"},{code_dpto:"5",code:"5819",name:"TOLEDO"},{code_dpto:"5",code:"5837",name:"TURBO"},{code_dpto:"5",code:"5842",name:"URAMITA"},{code_dpto:"5",code:"5847",name:"URRAO"},{code_dpto:"5",code:"5854",name:"VALDIVIA"},{code_dpto:"5",code:"5856",name:"VALPARAÍSO"},{code_dpto:"5",code:"5858",name:"VEGACHÍ"},{code_dpto:"5",code:"5861",name:"VENECIA"},{code_dpto:"5",code:"5873",name:"VIGÍA DEL FUERTE"},{code_dpto:"5",code:"5885",name:"YALÍ"},{code_dpto:"5",code:"5887",name:"YARUMAL"},{code_dpto:"5",code:"5890",name:"YOLOMBÓ"},{code_dpto:"5",code:"5893",name:"YONDÓ"},{code_dpto:"5",code:"5895",name:"ZARAGOZA"},{code_dpto:"8",code:"8001",name:"BARRANQUILLA"},{code_dpto:"8",code:"8078",name:"BARANOA"},{code_dpto:"8",code:"8137",name:"CAMPO DE LA CRUZ"},{code_dpto:"8",code:"8141",name:"CANDELARIA"},{code_dpto:"8",code:"8296",name:"GALAPA"},{code_dpto:"8",code:"8372",name:"JUAN DE ACOSTA"},{code_dpto:"8",code:"8421",name:"LURUACO"},{code_dpto:"8",code:"8433",name:"MALAMBO"},{code_dpto:"8",code:"8436",name:"MANATÍ"},{code_dpto:"8",code:"8520",name:"PALMAR DE VARELA"},{code_dpto:"8",code:"8549",name:"PIOJÓ"},{code_dpto:"8",code:"8558",name:"POLONUEVO"},{code_dpto:"8",code:"8560",name:"PONEDERA"},{code_dpto:"8",code:"8573",name:"PUERTO COLOMBIA"},{code_dpto:"8",code:"8606",name:"REPELÓN"},{code_dpto:"8",code:"8634",name:"SABANAGRANDE"},{code_dpto:"8",code:"8638",name:"SABANALARGA"},{code_dpto:"8",code:"8675",name:"SANTA LUCÍA"},{code_dpto:"8",code:"8685",name:"SANTO TOMÁS"},{code_dpto:"8",code:"8758",name:"SOLEDAD"},{code_dpto:"8",code:"8770",name:"SUAN"},{code_dpto:"8",code:"8832",name:"TUBARÁ"},{code_dpto:"8",code:"8849",name:"USIACURÍ"},{code_dpto:"11",code:"11001",name:"BOGOTÁ"},{code_dpto:"13",code:"13001",name:"CARTAGENA"},{code_dpto:"13",code:"13006",name:"ACHÍ"},{code_dpto:"13",code:"13030",name:"ALTOS DEL ROSARIO"},{code_dpto:"13",code:"13042",name:"ARENAL"},{code_dpto:"13",code:"13052",name:"ARJONA"},{code_dpto:"13",code:"13062",name:"ARROYOHONDO"},{code_dpto:"13",code:"13074",name:"BARRANCO DE LOBA"},{code_dpto:"13",code:"13140",name:"CALAMAR"},{code_dpto:"13",code:"13160",name:"CANTAGALLO"},{code_dpto:"13",code:"13188",name:"CICUCO"},{code_dpto:"13",code:"13212",name:"CÓRDOBA"},{code_dpto:"13",code:"13222",name:"CLEMENCIA"},{code_dpto:"13",code:"13244",name:"EL CARMEN DE BOLÍVAR"},{code_dpto:"13",code:"13248",name:"EL GUAMO"},{code_dpto:"13",code:"13268",name:"EL PEÑÓN"},{code_dpto:"13",code:"13300",name:"HATILLO DE LOBA"},{code_dpto:"13",code:"13430",name:"MAGANGUÉ"},{code_dpto:"13",code:"13433",name:"MAHATES"},{code_dpto:"13",code:"13440",name:"MARGARITA"},{code_dpto:"13",code:"13442",name:"MARÍA LA BAJA"},{code_dpto:"13",code:"13458",name:"MONTECRISTO"},{code_dpto:"13",code:"13468",name:"MOMPÓS"},{code_dpto:"13",code:"13473",name:"MORALES"},{code_dpto:"13",code:"13549",name:"PINILLOS"},{code_dpto:"13",code:"13580",name:"REGIDOR"},{code_dpto:"13",code:"13600",name:"RÍO VIEJO"},{code_dpto:"13",code:"13620",name:"SAN CRISTÓBAL"},{code_dpto:"13",code:"13647",name:"SAN ESTANISLAO"},{code_dpto:"13",code:"13650",name:"SAN FERNANDO"},{code_dpto:"13",code:"13654",name:"SAN JACINTO"},{code_dpto:"13",code:"13655",name:"SAN JACINTO DEL CAUCA"},{code_dpto:"13",code:"13657",name:"SAN JUAN NEPOMUCENO"},{code_dpto:"13",code:"13667",name:"SAN MARTÍN DE LOBA"},{code_dpto:"13",code:"13670",name:"SAN PABLO"},{code_dpto:"13",code:"13673",name:"SANTA CATALINA"},{code_dpto:"13",code:"13683",name:"SANTA ROSA"},{code_dpto:"13",code:"13688",name:"SANTA ROSA DEL SUR"},{code_dpto:"13",code:"13744",name:"SIMITÍ"},{code_dpto:"13",code:"13760",name:"SOPLAVIENTO"},{code_dpto:"13",code:"13780",name:"TALAIGUA NUEVO"},{code_dpto:"13",code:"13810",name:"TIQUISIO"},{code_dpto:"13",code:"13836",name:"TURBACO"},{code_dpto:"13",code:"13838",name:"TURBANÁ"},{code_dpto:"13",code:"13873",name:"VILLANUEVA"},{code_dpto:"13",code:"13894",name:"ZAMBRANO"},{code_dpto:"15",code:"15001",name:"TUNJA"},{code_dpto:"15",code:"15022",name:"ALMEIDA"},{code_dpto:"15",code:"15047",name:"AQUITANIA"},{code_dpto:"15",code:"15051",name:"ARCABUCO"},{code_dpto:"15",code:"15087",name:"BELÉN"},{code_dpto:"15",code:"15090",name:"BERBEO"},{code_dpto:"15",code:"15092",name:"BETÉITIVA"},{code_dpto:"15",code:"15097",name:"BOAVITA"},{code_dpto:"15",code:"15104",name:"BOYACÁ"},{code_dpto:"15",code:"15106",name:"BRICEÑO"},{code_dpto:"15",code:"15109",name:"BUENAVISTA"},{code_dpto:"15",code:"15114",name:"BUSBANZÁ"},{code_dpto:"15",code:"15131",name:"CALDAS"},{code_dpto:"15",code:"15135",name:"CAMPOHERMOSO"},{code_dpto:"15",code:"15162",name:"CERINZA"},{code_dpto:"15",code:"15172",name:"CHINAVITA"},{code_dpto:"15",code:"15176",name:"CHIQUINQUIRÁ"},{code_dpto:"15",code:"15180",name:"CHISCAS"},{code_dpto:"15",code:"15183",name:"CHITA"},{code_dpto:"15",code:"15185",name:"CHITARAQUE"},{code_dpto:"15",code:"15187",name:"CHIVATÁ"},{code_dpto:"15",code:"15189",name:"CIÉNEGA"},{code_dpto:"15",code:"15204",name:"CÓMBITA"},{code_dpto:"15",code:"15212",name:"COPER"},{code_dpto:"15",code:"15215",name:"CORRALES"},{code_dpto:"15",code:"15218",name:"COVARACHÍA"},{code_dpto:"15",code:"15223",name:"CUBARÁ"},{code_dpto:"15",code:"15224",name:"CUCAITA"},{code_dpto:"15",code:"15226",name:"CUÍTIVA"},{code_dpto:"15",code:"15232",name:"CHÍQUIZA"},{code_dpto:"15",code:"15236",name:"CHIVOR"},{code_dpto:"15",code:"15238",name:"DUITAMA"},{code_dpto:"15",code:"15244",name:"EL COCUY"},{code_dpto:"15",code:"15248",name:"EL ESPINO"},{code_dpto:"15",code:"15272",name:"FIRAVITOBA"},{code_dpto:"15",code:"15276",name:"FLORESTA"},{code_dpto:"15",code:"15293",name:"GACHANTIVÁ"},{code_dpto:"15",code:"15296",name:"GAMEZA"},{code_dpto:"15",code:"15299",name:"GARAGOA"},{code_dpto:"15",code:"15317",name:"GUACAMAYAS"},{code_dpto:"15",code:"15322",name:"GUATEQUE"},{code_dpto:"15",code:"15325",name:"GUAYATÁ"},{code_dpto:"15",code:"15332",name:"GÜICÁN"},{code_dpto:"15",code:"15362",name:"IZA"},{code_dpto:"15",code:"15367",name:"JENESANO"},{code_dpto:"15",code:"15368",name:"JERICÓ"},{code_dpto:"15",code:"15377",name:"LABRANZAGRANDE"},{code_dpto:"15",code:"15380",name:"LA CAPILLA"},{code_dpto:"15",code:"15401",name:"LA VICTORIA"},{code_dpto:"15",code:"15403",name:"LA UVITA"},{code_dpto:"15",code:"15407",name:"VILLA DE LEYVA"},{code_dpto:"15",code:"15425",name:"MACANAL"},{code_dpto:"15",code:"15442",name:"MARIPÍ"},{code_dpto:"15",code:"15455",name:"MIRAFLORES"},{code_dpto:"15",code:"15464",name:"MONGUA"},{code_dpto:"15",code:"15466",name:"MONGUÍ"},{code_dpto:"15",code:"15469",name:"MONIQUIRÁ"},{code_dpto:"15",code:"15476",name:"MOTAVITA"},{code_dpto:"15",code:"15480",name:"MUZO"},{code_dpto:"15",code:"15491",name:"NOBSA"},{code_dpto:"15",code:"15494",name:"NUEVO COLÓN"},{code_dpto:"15",code:"15500",name:"OICATÁ"},{code_dpto:"15",code:"15507",name:"OTANCHE"},{code_dpto:"15",code:"15511",name:"PACHAVITA"},{code_dpto:"15",code:"15514",name:"PÁEZ"},{code_dpto:"15",code:"15516",name:"PAIPA"},{code_dpto:"15",code:"15518",name:"PAJARITO"},{code_dpto:"15",code:"15522",name:"PANQUEBA"},{code_dpto:"15",code:"15531",name:"PAUNA"},{code_dpto:"15",code:"15533",name:"PAYA"},{code_dpto:"15",code:"15537",name:"PAZ DE RÍO"},{code_dpto:"15",code:"15542",name:"PESCA"},{code_dpto:"15",code:"15550",name:"PISBA"},{code_dpto:"15",code:"15572",name:"PUERTO BOYACÁ"},{code_dpto:"15",code:"15580",name:"QUÍPAMA"},{code_dpto:"15",code:"15599",name:"RAMIRIQUÍ"},{code_dpto:"15",code:"15600",name:"RÁQUIRA"},{code_dpto:"15",code:"15621",name:"RONDÓN"},{code_dpto:"15",code:"15632",name:"SABOYÁ"},{code_dpto:"15",code:"15638",name:"SÁCHICA"},{code_dpto:"15",code:"15646",name:"SAMACÁ"},{code_dpto:"15",code:"15660",name:"SAN EDUARDO"},{code_dpto:"15",code:"15664",name:"SAN JOSÉ DE PARE"},{code_dpto:"15",code:"15667",name:"SAN LUIS DE GACENO"},{code_dpto:"15",code:"15673",name:"SAN MATEO"},{code_dpto:"15",code:"15676",name:"SAN MIGUEL DE SEMA"},{code_dpto:"15",code:"15681",name:"SAN PABLO DE BORBUR"},{code_dpto:"15",code:"15686",name:"SANTANA"},{code_dpto:"15",code:"15690",name:"SANTA MARÍA"},{code_dpto:"15",code:"15693",name:"SANTA ROSA DE VITERBO"},{code_dpto:"15",code:"15696",name:"SANTA SOFÍA"},{code_dpto:"15",code:"15720",name:"SATIVANORTE"},{code_dpto:"15",code:"15723",name:"SATIVASUR"},{code_dpto:"15",code:"15740",name:"SIACHOQUE"},{code_dpto:"15",code:"15753",name:"SOATÁ"},{code_dpto:"15",code:"15755",name:"SOCOTÁ"},{code_dpto:"15",code:"15757",name:"SOCHA"},{code_dpto:"15",code:"15759",name:"SOGAMOSO"},{code_dpto:"15",code:"15761",name:"SOMONDOCO"},{code_dpto:"15",code:"15762",name:"SORA"},{code_dpto:"15",code:"15763",name:"SOTAQUIRÁ"},{code_dpto:"15",code:"15764",name:"SORACÁ"},{code_dpto:"15",code:"15774",name:"SUSACÓN"},{code_dpto:"15",code:"15776",name:"SUTAMARCHÁN"},{code_dpto:"15",code:"15778",name:"SUTATENZA"},{code_dpto:"15",code:"15790",name:"TASCO"},{code_dpto:"15",code:"15798",name:"TENZA"},{code_dpto:"15",code:"15804",name:"TIBANÁ"},{code_dpto:"15",code:"15806",name:"TIBASOSA"},{code_dpto:"15",code:"15808",name:"TINJACÁ"},{code_dpto:"15",code:"15810",name:"TIPACOQUE"},{code_dpto:"15",code:"15814",name:"TOCA"},{code_dpto:"15",code:"15816",name:"TOGÜÍ"},{code_dpto:"15",code:"15820",name:"TÓPAGA"},{code_dpto:"15",code:"15822",name:"TOTA"},{code_dpto:"15",code:"15832",name:"TUNUNGUÁ"},{code_dpto:"15",code:"15835",name:"TURMEQUÉ"},{code_dpto:"15",code:"15837",name:"TUTA"},{code_dpto:"15",code:"15839",name:"TUTAZÁ"},{code_dpto:"15",code:"15842",name:"UMBITA"},{code_dpto:"15",code:"15861",name:"VENTAQUEMADA"},{code_dpto:"15",code:"15879",name:"VIRACACHÁ"},{code_dpto:"15",code:"15897",name:"ZETAQUIRA"},{code_dpto:"17",code:"17001",name:"MANIZALES"},{code_dpto:"17",code:"17013",name:"AGUADAS"},{code_dpto:"17",code:"17042",name:"ANSERMA"},{code_dpto:"17",code:"17050",name:"ARANZAZU"},{code_dpto:"17",code:"17088",name:"BELALCÁZAR"},{code_dpto:"17",code:"17174",name:"CHINCHINÁ"},{code_dpto:"17",code:"17272",name:"FILADELFIA"},{code_dpto:"17",code:"17380",name:"LA DORADA"},{code_dpto:"17",code:"17388",name:"LA MERCED"},{code_dpto:"17",code:"17433",name:"MANZANARES"},{code_dpto:"17",code:"17442",name:"MARMATO"},{code_dpto:"17",code:"17444",name:"MARQUETALIA"},{code_dpto:"17",code:"17446",name:"MARULANDA"},{code_dpto:"17",code:"17486",name:"NEIRA"},{code_dpto:"17",code:"17495",name:"NORCASIA"},{code_dpto:"17",code:"17513",name:"PÁCORA"},{code_dpto:"17",code:"17524",name:"PALESTINA"},{code_dpto:"17",code:"17541",name:"PENSILVANIA"},{code_dpto:"17",code:"17614",name:"RIOSUCIO"},{code_dpto:"17",code:"17616",name:"RISARALDA"},{code_dpto:"17",code:"17653",name:"SALAMINA"},{code_dpto:"17",code:"17662",name:"SAMANÁ"},{code_dpto:"17",code:"17665",name:"SAN JOSÉ"},{code_dpto:"17",code:"17777",name:"SUPÍA"},{code_dpto:"17",code:"17867",name:"VICTORIA"},{code_dpto:"17",code:"17873",name:"VILLAMARÍA"},{code_dpto:"17",code:"17877",name:"VITERBO"},{code_dpto:"18",code:"18001",name:"FLORENCIA"},{code_dpto:"18",code:"18029",name:"ALBANIA"},{code_dpto:"18",code:"18094",name:"BELÉN DE LOS ANDAQUIES"},{code_dpto:"18",code:"18150",name:"CARTAGENA DEL CHAIRÁ"},{code_dpto:"18",code:"18205",name:"CURILLO"},{code_dpto:"18",code:"18247",name:"EL DONCELLO"},{code_dpto:"18",code:"18256",name:"EL PAUJIL"},{code_dpto:"18",code:"18410",name:"LA MONTAÑITA"},{code_dpto:"18",code:"18460",name:"MILÁN"},{code_dpto:"18",code:"18479",name:"MORELIA"},{code_dpto:"18",code:"18592",name:"PUERTO RICO"},{code_dpto:"18",code:"18610",name:"SAN JOSÉ DEL FRAGUA"},{code_dpto:"18",code:"18753",name:"SAN VICENTE DEL CAGUÁN"},{code_dpto:"18",code:"18756",name:"SOLANO"},{code_dpto:"18",code:"18785",name:"SOLITA"},{code_dpto:"18",code:"18860",name:"VALPARAÍSO"},{code_dpto:"19",code:"19001",name:"POPAYÁN"},{code_dpto:"19",code:"19022",name:"ALMAGUER"},{code_dpto:"19",code:"19050",name:"ARGELIA"},{code_dpto:"19",code:"19075",name:"BALBOA"},{code_dpto:"19",code:"19100",name:"BOLÍVAR"},{code_dpto:"19",code:"19110",name:"BUENOS AIRES"},{code_dpto:"19",code:"19130",name:"CAJIBÍO"},{code_dpto:"19",code:"19137",name:"CALDONO"},{code_dpto:"19",code:"19142",name:"CALOTO"},{code_dpto:"19",code:"19212",name:"CORINTO"},{code_dpto:"19",code:"19256",name:"EL TAMBO"},{code_dpto:"19",code:"19290",name:"FLORENCIA"},{code_dpto:"19",code:"19318",name:"GUAPI"},{code_dpto:"19",code:"19355",name:"INZÁ"},{code_dpto:"19",code:"19364",name:"JAMBALÓ"},{code_dpto:"19",code:"19392",name:"LA SIERRA"},{code_dpto:"19",code:"19397",name:"LA VEGA"},{code_dpto:"19",code:"19418",name:"LÓPEZ"},{code_dpto:"19",code:"19450",name:"MERCADERES"},{code_dpto:"19",code:"19455",name:"MIRANDA"},{code_dpto:"19",code:"19473",name:"MORALES"},{code_dpto:"19",code:"19513",name:"PADILLA"},{code_dpto:"19",code:"19517",name:"PAEZ"},{code_dpto:"19",code:"19532",name:"PATÍA"},{code_dpto:"19",code:"19533",name:"PIAMONTE"},{code_dpto:"19",code:"19548",name:"PIENDAMÓ"},{code_dpto:"19",code:"19573",name:"PUERTO TEJADA"},{code_dpto:"19",code:"19585",name:"PURACÉ"},{code_dpto:"19",code:"19622",name:"ROSAS"},{code_dpto:"19",code:"19693",name:"SAN SEBASTIÁN"},{code_dpto:"19",code:"19698",name:"SANTANDER DE QUILICHAO"},{code_dpto:"19",code:"19701",name:"SANTA ROSA"},{code_dpto:"19",code:"19743",name:"SILVIA"},{code_dpto:"19",code:"19760",name:"SOTARA"},{code_dpto:"19",code:"19780",name:"SUÁREZ"},{code_dpto:"19",code:"19785",name:"SUCRE"},{code_dpto:"19",code:"19807",name:"TIMBÍO"},{code_dpto:"19",code:"19809",name:"TIMBIQUÍ"},{code_dpto:"19",code:"19821",name:"TORIBIO"},{code_dpto:"19",code:"19824",name:"TOTORÓ"},{code_dpto:"19",code:"19845",name:"VILLA RICA"},{code_dpto:"20",code:"20001",name:"VALLEDUPAR"},{code_dpto:"20",code:"20011",name:"AGUACHICA"},{code_dpto:"20",code:"20013",name:"AGUSTÍN CODAZZI"},{code_dpto:"20",code:"20032",name:"ASTREA"},{code_dpto:"20",code:"20045",name:"BECERRIL"},{code_dpto:"20",code:"20060",name:"BOSCONIA"},{code_dpto:"20",code:"20175",name:"CHIMICHAGUA"},{code_dpto:"20",code:"20178",name:"CHIRIGUANÁ"},{code_dpto:"20",code:"20228",name:"CURUMANÍ"},{code_dpto:"20",code:"20238",name:"EL COPEY"},{code_dpto:"20",code:"20250",name:"EL PASO"},{code_dpto:"20",code:"20295",name:"GAMARRA"},{code_dpto:"20",code:"20310",name:"GONZÁLEZ"},{code_dpto:"20",code:"20383",name:"LA GLORIA"},{code_dpto:"20",code:"20400",name:"LA JAGUA DE IBIRICO"},{code_dpto:"20",code:"20443",name:"MANAURE"},{code_dpto:"20",code:"20517",name:"PAILITAS"},{code_dpto:"20",code:"20550",name:"PELAYA"},{code_dpto:"20",code:"20570",name:"PUEBLO BELLO"},{code_dpto:"20",code:"20614",name:"RÍO DE ORO"},{code_dpto:"20",code:"20621",name:"LA PAZ"},{code_dpto:"20",code:"20710",name:"SAN ALBERTO"},{code_dpto:"20",code:"20750",name:"SAN DIEGO"},{code_dpto:"20",code:"20770",name:"SAN MARTÍN"},{code_dpto:"20",code:"20787",name:"TAMALAMEQUE"},{code_dpto:"23",code:"23001",name:"MONTERÍA"},{code_dpto:"23",code:"23068",name:"AYAPEL"},{code_dpto:"23",code:"23079",name:"BUENAVISTA"},{code_dpto:"23",code:"23090",name:"CANALETE"},{code_dpto:"23",code:"23162",name:"CERETÉ"},{code_dpto:"23",code:"23168",name:"CHIMÁ"},{code_dpto:"23",code:"23182",name:"CHINÚ"},{code_dpto:"23",code:"23189",name:"CIÉNAGA DE ORO"},{code_dpto:"23",code:"23300",name:"COTORRA"},{code_dpto:"23",code:"23350",name:"LA APARTADA"},{code_dpto:"23",code:"23417",name:"LORICA"},{code_dpto:"23",code:"23419",name:"LOS CÓRDOBAS"},{code_dpto:"23",code:"23464",name:"MOMIL"},{code_dpto:"23",code:"23466",name:"MONTELÍBANO"},{code_dpto:"23",code:"23500",name:"MOÑITOS"},{code_dpto:"23",code:"23555",name:"PLANETA RICA"},{code_dpto:"23",code:"23570",name:"PUEBLO NUEVO"},{code_dpto:"23",code:"23574",name:"PUERTO ESCONDIDO"},{code_dpto:"23",code:"23580",name:"PUERTO LIBERTADOR"},{code_dpto:"23",code:"23586",name:"PURÍSIMA"},{code_dpto:"23",code:"23660",name:"SAHAGÚN"},{code_dpto:"23",code:"23670",name:"SAN ANDRÉS SOTAVENTO"},{code_dpto:"23",code:"23672",name:"SAN ANTERO"},{code_dpto:"23",code:"23675",name:"SAN BERNARDO DEL VIENTO"},{code_dpto:"23",code:"23678",name:"SAN CARLOS"},{code_dpto:"23",code:"23686",name:"SAN PELAYO"},{code_dpto:"23",code:"23807",name:"TIERRALTA"},{code_dpto:"23",code:"23855",name:"VALENCIA"},{code_dpto:"25",code:"25001",name:"AGUA DE DIOS"},{code_dpto:"25",code:"25019",name:"ALBÁN"},{code_dpto:"25",code:"25035",name:"ANAPOIMA"},{code_dpto:"25",code:"25040",name:"ANOLAIMA"},{code_dpto:"25",code:"25053",name:"ARBELÁEZ"},{code_dpto:"25",code:"25086",name:"BELTRÁN"},{code_dpto:"25",code:"25095",name:"BITUIMA"},{code_dpto:"25",code:"25099",name:"BOJACÁ"},{code_dpto:"25",code:"25120",name:"CABRERA"},{code_dpto:"25",code:"25123",name:"CACHIPAY"},{code_dpto:"25",code:"25126",name:"CAJICÁ"},{code_dpto:"25",code:"25148",name:"CAPARRAPÍ"},{code_dpto:"25",code:"25151",name:"CAQUEZA"},{code_dpto:"25",code:"25154",name:"CARMEN DE CARUPA"},{code_dpto:"25",code:"25168",name:"CHAGUANÍ"},{code_dpto:"25",code:"25175",name:"CHÍA"},{code_dpto:"25",code:"25178",name:"CHIPAQUE"},{code_dpto:"25",code:"25181",name:"CHOACHÍ"},{code_dpto:"25",code:"25183",name:"CHOCONTÁ"},{code_dpto:"25",code:"25200",name:"COGUA"},{code_dpto:"25",code:"25214",name:"COTA"},{code_dpto:"25",code:"25224",name:"CUCUNUBÁ"},{code_dpto:"25",code:"25245",name:"EL COLEGIO"},{code_dpto:"25",code:"25258",name:"EL PEÑÓN"},{code_dpto:"25",code:"25260",name:"EL ROSAL"},{code_dpto:"25",code:"25269",name:"FACATATIVÁ"},{code_dpto:"25",code:"25279",name:"FOMEQUE"},{code_dpto:"25",code:"25281",name:"FOSCA"},{code_dpto:"25",code:"25286",name:"FUNZA"},{code_dpto:"25",code:"25288",name:"FÚQUENE"},{code_dpto:"25",code:"25290",name:"FUSAGASUGÁ"},{code_dpto:"25",code:"25293",name:"GACHALA"},{code_dpto:"25",code:"25295",name:"GACHANCIPÁ"},{code_dpto:"25",code:"25297",name:"GACHETÁ"},{code_dpto:"25",code:"25299",name:"GAMA"},{code_dpto:"25",code:"25307",name:"GIRARDOT"},{code_dpto:"25",code:"25312",name:"GRANADA"},{code_dpto:"25",code:"25317",name:"GUACHETÁ"},{code_dpto:"25",code:"25320",name:"GUADUAS"},{code_dpto:"25",code:"25322",name:"GUASCA"},{code_dpto:"25",code:"25324",name:"GUATAQUÍ"},{code_dpto:"25",code:"25326",name:"GUATAVITA"},{code_dpto:"25",code:"25328",name:"GUAYABAL DE SIQUIMA"},{code_dpto:"25",code:"25335",name:"GUAYABETAL"},{code_dpto:"25",code:"25339",name:"GUTIÉRREZ"},{code_dpto:"25",code:"25368",name:"JERUSALÉN"},{code_dpto:"25",code:"25372",name:"JUNÍN"},{code_dpto:"25",code:"25377",name:"LA CALERA"},{code_dpto:"25",code:"25386",name:"LA MESA"},{code_dpto:"25",code:"25394",name:"LA PALMA"},{code_dpto:"25",code:"25398",name:"LA PEÑA"},{code_dpto:"25",code:"25402",name:"LA VEGA"},{code_dpto:"25",code:"25407",name:"LENGUAZAQUE"},{code_dpto:"25",code:"25426",name:"MACHETA"},{code_dpto:"25",code:"25430",name:"MADRID"},{code_dpto:"25",code:"25436",name:"MANTA"},{code_dpto:"25",code:"25438",name:"MEDINA"},{code_dpto:"25",code:"25473",name:"MOSQUERA"},{code_dpto:"25",code:"25483",name:"NARIÑO"},{code_dpto:"25",code:"25486",name:"NEMOCÓN"},{code_dpto:"25",code:"25488",name:"NILO"},{code_dpto:"25",code:"25489",name:"NIMAIMA"},{code_dpto:"25",code:"25491",name:"NOCAIMA"},{code_dpto:"25",code:"25506",name:"VENECIA"},{code_dpto:"25",code:"25513",name:"PACHO"},{code_dpto:"25",code:"25518",name:"PAIME"},{code_dpto:"25",code:"25524",name:"PANDI"},{code_dpto:"25",code:"25530",name:"PARATEBUENO"},{code_dpto:"25",code:"25535",name:"PASCA"},{code_dpto:"25",code:"25572",name:"PUERTO SALGAR"},{code_dpto:"25",code:"25580",name:"PULÍ"},{code_dpto:"25",code:"25592",name:"QUEBRADANEGRA"},{code_dpto:"25",code:"25594",name:"QUETAME"},{code_dpto:"25",code:"25596",name:"QUIPILE"},{code_dpto:"25",code:"25599",name:"APULO"},{code_dpto:"25",code:"25612",name:"RICAURTE"},{code_dpto:"25",code:"25645",name:"SAN ANTONIO DEL TEQUENDAMA"},{code_dpto:"25",code:"25649",name:"SAN BERNARDO"},{code_dpto:"25",code:"25653",name:"SAN CAYETANO"},{code_dpto:"25",code:"25658",name:"SAN FRANCISCO"},{code_dpto:"25",code:"25662",name:"SAN JUAN DE RÍO SECO"},{code_dpto:"25",code:"25718",name:"SASAIMA"},{code_dpto:"25",code:"25736",name:"SESQUILÉ"},{code_dpto:"25",code:"25740",name:"SIBATÉ"},{code_dpto:"25",code:"25743",name:"SILVANIA"},{code_dpto:"25",code:"25745",name:"SIMIJACA"},{code_dpto:"25",code:"25754",name:"SOACHA"},{code_dpto:"25",code:"25758",name:"SOPÓ"},{code_dpto:"25",code:"25769",name:"SUBACHOQUE"},{code_dpto:"25",code:"25772",name:"SUESCA"},{code_dpto:"25",code:"25777",name:"SUPATÁ"},{code_dpto:"25",code:"25779",name:"SUSA"},{code_dpto:"25",code:"25781",name:"SUTATAUSA"},{code_dpto:"25",code:"25785",name:"TABIO"},{code_dpto:"25",code:"25793",name:"TAUSA"},{code_dpto:"25",code:"25797",name:"TENA"},{code_dpto:"25",code:"25799",name:"TENJO"},{code_dpto:"25",code:"25805",name:"TIBACUY"},{code_dpto:"25",code:"25807",name:"TIBIRITA"},{code_dpto:"25",code:"25815",name:"TOCAIMA"},{code_dpto:"25",code:"25817",name:"TOCANCIPÁ"},{code_dpto:"25",code:"25823",name:"TOPAIPÍ"},{code_dpto:"25",code:"25839",name:"UBALÁ"},{code_dpto:"25",code:"25841",name:"UBAQUE"},{code_dpto:"25",code:"25843",name:"VILLA DE SAN DIEGO DE UBATE"},{code_dpto:"25",code:"25845",name:"UNE"},{code_dpto:"25",code:"25851",name:"ÚTICA"},{code_dpto:"25",code:"25862",name:"VERGARA"},{code_dpto:"25",code:"25867",name:"VIANÍ"},{code_dpto:"25",code:"25871",name:"VILLAGÓMEZ"},{code_dpto:"25",code:"25873",name:"VILLAPINZÓN"},{code_dpto:"25",code:"25875",name:"VILLETA"},{code_dpto:"25",code:"25878",name:"VIOTÁ"},{code_dpto:"25",code:"25885",name:"YACOPÍ"},{code_dpto:"25",code:"25898",name:"ZIPACÓN"},{code_dpto:"25",code:"25899",name:"ZIPAQUIRÁ"},{code_dpto:"27",code:"27001",name:"QUIBDÓ"},{code_dpto:"27",code:"27006",name:"ACANDÍ"},{code_dpto:"27",code:"27025",name:"ALTO BAUDO"},{code_dpto:"27",code:"27050",name:"ATRATO"},{code_dpto:"27",code:"27073",name:"BAGADÓ"},{code_dpto:"27",code:"27075",name:"BAHÍA SOLANO"},{code_dpto:"27",code:"27077",name:"BAJO BAUDÓ"},{code_dpto:"27",code:"27086",name:"BELÉN DE BAJIRÁ"},{code_dpto:"27",code:"27099",name:"BOJAYA"},{code_dpto:"27",code:"27135",name:"EL CANTÓN DEL SAN PABLO"},{code_dpto:"27",code:"27150",name:"CARMEN DEL DARIEN"},{code_dpto:"27",code:"27160",name:"CÉRTEGUI"},{code_dpto:"27",code:"27205",name:"CONDOTO"},{code_dpto:"27",code:"27245",name:"EL CARMEN DE ATRATO"},{code_dpto:"27",code:"27250",name:"EL LITORAL DEL SAN JUAN"},{code_dpto:"27",code:"27361",name:"ISTMINA"},{code_dpto:"27",code:"27372",name:"JURADÓ"},{code_dpto:"27",code:"27413",name:"LLORÓ"},{code_dpto:"27",code:"27425",name:"MEDIO ATRATO"},{code_dpto:"27",code:"27430",name:"MEDIO BAUDÓ"},{code_dpto:"27",code:"27450",name:"MEDIO SAN JUAN"},{code_dpto:"27",code:"27491",name:"NÓVITA"},{code_dpto:"27",code:"27495",name:"NUQUÍ"},{code_dpto:"27",code:"27580",name:"RÍO IRO"},{code_dpto:"27",code:"27600",name:"RÍO QUITO"},{code_dpto:"27",code:"27615",name:"RIOSUCIO"},{code_dpto:"27",code:"27660",name:"SAN JOSÉ DEL PALMAR"},{code_dpto:"27",code:"27745",name:"SIPÍ"},{code_dpto:"27",code:"27787",name:"TADÓ"},{code_dpto:"27",code:"27800",name:"UNGUÍA"},{code_dpto:"27",code:"27810",name:"UNIÓN PANAMERICANA"},{code_dpto:"41",code:"41001",name:"NEIVA"},{code_dpto:"41",code:"41006",name:"ACEVEDO"},{code_dpto:"41",code:"41013",name:"AGRADO"},{code_dpto:"41",code:"41016",name:"AIPE"},{code_dpto:"41",code:"41020",name:"ALGECIRAS"},{code_dpto:"41",code:"41026",name:"ALTAMIRA"
},{code_dpto:"41",code:"41078",name:"BARAYA"},{code_dpto:"41",code:"41132",name:"CAMPOALEGRE"},{code_dpto:"41",code:"41206",name:"COLOMBIA"},{code_dpto:"41",code:"41244",name:"ELÍAS"},{code_dpto:"41",code:"41298",name:"GARZÓN"},{code_dpto:"41",code:"41306",name:"GIGANTE"},{code_dpto:"41",code:"41319",name:"GUADALUPE"},{code_dpto:"41",code:"41349",name:"HOBO"},{code_dpto:"41",code:"41357",name:"IQUIRA"},{code_dpto:"41",code:"41359",name:"ISNOS"},{code_dpto:"41",code:"41378",name:"LA ARGENTINA"},{code_dpto:"41",code:"41396",name:"LA PLATA"},{code_dpto:"41",code:"41483",name:"NÁTAGA"},{code_dpto:"41",code:"41503",name:"OPORAPA"},{code_dpto:"41",code:"41518",name:"PAICOL"},{code_dpto:"41",code:"41524",name:"PALERMO"},{code_dpto:"41",code:"41530",name:"PALESTINA"},{code_dpto:"41",code:"41548",name:"PITAL"},{code_dpto:"41",code:"41551",name:"PITALITO"},{code_dpto:"41",code:"41615",name:"RIVERA"},{code_dpto:"41",code:"41660",name:"SALADOBLANCO"},{code_dpto:"41",code:"41668",name:"SAN AGUSTÍN"},{code_dpto:"41",code:"41676",name:"SANTA MARÍA"},{code_dpto:"41",code:"41770",name:"SUAZA"},{code_dpto:"41",code:"41791",name:"TARQUI"},{code_dpto:"41",code:"41797",name:"TESALIA"},{code_dpto:"41",code:"41799",name:"TELLO"},{code_dpto:"41",code:"41801",name:"TERUEL"},{code_dpto:"41",code:"41807",name:"TIMANÁ"},{code_dpto:"41",code:"41872",name:"VILLAVIEJA"},{code_dpto:"41",code:"41885",name:"YAGUARÁ"},{code_dpto:"44",code:"44001",name:"RIOHACHA"},{code_dpto:"44",code:"44035",name:"ALBANIA"},{code_dpto:"44",code:"44078",name:"BARRANCAS"},{code_dpto:"44",code:"44090",name:"DIBULLA"},{code_dpto:"44",code:"44098",name:"DISTRACCIÓN"},{code_dpto:"44",code:"44110",name:"EL MOLINO"},{code_dpto:"44",code:"44279",name:"FONSECA"},{code_dpto:"44",code:"44378",name:"HATONUEVO"},{code_dpto:"44",code:"44420",name:"LA JAGUA DEL PILAR"},{code_dpto:"44",code:"44430",name:"MAICAO"},{code_dpto:"44",code:"44560",name:"MANAURE"},{code_dpto:"44",code:"44650",name:"SAN JUAN DEL CESAR"},{code_dpto:"44",code:"44847",name:"URIBIA"},{code_dpto:"44",code:"44855",name:"URUMITA"},{code_dpto:"44",code:"44874",name:"VILLANUEVA"},{code_dpto:"47",code:"47001",name:"SANTA MARTA"},{code_dpto:"47",code:"47030",name:"ALGARROBO"},{code_dpto:"47",code:"47053",name:"ARACATACA"},{code_dpto:"47",code:"47058",name:"ARIGUANÍ"},{code_dpto:"47",code:"47161",name:"CERRO SAN ANTONIO"},{code_dpto:"47",code:"47170",name:"CHIBOLO"},{code_dpto:"47",code:"47189",name:"CIÉNAGA"},{code_dpto:"47",code:"47205",name:"CONCORDIA"},{code_dpto:"47",code:"47245",name:"EL BANCO"},{code_dpto:"47",code:"47258",name:"EL PIÑON"},{code_dpto:"47",code:"47268",name:"EL RETÉN"},{code_dpto:"47",code:"47288",name:"FUNDACIÓN"},{code_dpto:"47",code:"47318",name:"GUAMAL"},{code_dpto:"47",code:"47460",name:"NUEVA GRANADA"},{code_dpto:"47",code:"47541",name:"PEDRAZA"},{code_dpto:"47",code:"47545",name:"PIJIÑO DEL CARMEN"},{code_dpto:"47",code:"47551",name:"PIVIJAY"},{code_dpto:"47",code:"47555",name:"PLATO"},{code_dpto:"47",code:"47570",name:"PUEBLOVIEJO"},{code_dpto:"47",code:"47605",name:"REMOLINO"},{code_dpto:"47",code:"47660",name:"SABANAS DE SAN ANGEL"},{code_dpto:"47",code:"47675",name:"SALAMINA"},{code_dpto:"47",code:"47692",name:"SAN SEBASTIÁN DE BUENAVISTA"},{code_dpto:"47",code:"47703",name:"SAN ZENÓN"},{code_dpto:"47",code:"47707",name:"SANTA ANA"},{code_dpto:"47",code:"47720",name:"SANTA BÁRBARA DE PINTO"},{code_dpto:"47",code:"47745",name:"SITIONUEVO"},{code_dpto:"47",code:"47798",name:"TENERIFE"},{code_dpto:"47",code:"47960",name:"ZAPAYÁN"},{code_dpto:"47",code:"47980",name:"ZONA BANANERA"},{code_dpto:"50",code:"50001",name:"VILLAVICENCIO"},{code_dpto:"50",code:"50006",name:"ACACÍAS"},{code_dpto:"50",code:"50110",name:"BARRANCA DE UPÍA"},{code_dpto:"50",code:"50124",name:"CABUYARO"},{code_dpto:"50",code:"50150",name:"CASTILLA LA NUEVA"},{code_dpto:"50",code:"50223",name:"CUBARRAL"},{code_dpto:"50",code:"50226",name:"CUMARAL"},{code_dpto:"50",code:"50245",name:"EL CALVARIO"},{code_dpto:"50",code:"50251",name:"EL CASTILLO"},{code_dpto:"50",code:"50270",name:"EL DORADO"},{code_dpto:"50",code:"50287",name:"FUENTE DE ORO"},{code_dpto:"50",code:"50313",name:"GRANADA"},{code_dpto:"50",code:"50318",name:"GUAMAL"},{code_dpto:"50",code:"50325",name:"MAPIRIPÁN"},{code_dpto:"50",code:"50330",name:"MESETAS"},{code_dpto:"50",code:"50350",name:"LA MACARENA"},{code_dpto:"50",code:"50370",name:"URIBE"},{code_dpto:"50",code:"50400",name:"LEJANÍAS"},{code_dpto:"50",code:"50450",name:"PUERTO CONCORDIA"},{code_dpto:"50",code:"50568",name:"PUERTO GAITÁN"},{code_dpto:"50",code:"50573",name:"PUERTO LÓPEZ"},{code_dpto:"50",code:"50577",name:"PUERTO LLERAS"},{code_dpto:"50",code:"50590",name:"PUERTO RICO"},{code_dpto:"50",code:"50606",name:"RESTREPO"},{code_dpto:"50",code:"50680",name:"SAN CARLOS DE GUAROA"},{code_dpto:"50",code:"50683",name:"SAN JUAN DE ARAMA"},{code_dpto:"50",code:"50686",name:"SAN JUANITO"},{code_dpto:"50",code:"50689",name:"SAN MARTÍN"},{code_dpto:"50",code:"50711",name:"VISTAHERMOSA"},{code_dpto:"52",code:"52001",name:"PASTO"},{code_dpto:"52",code:"52019",name:"ALBÁN"},{code_dpto:"52",code:"52022",name:"ALDANA"},{code_dpto:"52",code:"52036",name:"ANCUYÁ"},{code_dpto:"52",code:"52051",name:"ARBOLEDA"},{code_dpto:"52",code:"52079",name:"BARBACOAS"},{code_dpto:"52",code:"52083",name:"BELÉN"},{code_dpto:"52",code:"52110",name:"BUESACO"},{code_dpto:"52",code:"52203",name:"COLÓN"},{code_dpto:"52",code:"52207",name:"CONSACA"},{code_dpto:"52",code:"52210",name:"CONTADERO"},{code_dpto:"52",code:"52215",name:"CÓRDOBA"},{code_dpto:"52",code:"52224",name:"CUASPUD"},{code_dpto:"52",code:"52227",name:"CUMBAL"},{code_dpto:"52",code:"52233",name:"CUMBITARA"},{code_dpto:"52",code:"52240",name:"CHACHAGÜÍ"},{code_dpto:"52",code:"52250",name:"EL CHARCO"},{code_dpto:"52",code:"52254",name:"EL PEÑOL"},{code_dpto:"52",code:"52256",name:"EL ROSARIO"},{code_dpto:"52",code:"52258",name:"EL TABLÓN DE GÓMEZ"},{code_dpto:"52",code:"52260",name:"EL TAMBO"},{code_dpto:"52",code:"52287",name:"FUNES"},{code_dpto:"52",code:"52317",name:"GUACHUCAL"},{code_dpto:"52",code:"52320",name:"GUAITARILLA"},{code_dpto:"52",code:"52323",name:"GUALMATÁN"},{code_dpto:"52",code:"52352",name:"ILES"},{code_dpto:"52",code:"52354",name:"IMUÉS"},{code_dpto:"52",code:"52356",name:"IPIALES"},{code_dpto:"52",code:"52378",name:"LA CRUZ"},{code_dpto:"52",code:"52381",name:"LA FLORIDA"},{code_dpto:"52",code:"52385",name:"LA LLANADA"},{code_dpto:"52",code:"52390",name:"LA TOLA"},{code_dpto:"52",code:"52399",name:"LA UNIÓN"},{code_dpto:"52",code:"52405",name:"LEIVA"},{code_dpto:"52",code:"52411",name:"LINARES"},{code_dpto:"52",code:"52418",name:"LOS ANDES"},{code_dpto:"52",code:"52427",name:"MAGÜI"},{code_dpto:"52",code:"52435",name:"MALLAMA"},{code_dpto:"52",code:"52473",name:"MOSQUERA"},{code_dpto:"52",code:"52480",name:"NARIÑO"},{code_dpto:"52",code:"52490",name:"OLAYA HERRERA"},{code_dpto:"52",code:"52506",name:"OSPINA"},{code_dpto:"52",code:"52520",name:"FRANCISCO PIZARRO"},{code_dpto:"52",code:"52540",name:"POLICARPA"},{code_dpto:"52",code:"52560",name:"POTOSÍ"},{code_dpto:"52",code:"52565",name:"PROVIDENCIA"},{code_dpto:"52",code:"52573",name:"PUERRES"},{code_dpto:"52",code:"52585",name:"PUPIALES"},{code_dpto:"52",code:"52612",name:"RICAURTE"},{code_dpto:"52",code:"52621",name:"ROBERTO PAYÁN"},{code_dpto:"52",code:"52678",name:"SAMANIEGO"},{code_dpto:"52",code:"52683",name:"SANDONÁ"},{code_dpto:"52",code:"52685",name:"SAN BERNARDO"},{code_dpto:"52",code:"52687",name:"SAN LORENZO"},{code_dpto:"52",code:"52693",name:"SAN PABLO"},{code_dpto:"52",code:"52694",name:"SAN PEDRO DE CARTAGO"},{code_dpto:"52",code:"52696",name:"SANTA BÁRBARA"},{code_dpto:"52",code:"52699",name:"SANTACRUZ"},{code_dpto:"52",code:"52720",name:"SAPUYES"},{code_dpto:"52",code:"52786",name:"TAMINANGO"},{code_dpto:"52",code:"52788",name:"TANGUA"},{code_dpto:"52",code:"52835",name:"TUMACO"},{code_dpto:"52",code:"52838",name:"TÚQUERRES"},{code_dpto:"52",code:"52885",name:"YACUANQUER"},{code_dpto:"54",code:"54001",name:"CÚCUTA"},{code_dpto:"54",code:"54003",name:"ABREGO"},{code_dpto:"54",code:"54051",name:"ARBOLEDAS"},{code_dpto:"54",code:"54099",name:"BOCHALEMA"},{code_dpto:"54",code:"54109",name:"BUCARASICA"},{code_dpto:"54",code:"54125",name:"CÁCOTA"},{code_dpto:"54",code:"54128",name:"CACHIRÁ"},{code_dpto:"54",code:"54172",name:"CHINÁCOTA"},{code_dpto:"54",code:"54174",name:"CHITAGÁ"},{code_dpto:"54",code:"54206",name:"CONVENCIÓN"},{code_dpto:"54",code:"54223",name:"CUCUTILLA"},{code_dpto:"54",code:"54239",name:"DURANIA"},{code_dpto:"54",code:"54245",name:"EL CARMEN"},{code_dpto:"54",code:"54250",name:"EL TARRA"},{code_dpto:"54",code:"54261",name:"EL ZULIA"},{code_dpto:"54",code:"54313",name:"GRAMALOTE"},{code_dpto:"54",code:"54344",name:"HACARÍ"},{code_dpto:"54",code:"54347",name:"HERRÁN"},{code_dpto:"54",code:"54377",name:"LABATECA"},{code_dpto:"54",code:"54385",name:"LA ESPERANZA"},{code_dpto:"54",code:"54398",name:"LA PLAYA"},{code_dpto:"54",code:"54405",name:"LOS PATIOS"},{code_dpto:"54",code:"54418",name:"LOURDES"},{code_dpto:"54",code:"54480",name:"MUTISCUA"},{code_dpto:"54",code:"54498",name:"OCAÑA"},{code_dpto:"54",code:"54518",name:"PAMPLONA"},{code_dpto:"54",code:"54520",name:"PAMPLONITA"},{code_dpto:"54",code:"54553",name:"PUERTO SANTANDER"},{code_dpto:"54",code:"54599",name:"RAGONVALIA"},{code_dpto:"54",code:"54660",name:"SALAZAR"},{code_dpto:"54",code:"54670",name:"SAN CALIXTO"},{code_dpto:"54",code:"54673",name:"SAN CAYETANO"},{code_dpto:"54",code:"54680",name:"SANTIAGO"},{code_dpto:"54",code:"54720",name:"SARDINATA"},{code_dpto:"54",code:"54743",name:"SILOS"},{code_dpto:"54",code:"54800",name:"TEORAMA"},{code_dpto:"54",code:"54810",name:"TIBÚ"},{code_dpto:"54",code:"54820",name:"TOLEDO"},{code_dpto:"54",code:"54871",name:"VILLA CARO"},{code_dpto:"54",code:"54874",name:"VILLA DEL ROSARIO"},{code_dpto:"63",code:"63001",name:"ARMENIA"},{code_dpto:"63",code:"63111",name:"BUENAVISTA"},{code_dpto:"63",code:"63130",name:"CALARCA"},{code_dpto:"63",code:"63190",name:"CIRCASIA"},{code_dpto:"63",code:"63212",name:"CÓRDOBA"},{code_dpto:"63",code:"63272",name:"FILANDIA"},{code_dpto:"63",code:"63302",name:"GÉNOVA"},{code_dpto:"63",code:"63401",name:"LA TEBAIDA"},{code_dpto:"63",code:"63470",name:"MONTENEGRO"},{code_dpto:"63",code:"63548",name:"PIJAO"},{code_dpto:"63",code:"63594",name:"QUIMBAYA"},{code_dpto:"63",code:"63690",name:"SALENTO"},{code_dpto:"66",code:"66001",name:"PEREIRA"},{code_dpto:"66",code:"66045",name:"APÍA"},{code_dpto:"66",code:"66075",name:"BALBOA"},{code_dpto:"66",code:"66088",name:"BELÉN DE UMBRÍA"},{code_dpto:"66",code:"66170",name:"DOSQUEBRADAS"},{code_dpto:"66",code:"66318",name:"GUÁTICA"},{code_dpto:"66",code:"66383",name:"LA CELIA"},{code_dpto:"66",code:"66400",name:"LA VIRGINIA"},{code_dpto:"66",code:"66440",name:"MARSELLA"},{code_dpto:"66",code:"66456",name:"MISTRATÓ"},{code_dpto:"66",code:"66572",name:"PUEBLO RICO"},{code_dpto:"66",code:"66594",name:"QUINCHÍA"},{code_dpto:"66",code:"66682",name:"SANTA ROSA DE CABAL"},{code_dpto:"66",code:"66687",name:"SANTUARIO"},{code_dpto:"68",code:"68001",name:"BUCARAMANGA"},{code_dpto:"68",code:"68013",name:"AGUADA"},{code_dpto:"68",code:"68020",name:"ALBANIA"},{code_dpto:"68",code:"68051",name:"ARATOCA"},{code_dpto:"68",code:"68077",name:"BARBOSA"},{code_dpto:"68",code:"68079",name:"BARICHARA"},{code_dpto:"68",code:"68081",name:"BARRANCABERMEJA"},{code_dpto:"68",code:"68092",name:"BETULIA"},{code_dpto:"68",code:"68101",name:"BOLÍVAR"},{code_dpto:"68",code:"68121",name:"CABRERA"},{code_dpto:"68",code:"68132",name:"CALIFORNIA"},{code_dpto:"68",code:"68147",name:"CAPITANEJO"},{code_dpto:"68",code:"68152",name:"CARCASÍ"},{code_dpto:"68",code:"68160",name:"CEPITÁ"},{code_dpto:"68",code:"68162",name:"CERRITO"},{code_dpto:"68",code:"68167",name:"CHARALÁ"},{code_dpto:"68",code:"68169",name:"CHARTA"},{code_dpto:"68",code:"68176",name:"CHIMA"},{code_dpto:"68",code:"68179",name:"CHIPATÁ"},{code_dpto:"68",code:"68190",name:"CIMITARRA"},{code_dpto:"68",code:"68207",name:"CONCEPCIÓN"},{code_dpto:"68",code:"68209",name:"CONFINES"},{code_dpto:"68",code:"68211",name:"CONTRATACIÓN"},{code_dpto:"68",code:"68217",name:"COROMORO"},{code_dpto:"68",code:"68229",name:"CURITÍ"},{code_dpto:"68",code:"68235",name:"EL CARMEN DE CHUCURÍ"},{code_dpto:"68",code:"68245",name:"EL GUACAMAYO"},{code_dpto:"68",code:"68250",name:"EL PEÑÓN"},{code_dpto:"68",code:"68255",name:"EL PLAYÓN"},{code_dpto:"68",code:"68264",name:"ENCINO"},{code_dpto:"68",code:"68266",name:"ENCISO"},{code_dpto:"68",code:"68271",name:"FLORIÁN"},{code_dpto:"68",code:"68276",name:"FLORIDABLANCA"},{code_dpto:"68",code:"68296",name:"GALÁN"},{code_dpto:"68",code:"68298",name:"GAMBITA"},{code_dpto:"68",code:"68307",name:"GIRÓN"},{code_dpto:"68",code:"68318",name:"GUACA"},{code_dpto:"68",code:"68320",name:"GUADALUPE"},{code_dpto:"68",code:"68322",name:"GUAPOTÁ"},{code_dpto:"68",code:"68324",name:"GUAVATÁ"},{code_dpto:"68",code:"68327",name:"GÜEPSA"},{code_dpto:"68",code:"68344",name:"HATO"},{code_dpto:"68",code:"68368",name:"JESÚS MARÍA"},{code_dpto:"68",code:"68370",name:"JORDÁN"},{code_dpto:"68",code:"68377",name:"LA BELLEZA"},{code_dpto:"68",code:"68385",name:"LANDÁZURI"},{code_dpto:"68",code:"68397",name:"LA PAZ"},{code_dpto:"68",code:"68406",name:"LEBRÍJA"},{code_dpto:"68",code:"68418",name:"LOS SANTOS"},{code_dpto:"68",code:"68425",name:"MACARAVITA"},{code_dpto:"68",code:"68432",name:"MÁLAGA"},{code_dpto:"68",code:"68444",name:"MATANZA"},{code_dpto:"68",code:"68464",name:"MOGOTES"},{code_dpto:"68",code:"68468",name:"MOLAGAVITA"},{code_dpto:"68",code:"68498",name:"OCAMONTE"},{code_dpto:"68",code:"68500",name:"OIBA"},{code_dpto:"68",code:"68502",name:"ONZAGA"},{code_dpto:"68",code:"68522",name:"PALMAR"},{code_dpto:"68",code:"68524",name:"PALMAS DEL SOCORRO"},{code_dpto:"68",code:"68533",name:"PÁRAMO"},{code_dpto:"68",code:"68547",name:"PIEDECUESTA"},{code_dpto:"68",code:"68549",name:"PINCHOTE"},{code_dpto:"68",code:"68572",name:"PUENTE NACIONAL"},{code_dpto:"68",code:"68573",name:"PUERTO PARRA"},{code_dpto:"68",code:"68575",name:"PUERTO WILCHES"},{code_dpto:"68",code:"68615",name:"RIONEGRO"},{code_dpto:"68",code:"68655",name:"SABANA DE TORRES"},{code_dpto:"68",code:"68669",name:"SAN ANDRÉS"},{code_dpto:"68",code:"68673",name:"SAN BENITO"},{code_dpto:"68",code:"68679",name:"SAN GIL"},{code_dpto:"68",code:"68682",name:"SAN JOAQUÍN"},{code_dpto:"68",code:"68684",name:"SAN JOSÉ DE MIRANDA"},{code_dpto:"68",code:"68686",name:"SAN MIGUEL"},{code_dpto:"68",code:"68689",name:"SAN VICENTE DE CHUCURÍ"},{code_dpto:"68",code:"68705",name:"SANTA BÁRBARA"},{code_dpto:"68",code:"68720",name:"SANTA HELENA DEL OPÓN"},{code_dpto:"68",code:"68745",name:"SIMACOTA"},{code_dpto:"68",code:"68755",name:"SOCORRO"},{code_dpto:"68",code:"68770",name:"SUAITA"},{code_dpto:"68",code:"68773",name:"SUCRE"},{code_dpto:"68",code:"68780",name:"SURATÁ"},{code_dpto:"68",code:"68820",name:"TONA"},{code_dpto:"68",code:"68855",name:"VALLE DE SAN JOSÉ"},{code_dpto:"68",code:"68861",name:"VÉLEZ"},{code_dpto:"68",code:"68867",name:"VETAS"},{code_dpto:"68",code:"68872",name:"VILLANUEVA"},{code_dpto:"68",code:"68895",name:"ZAPATOCA"},{code_dpto:"70",code:"70001",name:"SINCELEJO"},{code_dpto:"70",code:"70110",name:"BUENAVISTA"},{code_dpto:"70",code:"70124",name:"CAIMITO"},{code_dpto:"70",code:"70204",name:"COLOSO"},{code_dpto:"70",code:"70215",name:"COROZAL"},{code_dpto:"70",code:"70221",name:"COVEÑAS"},{code_dpto:"70",code:"70230",name:"CHALÁN"},{code_dpto:"70",code:"70233",name:"EL ROBLE"},{code_dpto:"70",code:"70235",name:"GALERAS"},{code_dpto:"70",code:"70265",name:"GUARANDA"},{code_dpto:"70",code:"70400",name:"LA UNIÓN"},{code_dpto:"70",code:"70418",name:"LOS PALMITOS"},{code_dpto:"70",code:"70429",name:"MAJAGUAL"},{code_dpto:"70",code:"70473",name:"MORROA"},{code_dpto:"70",code:"70508",name:"OVEJAS"},{code_dpto:"70",code:"70523",name:"PALMITO"},{code_dpto:"70",code:"70670",name:"SAMPUÉS"},{code_dpto:"70",code:"70678",name:"SAN BENITO ABAD"},{code_dpto:"70",code:"70702",name:"SAN JUAN DE BETULIA"},{code_dpto:"70",code:"70708",name:"SAN MARCOS"},{code_dpto:"70",code:"70713",name:"SAN ONOFRE"},{code_dpto:"70",code:"70717",name:"SAN PEDRO"},{code_dpto:"70",code:"70742",name:"SAN LUIS DE SINCÉ"},{code_dpto:"70",code:"70771",name:"SUCRE"},{code_dpto:"70",code:"70820",name:"SANTIAGO DE TOLÚ"},{code_dpto:"70",code:"70823",name:"TOLÚ VIEJO"},{code_dpto:"73",code:"73001",name:"IBAGUÉ"},{code_dpto:"73",code:"73024",name:"ALPUJARRA"},{code_dpto:"73",code:"73026",name:"ALVARADO"},{code_dpto:"73",code:"73030",name:"AMBALEMA"},{code_dpto:"73",code:"73043",name:"ANZOÁTEGUI"},{code_dpto:"73",code:"73055",name:"ARMERO"},{code_dpto:"73",code:"73067",name:"ATACO"},{code_dpto:"73",code:"73124",name:"CAJAMARCA"},{code_dpto:"73",code:"73148",name:"CARMEN DE APICALÁ"},{code_dpto:"73",code:"73152",name:"CASABIANCA"},{code_dpto:"73",code:"73168",name:"CHAPARRAL"},{code_dpto:"73",code:"73200",name:"COELLO"},{code_dpto:"73",code:"73217",name:"COYAIMA"},{code_dpto:"73",code:"73226",name:"CUNDAY"},{code_dpto:"73",code:"73236",name:"DOLORES"},{code_dpto:"73",code:"73268",name:"ESPINAL"},{code_dpto:"73",code:"73270",name:"FALAN"},{code_dpto:"73",code:"73275",name:"FLANDES"},{code_dpto:"73",code:"73283",name:"FRESNO"},{code_dpto:"73",code:"73319",name:"GUAMO"},{code_dpto:"73",code:"73347",name:"HERVEO"},{code_dpto:"73",code:"73349",name:"HONDA"},{code_dpto:"73",code:"73352",name:"ICONONZO"},{code_dpto:"73",code:"73408",name:"LÉRIDA"},{code_dpto:"73",code:"73411",name:"LÍBANO"},{code_dpto:"73",code:"73443",name:"MARIQUITA"},{code_dpto:"73",code:"73449",name:"MELGAR"},{code_dpto:"73",code:"73461",name:"MURILLO"},{code_dpto:"73",code:"73483",name:"NATAGAIMA"},{code_dpto:"73",code:"73504",name:"ORTEGA"},{code_dpto:"73",code:"73520",name:"PALOCABILDO"},{code_dpto:"73",code:"73547",name:"PIEDRAS"},{code_dpto:"73",code:"73555",name:"PLANADAS"},{code_dpto:"73",code:"73563",name:"PRADO"},{code_dpto:"73",code:"73585",name:"PURIFICACIÓN"},{code_dpto:"73",code:"73616",name:"RIOBLANCO"},{code_dpto:"73",code:"73622",name:"RONCESVALLES"},{code_dpto:"73",code:"73624",name:"ROVIRA"},{code_dpto:"73",code:"73671",name:"SALDAÑA"},{code_dpto:"73",code:"73675",name:"SAN ANTONIO"},{code_dpto:"73",code:"73678",name:"SAN LUIS"},{code_dpto:"73",code:"73686",name:"SANTA ISABEL"},{code_dpto:"73",code:"73770",name:"SUÁREZ"},{code_dpto:"73",code:"73854",name:"VALLE DE SAN JUAN"},{code_dpto:"73",code:"73861",name:"VENADILLO"},{code_dpto:"73",code:"73870",name:"VILLAHERMOSA"},{code_dpto:"73",code:"73873",name:"VILLARRICA"},{code_dpto:"76",code:"76001",name:"CALI"},{code_dpto:"76",code:"76020",name:"ALCALÁ"},{code_dpto:"76",code:"76036",name:"ANDALUCÍA"},{code_dpto:"76",code:"76041",name:"ANSERMANUEVO"},{code_dpto:"76",code:"76054",name:"ARGELIA"},{code_dpto:"76",code:"76100",name:"BOLÍVAR"},{code_dpto:"76",code:"76109",name:"BUENAVENTURA"},{code_dpto:"76",code:"76111",name:"GUADALAJARA DE BUGA"},{code_dpto:"76",code:"76113",name:"BUGALAGRANDE"},{code_dpto:"76",code:"76122",name:"CAICEDONIA"},{code_dpto:"76",code:"76126",name:"CALIMA"},{code_dpto:"76",code:"76130",name:"CANDELARIA"},{code_dpto:"76",code:"76147",name:"CARTAGO"},{code_dpto:"76",code:"76233",name:"DAGUA"},{code_dpto:"76",code:"76243",name:"EL ÁGUILA"},{code_dpto:"76",code:"76246",name:"EL CAIRO"},{code_dpto:"76",code:"76248",name:"EL CERRITO"},{code_dpto:"76",code:"76250",name:"EL DOVIO"},{code_dpto:"76",code:"76275",name:"FLORIDA"},{code_dpto:"76",code:"76306",name:"GINEBRA"},{code_dpto:"76",code:"76318",name:"GUACARÍ"},{code_dpto:"76",code:"76364",name:"JAMUNDÍ"},{code_dpto:"76",code:"76377",name:"LA CUMBRE"},{code_dpto:"76",code:"76400",name:"LA UNIÓN"},{code_dpto:"76",code:"76403",name:"LA VICTORIA"},{code_dpto:"76",code:"76497",name:"OBANDO"},{code_dpto:"76",code:"76520",name:"PALMIRA"},{code_dpto:"76",code:"76563",name:"PRADERA"},{code_dpto:"76",code:"76606",name:"RESTREPO"},{code_dpto:"76",code:"76616",name:"RIOFRÍO"},{code_dpto:"76",code:"76622",name:"ROLDANILLO"},{code_dpto:"76",code:"76670",name:"SAN PEDRO"},{code_dpto:"76",code:"76736",name:"SEVILLA"},{code_dpto:"76",code:"76823",name:"TORO"},{code_dpto:"76",code:"76828",name:"TRUJILLO"},{code_dpto:"76",code:"76834",name:"TULUÁ"},{code_dpto:"76",code:"76845",name:"ULLOA"},{code_dpto:"76",code:"76863",name:"VERSALLES"},{code_dpto:"76",code:"76869",name:"VIJES"},{code_dpto:"76",code:"76890",name:"YOTOCO"},{code_dpto:"76",code:"76892",name:"YUMBO"},{code_dpto:"76",code:"76895",name:"ZARZAL"},{code_dpto:"81",code:"81001",name:"ARAUCA"},{code_dpto:"81",code:"81065",name:"ARAUQUITA"},{code_dpto:"81",code:"81220",name:"CRAVO NORTE"},{code_dpto:"81",code:"81300",name:"FORTUL"},{code_dpto:"81",code:"81591",name:"PUERTO RONDÓN"},{code_dpto:"81",code:"81736",name:"SARAVENA"},{code_dpto:"81",code:"81794",name:"TAME"},{code_dpto:"85",code:"85001",name:"YOPAL"},{code_dpto:"85",code:"85010",name:"AGUAZUL"},{code_dpto:"85",code:"85015",name:"CHAMEZA"},{code_dpto:"85",code:"85125",name:"HATO COROZAL"},{code_dpto:"85",code:"85136",name:"LA SALINA"},{code_dpto:"85",code:"85139",name:"MANÍ"},{code_dpto:"85",code:"85162",name:"MONTERREY"},{code_dpto:"85",code:"85225",name:"NUNCHÍA"},{code_dpto:"85",code:"85230",name:"OROCUÉ"},{code_dpto:"85",code:"85250",name:"PAZ DE ARIPORO"},{code_dpto:"85",code:"85263",name:"PORE"},{code_dpto:"85",code:"85279",name:"RECETOR"},{code_dpto:"85",code:"85300",name:"SABANALARGA"},{code_dpto:"85",code:"85315",name:"SÁCAMA"},{code_dpto:"85",code:"85325",name:"SAN LUIS DE PALENQUE"},{code_dpto:"85",code:"85400",name:"TÁMARA"},{code_dpto:"85",code:"85410",name:"TAURAMENA"},{code_dpto:"85",code:"85430",name:"TRINIDAD"},{code_dpto:"85",code:"85440",name:"VILLANUEVA"},{code_dpto:"86",code:"86001",name:"MOCOA"},{code_dpto:"86",code:"86219",name:"COLÓN"},{code_dpto:"86",code:"86320",name:"ORITO"},{code_dpto:"86",code:"86568",name:"PUERTO ASÍS"},{code_dpto:"86",code:"86569",name:"PUERTO CAICEDO"},{code_dpto:"86",code:"86571",name:"PUERTO GUZMÁN"},{code_dpto:"86",code:"86573",name:"LEGUÍZAMO"},{code_dpto:"86",code:"86749",name:"SIBUNDOY"},{code_dpto:"86",code:"86755",name:"SAN FRANCISCO"},{code_dpto:"86",code:"86757",name:"SAN MIGUEL"},{code_dpto:"86",code:"86760",name:"SANTIAGO"},{code_dpto:"86",code:"86865",name:"VALLE DEL GUAMUEZ"},{code_dpto:"86",code:"86885",name:"VILLAGARZÓN"},{code_dpto:"88",code:"88001",name:"SAN ANDRÉS"},{code_dpto:"88",code:"88564",name:"PROVIDENCIA"},{code_dpto:"91",code:"91001",name:"LETICIA"},{code_dpto:"91",code:"91263",name:"EL ENCANTO"},{code_dpto:"91",code:"91405",name:"LA CHORRERA"},{code_dpto:"91",code:"91407",name:"LA PEDRERA"},{code_dpto:"91",code:"91430",name:"LA VICTORIA"},{code_dpto:"91",code:"91460",name:"MIRITI - PARANÁ"},{code_dpto:"91",code:"91530",name:"PUERTO ALEGRÍA"},{code_dpto:"91",code:"91536",name:"PUERTO ARICA"},{code_dpto:"91",code:"91540",name:"PUERTO NARIÑO"},{code_dpto:"91",code:"91669",name:"PUERTO SANTANDER"},{code_dpto:"91",code:"91798",name:"TARAPACÁ"},{code_dpto:"94",code:"94001",name:"INÍRIDA"},{code_dpto:"94",code:"94343",name:"BARRANCO MINAS"},{code_dpto:"94",code:"94663",name:"MAPIRIPANA"},{code_dpto:"94",code:"94883",name:"SAN FELIPE"},{code_dpto:"94",code:"94884",name:"PUERTO COLOMBIA"},{code_dpto:"94",code:"94885",name:"LA GUADALUPE"},{code_dpto:"94",code:"94886",name:"CACAHUAL"},{code_dpto:"94",code:"94887",name:"PANA PANA"},{code_dpto:"94",code:"94888",name:"MORICHAL"},{code_dpto:"95",code:"95001",name:"SAN JOSÉ DEL GUAVIARE"},{code_dpto:"95",code:"95015",name:"CALAMAR"},{code_dpto:"95",code:"95025",name:"EL RETORNO"},{code_dpto:"95",code:"95200",name:"MIRAFLORES"},{code_dpto:"97",code:"97001",name:"MITÚ"},{code_dpto:"97",code:"97161",name:"CARURU"},{code_dpto:"97",code:"97511",name:"PACOA"},{code_dpto:"97",code:"97666",name:"TARAIRA"},{code_dpto:"97",code:"97777",name:"PAPUNAUA"},{code_dpto:"97",code:"97889",name:"YAVARATÉ"},{code_dpto:"99",code:"99001",name:"PUERTO CARREÑO"},{code_dpto:"99",code:"99524",name:"LA PRIMAVERA"},{code_dpto:"99",code:"99624",name:"SANTA ROSALÍA"},{code_dpto:"99",code:"99773",name:"CUMARIBO"}],angular.module("shoplyApp").controller("CategoriaCtrl",["$scope","$rootScope","modal","api","sweetAlert",function(a,b,c,d,e){a.Records=!1,a.load=function(){d.categoria().get().success(function(b){a.records=b,a.Records=!0})},a.addIcon=function(){window.modal=c.show({templateUrl:"views/categorias/agregar-icono.html",size:"md",scope:a},function(a){})},a.setIcon=function(){console.log(this)},a.create=function(){window.modal=c.show({templateUrl:"views/categorias/agregar-categoria.html",size:"md",scope:a,backdrop:!0},function(a){return a.formCategoria.$invalid?void c.incompleteForm():(b.selectedNode&&(a.form.parent=b.selectedNode.node.id),void d.categoria().post(a.form).success(function(c){c&&(a.records.push(c),e.swal("Registro completado.","has registrado una nueva categoria.","success"),a.$close(),delete a.form.data,delete b.selectedNode)}))})},a["delete"]=function(){var e=angular.copy(a.records.filter(function(a){return a.id==b.selectedNode.node.id})[0]);c.removeConfirm({closeOnConfirm:!0},function(c){c&&d.categoria(e._id)["delete"]().success(function(c){c&&(delete b.selectedNode,a.load())})})},a.edit=function(){a.formEdit=angular.copy(a.records.filter(function(a){return a.id==b.selectedNode.node.id})[0]),window.modal=c.show({templateUrl:"views/categorias/editar_categoria.html",size:"md",scope:a,backdrop:!0},function(a){return a.formEditCategoria.$invalid?void c.incompleteForm():void d.categoria(a.formEdit._id).put(a.formEdit).success(function(c){c&&(e.swal("Registro Modificado","Registro modificado correctamente.","success"),a.load(),a.$close(),delete a.formEdit,delete b.selectedNode)})})}}]),angular.module("shoplyApp").directive("categoria",function(){function a(a,b,c,d){b.categoria().get().success(function(b){a.records=b}),a.myConfig={valueField:a.key,labelField:a.label,placeholder:"Categoria",maxItems:1,allowEmptyOption:a.emptyOption},a.$on("setCategoria",function(b,c){a.ngModel=c}),a.explorer=function(){c.show({templateUrl:"views/fields/categoria-popup.html",size:"md",scope:a},function(a){a.$emit("setCategoria",a.selectedNode.node.original._id),a.$close()})}}return a.$inject=["$scope","api","modal","$rootScope"],{template:'<div class="input-group"><selectize config="myConfig" options="records" ng-model="ngModel"></selectize><span class="input-group-btn"><button ng-click="explorer()" class="btn custom-btn-primary" style="top: -3px;padding:4px 12px;!important" type="button">Seleccionar</button></span></div>',restrict:"EA",scope:{ngModel:"=",key:"@",label:"@",emptyOption:"@"},controller:a,link:function(a,b,c){}}}),angular.module("shoplyApp").directive("productoField",function(){function a(a,b,c,d){b.producto().get().success(function(b){a.records=b.map(function(a){var b=new Object;return b=a.data,b.iva=a._iva,b.conversion=a.data.conversion,b._reference=a._reference,b._category=a._category,b._id=a._id,b.idcomposed=a.idcomposed,b.refMixed=a._reference.reference.join(""),b})||[]}),a.myConfig={plugins:["no_match"],loadingClass:"selectizeLoading",noResultText:"No existe un producto con esa referencia.",noMatch:function(){toastr.options={preventDuplicates:!0},toastr.warning("no existe un producto con esa referencia")},create:!1,valueField:a.key,labelField:a.label,placeholder:a.placeholder||"Producto",maxItems:1,searchField:a.searchBy,maxOptions:1,openOnFocus:!1,selectOnTab:!0,setFocus:a.setFocus||!1,render:{option:function(a,b){return a.gallery&&a.gallery.length>0?'<div><img style="border:2px solid #efefef;width:50px;height:50px;margin-right:5px;" src="'+a.gallery[0].URL+'" /><span>'+b(a.producto)+"</span></div>":'<div><img style="border:2px solid #efefef;width:50px;height:50px;margin-right:5px;" src="images/missing-product.png" /><span>'+b(a.producto)+"</span></div>"}},onItemAdd:function(b,c){angular.forEach(a.records,function(c,d){return c._id==b?void(a.setObject=a.records[d]):void 0})}}}return a.$inject=["$scope","api","modal","$rootScope"],{template:'<selectize config="myConfig" options="records" ng-model="ngModel"></selectize>',restrict:"EA",scope:{ngModel:"=",setObject:"=",setFocus:"=",key:"@",label:"@",searchBy:"=",placeholder:"@"},controller:a,link:function(a,b,c){a.$root.$on("focusOn",function(a,c){c&&b[0].firstChild.selectize.focus()})}}}),angular.module("shoplyApp").directive("serviceField",function(){function a(a,b,c,d){b.producto().add("servicios").get().success(function(b){a.records=b.map(function(a){var b=new Object;return b=a.data,b.iva=a._iva,b.conversion=a.data.conversion,b._reference=a._reference,b._category=a._category,b._id=a._id,b.idcomposed=a.idcomposed,b.refMixed=a._reference.reference.join(""),b})||[]}),a.myConfig={plugins:["no_match"],loadingClass:"selectizeLoading",noResultText:"No existe un servicio con esa referencia.",noMatch:function(){toastr.options={preventDuplicates:!0},toastr.warning("no existe un servicio con esa referencia")},create:!1,valueField:a.key,labelField:a.label,placeholder:"Servicio",maxItems:1,searchField:a.searchBy,maxOptions:1,openOnFocus:!1,selectOnTab:!0,setFocus:a.setFocus,onItemAdd:function(b,c){angular.forEach(a.records,function(c,d){return c._id==b?void(a.setObject=a.records[d]):void 0})}}}return a.$inject=["$scope","api","modal","$rootScope"],{template:'<selectize config="myConfig" options="records" ng-model="ngModel"></selectize>',restrict:"EA",scope:{ngModel:"=",setObject:"=",setFocus:"=",key:"@",label:"@",searchBy:"="},controller:a,link:function(a,b,c){a.$root.$on("focusOn",function(a,c){c&&b[0].firstChild.selectize.focus()}),b[0].firstChild.selectize.focus()}}}),angular.module("shoplyApp").controller("CategorydetailCtrl",["$scope","$stateParams","api",function(a,b,c){a.load=function(){b.categoria&&c.categoria(b.categoria).get().success(function(b){a.record=b})}}]),angular.module("shoplyApp").controller("DashboardCtrl",["$scope","api","modal","storage","$state","$rootScope","$timeout","permission",function(a,b,c,d,e,f,g,h){a.load=function(){b.metadata("empleados").get().success(function(b){a.empleados=b}),b.metadata("apps").get().success(function(b){a.apps=b}),b.metadata("pedidos").get().success(function(b){a.pedidos=b}),b.metadata("clientes").get().success(function(b){a.clientes=b}),b.metadata("ventas").get().success(function(b){a.ventas=b}),b.metadata("productos").get().success(function(b){a.productos=b}),b.metadata("vendedores").get().success(function(b){a.vendedores=b}),angular.fromJson(localStorage.company)&&(f.user._company=angular.fromJson(localStorage.company))},a.go=function(a){("F2"==a.code||"F2"==a.key)&&e.go("dashboard.facturacion")},a.callForEdit=function(){a.$$childHead.edit(f.grid.value)},a.callForDelete=function(){a.$$childHead["delete"](f.grid.value)},a.callForCreate=function(){a.$$childHead.create()},a.callForDetails=function(){a.$$childHead.detail()},a.facturar=function(){a.$$childHead.facturar()},a.rememberCompany=function(a){return a?void d.save("remenberCompany",company):void d["delete"]("remenberCompany")},a.connectCompany=function(){f.user;b.empresa(f.grid.value._id).get().success(function(a){g(function(){f.user._company=a,d.update("user",f.user),toastr.success("Conectado con: "+a.data.empresa,{timeOut:1e4}),e.go("dashboard",{},{reload:!0})})})},a.cambiarEmpresa=function(){window.modal=c.show({templateUrl:"views/company/conectar.html",size:"sm",scope:a,backdrop:"static",windowClass:"center-modal"},function(a){f.user;a.loading=!0,b.empresa(a.company._id).get().success(function(b){g(function(){f.user._company=b,d.update("user",f.user),a.form&&a.form.data.remenber&&d.save("company",b),toastr.success("Conectado con: "+b.data.empresa,{timeOut:1e4}),a.loading=!1,a.$close(),e.go("dashboard",{},{reload:!0})},5e3)})})},a.agregarIva=function(){window.modal=c.show({templateUrl:"views/iva/agregar_ivas.html",size:"md",scope:a,backdrop:"static"},function(a){a.$close()})},a.agregarFormasDePago=function(){window.modal=c.show({templateUrl:"views/formaDePago/agregar_formaDePago.html",size:"md",scope:a,backdrop:"static"},function(a){a.$close()})},a.agregarConsecutivo=function(){window.modal=c.show({
templateUrl:"views/contador/agregar_contadores.html",size:"md",scope:a,backdrop:"static"},function(a){a.$close()})},a.agregarCasaComercial=function(){window.modal=c.show({templateUrl:"views/casaComercial/agregar-casaComercial.html",size:"md",scope:a,backdrop:"static"},function(a){a.$close()})}}]),angular.module("shoplyApp").controller("HeaderCtrl",["$scope","api","$state","modal","$timeout","$window","$rootScope","storage",function(a,b,c,d,e,f,g,h){a.logout=function(){h["delete"]("token"),h["delete"]("user"),delete g.isLogged,delete g.user,delete g.grid,c.go("login")},a.cambiarEmpresa=function(){window.modal=d.show({templateUrl:"views/company/conectar.html",size:"sm",scope:a,backdrop:"static"},function(a){g.user;a.loading=!0,b.empresa(a.$parent.company._id).get().success(function(b){e(function(){return b._parent?(g.user._company=b._parent,g.user._company=b,h.update("user",g.user),toastr.success("Conectado con: "+b.data.empresa,{timeOut:1e4}),a.loading=!1,a.$close(),void c.go("dashboard")):(g.user._company=b,h.update("user",g.user),toastr.success("Conectado con: "+b.data.empresa,{timeOut:1e4}),a.loading=!1,a.$close(),void c.go("dashboard"))},5e3)})})}}]),angular.module("shoplyApp").controller("ChangepasswordCtrl",["$scope","sweetAlert","account","storage","$state",function(a,b,c,d,e){a.changePassword=function(){if(a.changePasswordForm.$valid){if(a.form.data.newpwd!=a.form.data.confirmpwd)return void b.swal({title:"Formulario incompleto",text:"Las Contraseñas no coinciden",type:"error"});c.usuario().password_reset(angular.extend(a.form.data,{id:angular.fromJson(d.get("user"))._id})).then(function(a){a&&(b.swal("Cambio de clave!","se ha cambiado correctamente","success"),$storage["delete"]("user"),$storage["delete"]("token"),delete scope.form,e.go("login"))},function(a){400==a&&b.swal({title:"Formulario no completado",text:"Las Contraseñas no coinciden",type:"error"}),404==a&&b.swal({title:"Formulario no completado",text:"El usuario no existe",type:"error"})})}else b.swal({title:"Formulario no completado",text:"Por favor rellene los campos",type:"error"})}}]),angular.module("shoplyApp").controller("CompanyCtrl",["$scope","$timeout","$rootScope","sweetAlert","constants","$state","modal","api","storage",function(a,b,c,d,e,f,g,h,i){a.Records=!1,a.load=function(){h.empresa().add("user/"+angular.fromJson(i.get("user"))._id).get().success(function(b){a.records=b||[],a.Records=!0})},a.connectCompany=function(){c.user;h.empresa(this.record._id).get().success(function(a){b(function(){return a._parent?(c.user._company=a._parent,i.update("user",c.user),toastr.success("Conectado con: "+a.data.empresa,{timeOut:1e4}),void f.go("dashboard")):(c.user._company=a,i.update("user",c.user),void toastr.success("Conectado con: "+a.data.empresa,{timeOut:1e3}))},1e3)})},a.create=function(){window.modal=g.show({templateUrl:"views/company/agregar_empresa.html",size:"md",scope:a,backdrop:"static"},function(a){return a.formEmpresa.$invalid?void g.incompleteForm():void h.empresa().post(angular.extend(a.form,{_user:angular.fromJson(window.localStorage.user)._id})).success(function(c){c&&(d.swal("Registro completado.","has registrado una nueva empresa.","success"),b(a.load()),a.$close(),delete a.form)})})},a.edit=function(){a.formEdit=angular.copy(this.record),a.formEdit._parent=a.formEdit._parent?a.formEdit._parent._id:null,window.modal=g.show({templateUrl:"views/company/editar_empresa.html",size:"md",scope:a,backdrop:"static"},function(a){return a.formEditarEmpresa.$invalid?void g.incompleteForm():void h.empresa(a.formEdit._id).put(a.formEdit).success(function(b){b&&(d.swal("Registro Modificado","Registro modificado correctamente.","success"),a.load(),a.$close(),delete a.formEdit.data)})})},a["delete"]=function(b){var e=b||this.record;return e._id==c.user._company._id?void d.swal("Ups!!","No puedes eliminar una empresa en uso.","warning"):void g.removeConfirm({closeOnConfirm:!0},function(b){b&&h.empresa(e._id)["delete"]().success(function(b){b&&a.records.splice(a.records.indexOf(e),1)})})}}]),angular.module("shoplyApp").controller("FacturacionCtrl",["$scope","hotkeys","shoppingCart","modal","api","constants","sweetAlert","$rootScope","$http","$filter","$stateParams","storage","$timeout","$state",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){a.records=[],a.total=0,a.$watch("records",function(b,c){a.totalize(b),a.totalizeBases(b),a.totalizeDiscount(b),a.totalizeIva(b)},!0),a.totalize=function(b){for(var d=0,e=0;e<c.totalize(b).length;e++)d+=c.totalize(b)[e];a.total=d},a.totalizeIva=function(b){for(var d=0,e=0;e<c.totalizeIva(b).length;e++)d+=c.totalizeIva(b)[e];a.TotalIva=d},a.totalizeBases=function(b){for(var d=0,e=0;e<c.totalizeBases(b).length;e++)d+=c.totalizeBases(b)[e];a.subTotal=d},a.totalizeDiscount=function(b){for(var d=0,e=0;e<c.totalizeDiscount(b).length;e++)d+=c.totalizeDiscount(b)[e];a.descuento=d},a.load=function(){if(e.arqueos().add("find/").post({_seller:h.user._id,ini:moment(new Date).startOf("day").format()}).success(function(a){a.length>0&&(g.swal("Error","No puede facturar debido a que ya existe un arqueo para este dia","error"),n.go("dashboard"))}),a.records=[],k.facturacion)e.facturacion(k.facturacion).get().success(function(b){a.rs=b,a.records=a.rs._product,a.form._client=b._client});else if(k.pedido){e.pedido(k.pedido).get().success(function(b){a.pedido=b}),a.myGroceries=h.user._grocery.map(function(a){var b=new Object;return b.name=a.data.bodega,b._id=a._id,b})||[],a.myConfig={valueField:"_id",labelField:"name",placeholder:"Bodega para descargar",selectOnTab:!0,allowEmptyOption:a.emptyOption,maxItems:1};var b=a;d.show({templateUrl:"views/facturacion/selectGrocery.html",size:"sm",scope:a,backdrop:"static",windowClass:"modal-center"},function(a){a._grocery&&(e.pedido(k.pedido).get().success(function(c){console.log(a),b.grocery=a.myGroceries.filter(function(b){return b._id==a._grocery})[0].name,toastr.success("descargando de : "+a.myGroceries.filter(function(b){return b._id==a._grocery})[0].name),b.pedido=c,b.records=c.shoppingCart||[],b.form._client=c._client._id}),a.$close())})}else a.setDefault=l.get("defaultClient")||null,h.$emit("focusOn",!0),a.myGroceries=h.user._grocery.map(function(a){var b=new Object;return b.name=a.data.bodega,b._id=a._id,b})||[],a.selectGrocery()},a.selectGrocery=function(){a.myConfig={valueField:"_id",labelField:"name",placeholder:"Bodega para descargar",selectOnTab:!0,allowEmptyOption:a.emptyOption,maxItems:1},d.show({templateUrl:"views/facturacion/selectGrocery.html",size:"sm",scope:a,backdrop:"static",windowClass:"modal-center"},function(a){a._grocery&&(a.$parent.grocery=a.myGroceries.filter(function(b){return b._id==a._grocery})[0].name,toastr.success("descargando de : "+a.myGroceries.filter(function(b){return b._id==a._grocery})[0].name),a.$close())})},a.setDefaultClient=function(){this.defaultOption?l.save("defaultClient",a.form._client):l["delete"]("defaultClient")},a.printA=function(a,b){Handlebars.registerHelper("formatCurrency",function(a){return j("currency")(a)}),i.get("views/invoice/invoice_88mm.html").success(function(b){var c=Handlebars.compile(b),d=window.open("","_blank","scrollbars=yes,resizable=no,top=200,left=200,width=350");d.document.write(c(a)),d.print(),d.close()})},a.setReceived=function(){var b=0;angular.forEach(a.paymentMethods,function(a){a.data.value&&(b+=a.data.value)}),a.received=b;var c=a.totalParcial-a.received;0>c?a.change=-1*c:a.change=0,(this.method.data.requiredCode||this.method.data.card||this.method.data.credito)&&this.method.data.value>a.totalParcial&&(g.swal("Ups","Este metodo de pago no factura valores mayores al total.","warning"),delete this.method.data.value),this.method.data.requiredCode||this.method.data.card||this.method.data.credito||(this.method.data.totalEfectivo=this.method.data.value-a.change)},a.getPaymentMethods=function(){k.facturacion?(a.paymentMethods=a.rs._payments,a.loading=!1):(a.loading=!0,e.formas_pagos().get().success(function(b){a.$parent.paymentMethods=b||[],a.loading=!1}))},a.openBaseForm=function(b,c){a.totalCard=c,a.method=this.method,this.method.data.card&&13===b.which&&(window.modal=d.show({templateUrl:"views/facturacion/baseForm.html",size:"md",scope:a,backdrop:"static"},function(a){a.method.data.base=a.totalCard/1.16,a.method.data.Iva=a.totalCard-a.totalCard/1.16,a.$parent.$parent.form._payments=a.paymentMethods,a.$close()},function(){}))},a.$watch("gdiscount",function(b,c){(b||c)&&(a.vgdescuento=a.total*a.gdiscount/100,a.totalParcial=angular.copy(a.total)-a.vgdescuento)}),a.getExistencias=function(){a.record=this.record,e.cantidades().add("stock/"+a._grocery).add("/"+a.record._id).get().success(function(b){console.log("response",b);for(var c=0;c<b.length;c++)a.record.existencias=(a.record.existencias||0)+b[c].amount})},a.facturar=function(b){0!=a.records&&(window.modal=d.show({templateUrl:"views/facturacion/agregar_facturacion.html",size:"md",scope:a,backdrop:"static"},function(a){a.form.data=new Object,a.form._seller=h.user._id,a.form.data.TotalIva=a.TotalIva,a.form.data.total=a.totalParcial,a.form.data.subtotal=a.subTotal,a.form.data.change=a.$$childTail.change,a.form.data.received=a.$$childTail.received,a.form.data._grocery=a._grocery,a.form.data.descuentoGlobal=a.gdiscount||0,a.form.data.valorDescuentoGlobal=a.vgdescuento,a.form._payments=a.paymentMethods,a.form.data.descuento=0,a.form._product=a.records.map(function(b){return delete b.$order,b.descuento||(b.descuento=0),a.form.data.descuento=a.form.data.descuento+parseInt(b.descuento||0),b}),e.ivas().get().success(function(c){var d=[];a.form.data.ivadetails=[],angular.forEach(c,function(b){d.push(a.form._product.filter(function(a){return a.iva||(a.iva=new Object,a.iva.data=new Object,a.iva.data.valor=0),a.iva.data.valor==b.data.valor}))}),angular.forEach(d,function(b){if(b.length>0){var c=new Object;c.total=0,c.viva=0,angular.forEach(b,function(a){c.tipo=a.iva.data.valor,c.total=a.precio_venta*a.cantidad-(a.descuento||0*a.cantidad)+c.total});var d=c.tipo/100+1;c.base=c.total/d,c.viva=c.total-c.base,a.form.data.ivadetails.push(c)}}),k.pedido?(a.form._seller=h.user._id,a.form.data.TotalIva=a.TotalIva,a.form.data.total=a.totalParcial,a.form.data.subtotal=a.subTotal,a.form.data.change=a.$$childTail.change,a.form.data.received=a.$$childTail.received,a.form.data._grocery=a._grocery,a.form.data.descuentoGlobal=a.gdiscount||0,a.form.data.valorDescuentoGlobal=a.vgdescuento,a.form._payments=a.paymentMethods,a.form.data.descuento=0,a.form.data.tipo=a.pedido.data.tipo,a.form.data.estado=b,e.facturacion().post(a.form).success(function(b){b&&(delete a.form,delete a.rs,a.records.length=0,b.createdAt=moment(new Date(b.createdAt)).format("lll"),a.printA(b),a.$close(),g.swal("Listo.","Venta realizada correctamente.","success"),h.$emit("focusOn",!0),e.pedido(k.pedido).add("/facturado").put().success(function(a){console.log(a),toastr.success("Pedido Actualizado")}))})):(a.form.data.estado=b,e.facturacion().post(a.form).success(function(b){b&&(delete a.form,a.records.length=0,b.createdAt=moment(new Date(b.createdAt)).format("lll"),console.log("response",b),a.printA(b),a.$close(),g.swal("Listo.","Venta realizada correctamente.","success"),h.$emit("focusOn",!0))}))})}))},a.agregarCantidad=function(){a._record=this.record,window.modal=d.show({templateUrl:"views/facturacion/agregar-cantidad.html",size:"sm",scope:a,backdrop:"static",windowClass:"modal-center"},function(a){if(a.cantidadModel){if(a.cantidadModel>a._record.existencias)return void toastr.warning("No existe esta cantidad en bodega para esta venta");a._record.cantidad=parseInt(a.cantidadModel),a._record.precio_baseFacturado=(a._record.precio+a._record.valor_utilidad)*a.cantidadModel,a._record.precio_VentaFacturado=a._record.precio_venta*a.cantidadModel,a._record.ivaFacturado=a._record.precio_VentaFacturado-a._record.precio_baseFacturado,a._record.descuento=a._record.precio_venta*parseInt(a._record.porcentajeDTO)*a._record.cantidad/100,a._record.precio_VentaFacturado=a._record.precio_VentaFacturado||a._record.precio_venta-a._record.descuento,a.$close()}})},a.agregarDescuento=function(){a.descuentoRecord=this.record,window.modal=d.show({templateUrl:"views/facturacion/descuento.html",size:"sm",scope:a,backdrop:"static"},function(a){a.pdiscount&&(a.descuentoRecord.porcentajeDTO=a.pdiscount,a.descuentoRecord.descuento=a.descuentoRecord.precio_venta*parseInt(a.pdiscount)*a.descuentoRecord.cantidad/100,a.descuentoRecord.precio_VentaFacturado=a.descuentoRecord.precio_VentaFacturado-a.descuentoRecord.descuento,a.descuentoRecord.precio_baseVlFacturado=(a.descuentoRecord.precio_baseFacturado||(a.descuentoRecord.precio+a.descuentoRecord.valor_utilidad)*a.pdiscount)/100,a.descuentoRecord.ivaFacturado=a.descuentoRecord.ivaFacturado-a.descuentoRecord.ivaFacturado*a.pdiscount/100,a.descuentoRecord.precio_baseFacturado=(a.descuentoRecord.precio_baseFacturado||a.descuentoRecord.precio+a.descuentoRecord.valor_utilidad)-(a.descuentoRecord.precio_baseFacturado||a.descuentoRecord.precio+a.descuentoRecord.valor_utilidad)*a.pdiscount/100,a.descuentoRecord.vlUnicoD=a.descuentoRecord.total*a.pdiscount/100,a.descuentoRecord.vlUnicoP=a.descuentoRecord.total-a.descuentoRecord.vlUnicoD,a.$close()),a.pdiscountPesos&&(a.descuentoRecord.pesosDTO=a.pdiscountPesos,a.descuentoRecord.descuento=a.pdiscountPesos,a.descuentoRecord.precio_VentaFacturado=a.descuentoRecord.precio_VentaFacturado-a.descuentoRecord.descuento,a.descuentoRecord.precio_baseFacturado=a.descuentoRecord.precio_VentaFacturado/(a.descuentoRecord.iva.data.valor/100+1),a.descuentoRecord.ivaFacturado=a.descuentoRecord.precio_VentaFacturado-a.descuentoRecord.precio_baseFacturado,a.$close())})},a.agregarDescuentoGlobal=function(){window.modal=d.show({templateUrl:"views/facturacion/descuento.html",size:"sm",scope:a,backdrop:"static"},function(a){a.pdiscount&&(a.$parent.descuentoGlobal=a.$parent.$parent.total*a.pdiscount/100,console.log("descuentoGloabl",a.$parent.descuentoGloabal),a.total=a.total-a.$parent.$parent.descuentoGlobal,console.log("total",a.$parent.$parent.total),a.$close()),a.pdiscountPesos&&a.$close()})},a.$watch("_product",function(b,c){if(b){if(a._productObj.negativo)return a.records.push(angular.copy(angular.extend(a._productObj,{cantidad:1,precio_baseFacturado:a._productObj.precio+a._productObj.valor_utilidad,precio_VentaFacturado:a._productObj.precio_venta,ivaFacturado:a._productObj.precio_venta-(a._productObj.precio+a._productObj.valor_utilidad),total:a._productObj.precio_venta,descuento:0,vlUnicoD:0,vlUnicoP:a._productObj.precio_venta}))),void delete a._product;e.cantidades().add("stock/"+a._grocery).add("/"+b).get().success(function(b){0==b.length?(toastr.warning("este producto no esta disponible en bodega"),delete a._product):(a.records.push(angular.copy(angular.extend(a._productObj,{cantidad:1,precio_baseFacturado:a._productObj.precio+a._productObj.valor_utilidad,precio_VentaFacturado:a._productObj.precio_venta,ivaFacturado:a._productObj.precio_venta-(a._productObj.precio+a._productObj.valor_utilidad),total:a._productObj.precio_venta,descuento:0,vlUnicoD:0,vlUnicoP:a._productObj.precio_venta}))),delete a._product)})}}),a["delete"]=function(){var b=this.record;a.records.splice(a.records.indexOf(b),1)}}]),angular.module("shoplyApp").controller("DevolucionesCtrl",["$scope","storage","shoppingCart","modal","api","constants","sweetAlert","$rootScope","$http","$filter",function(a,b,c,d,e,f,g,h,i,j){a.records=[],a.findByCode=function(b){(13==b.keyCode||13==b.which)&&(a.Records=!0,e.facturacion().add("find").post(a.form.data).success(function(b){0==b.length&&(g.swal("0 Resultado.","No se encontro esta factura.","success"),delete a.form),a.devolucionesRecords=b||[],a.Records=!1}))},a.remove=function(){var b=this.record;a.devolucionesRecords.splice(a.devolucionesRecords.indexOf(b),1)},a.find=function(){a.devolucionesRecords=[],a.Records=!0,a.form=a.form||{},a.form.data=a.form.data||{},a.form.data.ini=a.form.data.ini?moment(a.form.data.ini).startOf("day").format():void 0,a.form.data.end=a.form.data.end?moment(a.form.data.end).endOf("day").format():void 0,e.facturacion().add("find").post(a.form.data).success(function(b){0==b.length&&g.swal("Oops...","No se encontraron resultados en esta busqueda!","error"),a.devolucionesRecords=b||[],a.Records=!1})},a.verFormaDePago=function(){a.records=this.record._payments,window.modal=d.show({templateUrl:"views/facturacion/verFormasDePago.html",size:"md",scope:a,backdrop:"static"},function(a){a.$close()})},a.$watch("records",function(b,d){b.length>0&&(a.total=c.totalize(b)-c.totalizeDiscount(b)||0,a.TotalIva=c.totalizeIva(b),a.subTotal=a.total-a.TotalIva,a.descuento=c.totalizeDiscount(b))},!0),a.load=function(){},a.printA=function(a,b){Handlebars.registerHelper("formatCurrency",function(a){return j("currency")(a)}),i.get("views/invoice/invoice_88mm.html").success(function(b){var c=Handlebars.compile(b),d=window.open("","_blank","scrollbars=yes,resizable=no,top=200,left=200,width=350");d.document.write(c(a)),d.print(),d.close()})},a.setReceived=function(){var b=0;angular.forEach(a.paymentMethods,function(a){a.data.value&&(b+=a.data.value)}),a.received=b;var c=a.totalParcial-a.received;0>c?a.change=-1*c:a.change=0},a.getPaymentMethods=function(){a.loading=!0,e.formas_pagos().get().success(function(b){a.paymentMethods=b||[],a.loading=!1})},a.openBaseForm=function(b,c){a.totalCard=c,a.method=this.method,this.method.data.card&&13===b.which&&(window.modal=d.show({templateUrl:"views/facturacion/baseForm.html",size:"md",scope:a,backdrop:"static"},function(a){a.method.data.base=a.totalCard/1.16,a.method.data.Iva=a.totalCard-a.totalCard/1.16,a.$parent.$parent.form._payments=a.paymentMethods,a.$close()},function(){alert(1)}))},a.$watch("gdiscount",function(b,c){(b||c)&&(a.vgdescuento=a.total*a.gdiscount/100,a.totalParcial=angular.copy(a.total)-a.vgdescuento)}),a.facturar=function(){window.modal=d.show({templateUrl:"views/facturacion/agregar_facturacion.html",size:"md",scope:a,backdrop:"static"},function(a){a.form.data=new Object,a.form._seller=h.user._id,a.form.data.TotalIva=a.TotalIva,a.form.data.total=a.totalParcial,a.form.data.subtotal=a.subTotal,a.form.data.descuentoGlobal=a.gdiscount||0,a.form.data.valorDescuentoGlobal=a.vgdescuento,a.form._product=a.records.map(function(a){return delete a.$order,a}),e.ivas().get().success(function(b){var c=[];a.form.data.ivadetails=[],angular.forEach(b,function(b){c.push(a.form._product.filter(function(a){return a.iva||(a.iva=new Object,a.iva.data=new Object,a.iva.data.valor=0),a.iva.data.valor==b.data.valor}))}),angular.forEach(c,function(b){var c=new Object;c.total=0,c.viva=0,angular.forEach(b,function(a){c.tipo=a.iva.data.valor,c.total=c.total+a.precio_venta,c.viva=c.viva+a.valor_iva||0}),c.base=c.total-c.viva,a.form.data.ivadetails.push(c)}),e.facturacion().post(a.form).success(function(b){b&&(delete a.form,a.records.length=0,a.printA(b),a.$close(),g.swal("Listo.","Venta realizada correctamente.","success"),h.$emit("focusOn",!0))})})})},a.agregarCantidad=function(){var b=this.record;g.swal({title:"Agregar Cantidad",type:"input",inputValue:1,showCancelButton:!1,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Cantidad"},function(c){a.records[a.records.indexOf(b)].cantidad=parseInt(c||1),window.swal.close()})},a.agregarDescuento=function(){var a=this.record;g.swal({title:"% de Descuento",type:"input",showCancelButton:!1,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"%"},function(b){a.descuento=parseInt(b)||0,a.valor_descuento=a.precio_venta*a.cantidad*(parseInt(a.descuento||0)/100),a.total=a.total-a.valor_descuento,window.swal.close()})},a.$watch("_product",function(b,c){if(b){var d=!1;angular.forEach(a.records,function(a){a._id==b&&(d=!0,a.cantidad=a.cantidad+1,a.total=a.precio_venta*a.cantidad)}),d||a.records.push(angular.copy(angular.extend(a._productObj,{cantidad:1,total:a._productObj.precio_venta}))),delete a._product}}),a.quitar=function(){var b=this.record;a.records.splice(a.records.indexOf(b),1)}}]),angular.module("shoplyApp").controller("ArqueoCtrl",["$scope","$http","$filter","$rootScope","$stateParams","sweetAlert","constants","$state","modal","api","storage",function(a,b,c,d,e,f,g,h,i,j,k){a.MainRecords=!1,a.form=new Object,a.form.metadata={},a.form.metadata.total_sistema=0,a.load=function(){e.employee&&(a._sellerParam=e.employee),e.highlight&&(a.highlight=e.highlight),e.arqueo?j.arqueos(e.arqueo).get().success(function(b){a.form._request=b._request||[],a.form.metadata=b.metadata,a.MainRecords=!0}):j.arqueos().get().success(function(b){a.records=b||[],a.MainRecords=!0})},a.totalizePayments=function(){this.record.total=0;for(var b=0;b<a.allPayments.length;b++)this.record.data.descripcion==a.allPayments[b].data.descripcion&&(a.allPayments[b].data.totalEfectivo?this.record.total=this.record.total+a.allPayments[b].data.totalEfectivo:this.record.total=this.record.total+a.allPayments[b].data.value)},a.totalizeBill=function(){a.allPayments=[];for(var b=0;b<a.$parent.form._billings.length;b++)console.log(a.$parent.form._billings),a.allPayments=a.allPayments.concat(a.$parent.form._billings[b]._payments.filter(function(a){return a.data.value}))},a.verArqueo=function(){a.payments=this.record.data.payments,window.modal=i.show({templateUrl:"views/arqueos/ver-arqueo.html",size:"md",scope:a,backdrop:"static"},function(a){a.$close()})},a.verFacturaciones=function(){a._billings=this.record._request,window.modal=i.show({templateUrl:"views/arqueos/ver-facturaciones.html",size:"lg",scope:a,backdrop:"static"},function(a){a.$close()})},a.guardarArqueo=function(){window.modal=i.show({templateUrl:"views/arqueos/guardar-arqueo.html",size:"md",scope:a,backdrop:"static"},function(a){f.swal({title:"Confirmar Movimiento!",text:"Escribe algo referente al movimiento.",type:"input",showCancelButton:!1,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Nombre del Movimiento"},function(b){if(b===!1)return!1;if(console.log(a),""===b)return swal.showInputError("You need to write something!"),!1;var c={};c.data={},c._seller=a.$parent.$parent.formData._seller,c.data.arqueo=b,c.data.payments=a.$parent.payments,c.ini=moment(a.$parent.$parent.formData.ini).startOf("day").format(),c.end=moment(a.$parent.$parent.formData.end).endOf("day").format(),c._request=a.$parent.form._billings.map(function(a){return a._id}),console.log("data para el arqueo",c),j.arqueos().post(c).success(function(b){b&&(f.swal("Registro Creado","Registro creado correctamente.","success"),a.form._billings=[],a.$close(),h.go("dashboard.arqueos",{highlight:b._id}))})})})},a.verImpuestos=function(b){a.records=this.record.data.ivadetails,window.modal=i.show({templateUrl:"views/iva/verIvas.html",size:"md",scope:a,backdrop:"static"},function(a){a.$close()})},a.create=function(){h.go("dashboard.crear-arqueo")},a.download=function(){alert(1)},a.downloadOnLIst=function(){a._schema=a.form._billings.map(function(a){var b=new Object;return b.vendedor=a._seller.full_name,b.fecha=new Date(a.createdAt).toISOString().substr(0,10),b.Cliente=a._client.full_name,b.total=a.data.total.toString(),b});var b=a._schema,c=[a.form.metadata],d=[{sheetid:"Pedidos",header:!0},{sheetid:"Facturacion",header:!1}];alasql('SELECT INTO XLSX("Arqueo.xlsx",?) FROM ?',[d,[b,c]])},a.find=function(){a.formData=a.formData||{},a.formData.ini=a.formData.ini?moment(a.formData.ini).startOf("day").format():void 0,a.formData.end=a.formData.end?moment(a.formData.end).endOf("day").format():void 0,j.arqueos().add("find/").post(a.formData).success(function(b){b.length>0?(f.swal("Arqueo Existente","Ya existe un arqueo para este usuario en esta fecha","error"),delete a.formData,delete a.formD):0==b.length&&(a.Records=!0,a.formData=a.formData||{},a.formData.ini=moment(a.formData.ini).startOf("day").format(),a.formData.end=moment(a.formData.end).endOf("day").format(),j.facturacion().add("find/").post(a.formData).success(function(b){b.length>0?(a.form._billings=b||[],a.form.metadata.total_sistema=0,a.form.metadata.sobrante=0,a.form.metadata.faltante=0,a.totalize(),a.formasDePagos=[],a.ffp=[],a.Records=!1,delete a.formData,j.formas_pagos().get().success(function(b){a.payments=b,angular.forEach(b,function(b){angular.forEach(a.form._billings,function(c){a.formasDePagos.push({id:b.data.descripcion,values:c._payments.filter(function(a){return a._id==b._id&&a.data.value})})})})})):(f.swal("0 Resultados","No se encontraron registros para este usuario","error"),delete a.formData,a.form._billings=a.form._billings||[],a.Records=!1)}))})},a.print=function(d){Handlebars.registerHelper("formatCurrency",function(a){return a.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}),Handlebars.registerHelper("DateShort",function(a){return c("date")(a,"yyyy-MM-dd")}),b.get("views/prints/arqueo.html").success(function(b){var c=Handlebars.compile(b),d=window.open("","_blank","scrollbars=yes,resizable=no,top=200,left=200,width=350");d.document.write(c(a.records)),d.print(),d.close()})},a.totalize=function(){angular.forEach(a.form._billings,function(b){a.form.metadata.total_sistema+=b.data.total||0})},a.$watch("form.metadata.total_efectivo",function(b,c){(a.form.metadata.total_sistema-a.form.metadata.total_efectivo||0)<0?(a.form.metadata.sobrante=-1*(a.form.metadata.total_sistema-a.form.metadata.total_efectivo),a.form.metadata.faltante=0):(a.form.metadata.faltante=a.form.metadata.total_sistema-a.form.metadata.total_efectivo||0,a.form.metadata.sobrante=0)}),a.borrar=function(){var b=this.record;i.removeConfirm({closeOnConfirm:!0},function(c){c&&j.arqueos(b._id)["delete"]().success(function(c){c&&a.records.splice(a.records.indexOf(b),1)})})}}]),angular.module("shoplyApp").controller("forgotCtrl",["$scope","api","$state","modal","storage",function(a,b,c,d,e){a.recover=function(){return a.forgotForm.$invalid?void d.incompleteForm():void b.recover().post(a.form.data).success(function(b){b&&(a.success=!0)}).error(function(){a.failed=!0})}}]),angular.module("shoplyApp").controller("FormaDePagoCtrl",["$scope","modal","api",function(a,b,c){a.load=function(){a.loading=!0,c.formas_pagos().get().success(function(b){a.records=b||[],a.loading=!1})},a.agregar=function(){return a.formFormaPagos.$invalid?void b.incompleteForm():void c.formas_pagos().post(a.form).success(function(b){b&&(a.records.push(b),delete a.form.data)})},a.borrar=function(){var d=this.record;b.removeConfirm({closeOnConfirm:!0},function(b){b&&c.formas_pagos(d._id)["delete"]().success(function(b){b&&a.records.splice(a.records.indexOf(d),1)})})},a.edit=function(){a.formEdit=angular.copy(this.record),window.modal=b.show({templateUrl:"views/formaDePago/editar_forma_pago.html",size:"md",scope:a,backdrop:"static"},function(a){return a.$$childTail.formEditformaPago.$invalid?void b.incompleteForm():void c.formas_pagos(a.formEdit._id).put(a.formEdit).success(function(b){b&&(sweetAlert("Registro Modificado","Registro modificado correctamente.","success"),a.load(),a.$close(),delete a.formEdit)})})}}]),angular.module("shoplyApp").factory("sweetAlert",["$timeout","$window",function(a,b){var c=b.swal;return{swal:function(b,d,e){a(function(){"function"==typeof d?c(b,function(b){a(function(){d(b)})},e):c(b,d,e)},200)},success:function(b,d){a(function(){c(b,d,"success")},200)},error:function(b,d){a(function(){c(b,d,"error")},200)},warning:function(b,d){a(function(){c(b,d,"warning")},200)},info:function(b,d){a(function(){c(b,d,"info")},200)}}}]),angular.module("shoplyApp").controller("TransportadorCtrl",["$scope","api","modal",function(a,b,c){a.load=function(){b.transportador().get().success(function(b){a.records=b||[]})},a.agregar=function(){window.modal=c.show({templateUrl:"views/transportador/agregar-transportador.html",size:"md",scope:a},function(a){return a.formTransportador.$invalid?void c.incompleteForm():void b.transportador().post(a.form).success(function(b){b&&(a.load(),a.$close(),delete a.form.data)})})}}]),angular.module("shoplyApp").directive("iconPicker",function(){function a(a,b){a.selected=null,a.iconPickerForm=function(){b.show({templateUrl:"views/categorias/agregar-icono.html",size:"md",scope:a},function(a){a.$close()})},a.setIcon=function(b){a.ngModel=b.currentTarget.classList[1],a.selected=b.currentTarget.classList[1],a.$$childHead.$close()}}return a.$inject=["$scope","modal"],{template:'<a href="" ng-click="iconPickerForm()" >Elejir un Icono</a>',restrict:"E",scope:{ngModel:"="},link:function(a,b,c){},controller:a}}),angular.module("shoplyApp").run(["$templateCache",function(a){"use strict";a.put("views/aboutus/aboutus.html",'<div class="row page-about"> <div class="col-lg-12" style="top:50px;height:auto;float:left;width:100%;position:relative"> <div class="col-lg-12 text-center"> <div class="text-wrap" style="width:60%;margin:0 auto;padding: 10px;background-color: rgba(0, 0, 0, 0.3)!important"> <h3 class="text-white">¿Quienes Somos?</h3> <br> <p class="text-white text-justify">Al contrario del pensamiento popular, el texto de Lorem Ipsum no es simplemente texto aleatorio. Tiene sus raices en una pieza cl´sica de la literatura del Latin, que data del año 45 antes de Cristo, haciendo que este adquiera mas de 2000 años de antiguedad. Richard McClintock, un profesor de Latin de la Universidad de Hampden-Sydney en Virginia, encontró una de las palabras más oscuras de la lengua del latín, "consecteur", en un pasaje de Lorem Ipsum, y al seguir leyendo distintos textos del latín, descubrió la fuente indudable. Lorem Ipsum viene de las secciones 1.10.32 y 1.10.33 de "de Finnibus Bonorum et Malorum" (Los Extremos del Bien y El Mal) por Cicero, escrito en el año 45 antes de Cristo. Este libro es un tratado de teoría de éticas, muy popular durante el Renacimiento. La primera linea del Lorem Ipsum, "Lorem ipsum dolor sit amet..", viene de una linea en la sección 1.10.32 El trozo de texto estándar de Lorem Ipsum usado desde el año 1500 es reproducido debajo para aquellos interesados. Las secciones 1.10.32 y 1.10.33 de "de Finibus Bonorum et Malorum" por Cicero son también reproducidas en su forma original exacta, acompañadas por versiones en Inglés de la traducción realizada en 1914 por H. Rackham. Hay muchas variaciones de los pasajes de Lorem Ipsum disponibles, pero la mayoría sufrió alteraciones en alguna manera, ya sea porque se le agregó humor, o palabras aleatorias que no parecen ni un poco creíbles. Si vas a utilizar un pasaje de Lorem Ipsum, necesitás estar seguro de que no hay nada avergonzante escondido en el medio del texto. Todos los generadores de Lorem Ipsum que se encuentran en Internet tienden a repetir trozos predefinidos cuando sea necesario, haciendo a este el único generador verdadero (válido) en la Internet. Usa un diccionario de mas de 200 palabras provenientes del latín, combinadas con estructuras muy útiles de sentencias, para generar texto de Lorem Ipsum que parezca razonable. Este Lorem Ipsum generado siempre estará libre de repeticiones, humor agregado o palabras no características del lenguaje, etc. </p> <br> <p class="text-left text-white" style="font-weight: 300;font-style: oblique">Soply Inc team.</p> </div> </div> </div> </div> <div class="row"> <div class="col-lg-12 ng-scope" style="height: auto;background-color: #2D3A42"> <div class="col-lg-3 text-center" style="top: 20%"> <img src="images/corona@1x.jpg" style="padding:15px"> </div> <div class="col-lg-3 text-center" style="top: 20%"> <img src="images/critical-software@1x.jpg" style="padding:15px"> </div> <div class="col-lg-3 text-center" style="top: 20%"> <img src="images/flow@1x.jpg" style="padding:15px"> </div> <div class="col-lg-3 text-center" style="top: 20%"> <img src="images/labatt@1x.jpg" style="padding:15px"> </div> </div> </div>'),a.put("views/components/pin.html",'<div id="pin"> <div class="dots"> <div class="dot"></div> <div class="dot"></div> <div class="dot"></div> <div class="dot"></div> </div> <p>Ingrese el codigo</p> <div class="numbers"> <div class="number">1</div> <div class="number">2</div> <div class="number">3</div> <div class="number">4</div> <div class="number">5</div> <div class="number">6</div> <div class="number">7</div> <div class="number">8</div> <div class="number">9</div> </div> </div>'),
a.put("views/dashboard/dashboard.html",'<div class="dashboard"> <nav class="navbar navbar-toggleable-md" style="background-color:#002223!important"> <div class="container"> <div class="navbar-translate"> <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#example-navbar-info" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-bar bar1"></span> <span class="navbar-toggler-bar bar2"></span> <span class="navbar-toggler-bar bar3"></span> </button> <a class="navbar-brand" href="#pablo">DAIMONT</a> </div> <div class="collapse navbar-collapse justify-content-end" id="example-navbar-info"> <ul class="navbar-nav"> <li class="nav-item active"> <a class="nav-link" href="#pablo"> <p>Creditos</p> </a> </li> <li class="nav-item"> <a class="nav-link" href="#pablo"> <p>Perfil</p> </a> </li> <li class="nav-item"> <a class="nav-link" href="#pablo"> <p>Configuración</p> </a> </li> <li class="nav-item"> <div class="dropdown button-dropdown"> <a href="#pablo" class="dropdown-toggle" id="navbarDropdown" data-toggle="dropdown"> <img style="width:50%;border-radius:50%" ng-src="{{user.picture.data.url}}"> </a> <div class="dropdown-menu" aria-labelledby="navbarDropdown"> <a class="dropdown-header">Opciones</a> <a class="dropdown-item" href="#">Mis Prestamos</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="#">Configuración</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="#">Salir</a> </div> </div> </li> </ul> </div> </div> </nav> <div class="container" style="background-color: #ffffff;padding: 20px"> <div class="panel panel-default panel-table"> <div class="panel-heading"> <div class="row"> <div class="col col-xs-6"> <h3 class="panel-title"><i class="fa fa-credit-card text-primary"></i> Mis Creditos</h3> <p class="text-muted">Esta tabla de datos mostrara los creditos actuales.</p> </div> <div class="col col-xs-6 text-right"> <button type="button" class="btn btn-primary btn-create"><i class="now-ui-icons objects_diamond"></i> Nuevo Credito</button> </div> </div> </div> <div class="panel-body"> <div class="form-group pull-right"> <input type="text" class="search form-control" placeholder="Buscar Credito..."> </div> <div class="table-responsive"> <table class="table table-hover"> <thead> <tr> <th>#</th> <th>Estado del Credito</th> <th>Fecha de pago</th> <th>Monto</th> <th>Interes</th> <th>Gestión</th> <th>Dcto. Pronto pago</th> <th>Total a Pagar</th> <th style="width: 36px"></th> <th style="width: 36px"></th> </tr> </thead> <tbody> <tr style="border-left: 10px solid #002223"> <td>1</td> <td><span class="badge badge-default">PENDIENTE</span></td> <td>06/07/2017</td> <td>500,000</td> <td>5000</td> <td>3000</td> <td>2500</td> <td>580,000</td> <td><button class="btn btn-primary btn-sm"><i class="fa fa-credit-card"></i> Pagar</button></td> <td><button class="btn btn-danger btn-sm"><i class="fa fa-trash"></i> Quitar</button></td> </tr> </tbody> </table> </div> </div> <br> <br> <div> <ul class="pagination pagination-primary"> <li class="page-item active"> <a class="page-link" href="#">1</a> </li> <li class="page-item"> <a class="page-link" href="#">2</a> </li> <li class="page-item"> <a class="page-link" href="#">3</a> </li> <li class="page-item"> <a class="page-link" href="#">4</a> </li> <li class="page-item"> <a class="page-link" href="#">5</a> </li> </ul> </div> </div></div></div>'),a.put("views/faq/faq.html",'<div class="row page-faq"> <div class="col-lg-12" style="top:50px;height:auto;float:left;width:100%;position:relative"> <div class="col-lg-12 text-center"> <div class="text-wrap" style="width:600px;margin:0 auto;padding: 10px;background-color: rgba(0, 0, 0, 0.3)!important"> <h3 class="text-white">FAQ</h3> <br> <p class="text-white text-justify">Al contrario del pensamiento popular, el texto de Lorem Ipsum no es simplemente texto aleatorio. Tiene sus raices en una pieza cl´sica de la literatura del Latin, que data del año 45 antes de Cristo, haciendo que este adquiera mas de 2000 años de antiguedad. Richard McClintock, un profesor de Latin de la Universidad de Hampden-Sydney en Virginia, encontró una de las palabras más oscuras de la lengua del latín, "consecteur", en un pasaje de Lorem Ipsum, y al seguir leyendo distintos textos del latín, descubrió la fuente indudable. Lorem Ipsum viene de las secciones 1.10.32 y 1.10.33 de "de Finnibus Bonorum et Malorum" (Los Extremos del Bien y El Mal) por Cicero, escrito en el año 45 antes de Cristo. Este libro es un tratado de teoría de éticas, muy popular durante el Renacimiento. La primera linea del Lorem Ipsum, "Lorem ipsum dolor sit amet..", viene de una linea en la sección 1.10.32 </p> <br> <p class="text-left text-white" style="font-weight: 300;font-style: oblique">Soply Inc team.</p> </div> </div> </div> </div> <div class="row"> <div class="col-lg-12 ng-scope" style="height: auto;background-color: #2D3A42"> <div class="col-lg-3 text-center" style="top: 20%"> <img src="images/corona@1x.jpg" style="padding:15px"> </div> <div class="col-lg-3 text-center" style="top: 20%"> <img src="images/critical-software@1x.jpg" style="padding:15px"> </div> <div class="col-lg-3 text-center" style="top: 20%"> <img src="images/flow@1x.jpg" style="padding:15px"> </div> <div class="col-lg-3 text-center" style="top: 20%"> <img src="images/labatt@1x.jpg" style="padding:15px"> </div> </div> </div>'),a.put("views/forgot/forgot.html",'<div class="row forgot-page" ng-controller="forgotCtrl"> <div class="wrap" style="position:relative;top:50px"> <h1 class="text-white text-center">Olvidaste tu contraseña?</h1> <div class="panel" style="background-color: rgba(0, 0, 0, 0.3)!important;width: 500px;margin: 0 auto;\r\n        position: relative;\r\n        float: none"> <div class="alert alert-success animated rubberBand" ng-show="success"> <a class="close" ng-click="success = false;">&times;</a> <strong>Listo!</strong> Se ha enviado un enlace de recuperación a su correo. </div> <div class="alert alert-danger" ng-show="failed"> <a class="close" ng-click="failed = false;">&times;</a> <strong>Error!</strong> Este usuario no existe. </div> <form name="forgotForm" novalidate> <div class="form-group"> <label class="text-white">Email * :</label> <input type="email" required name="email" ng-model="form.data.email" class="form-control" placeholder="Correo"> </div> <div class="form-group"> <button style="padding:10px;border-radius:5px" ng-click="recover()" class="custom-btn custom-btn-primary">Recuperar</button> </div> </form> </div> </div> </div>'),a.put("views/forms/login.html",'<div ng-controller="LoginCtrl"> <form name="loginForm" class="form" method="" action=""> <div class="header header-primary text-center"> <div class="logo-container-small"> <img src="images/now-logo.8bddb848.png" alt=""> </div> </div> <div class="content"> <div class="form-group"> <input type="email" ng-model="form.data.email" class="form-control" placeholder="Corre Electronico" value=""> </div> <div class="form-group"> <div class="form-group"> <input type="password" ng-model="form.data.password" class="form-control" placeholder="Contraseña" value=""> </div> </div> <div class="form-group"> <div class="checkbox text-right" style="color:gray"> <input id="checkbox1" type="checkbox"> <label for="checkbox1"> Recordar </label> </div> </div> </div> <div class="footer text-center"> <a ng-click="login()" href="" class="btn btn-primary btn-round btn-lg btn-block">Entrar y Solicitar</a> <a href="" ng-click="facebook_login()" class="btn btn-round btn-lg btn-block btn-block btn-facebook-auth"><i class="fa fa-facebook"></i>&nbsp;{{user ? user.name : \'Entrar con Facebook\'}}</a> </div> </form> </div>'),a.put("views/forms/register.html",'<div ng-controller="signupCtrl"> <form name="signup" class="form animated bounce" method="" action=""> <div class="content"> <div class="row"> <div class="col-lg-6"> <div class="form-group"> <input type="text" ng-model="formRegister.data.name" class="form-control" placeholder="Nombres" value=""> </div> </div> <div class="col-lg-6"> <div class="form-group"> <input type="text" ng-model="formRegister.data.last_name" class="form-control" placeholder="Apellidos" value=""> </div> </div> </div> <div class="form-group"> <input type="email" ng-model="formRegister.data.email" class="form-control" placeholder="Corre Electronico" value=""> </div> <div class="input-group form-group-no-border"> <span class="input-group-addon"> <i class="now-ui-icons tech_mobile"></i> </span> <input type="text" ng-model="formRegister.data.metadada.phone" class="form-control" placeholder="Numero Celular"> </div> <div class="form-group"> <div class="form-group"> <input type="password" ng-model="formRegister.data.password" class="form-control" placeholder="Contraseña"> </div> </div> <div class="form-group"> <div class="form-group"> <input type="password" ng-model="formRegister.data.confirm_password" class="form-control" placeholder="Repetir Contraseña"> </div> </div> </div> <div class="footer text-center"> <a href="" ng-click="register()" class="btn btn-primary btn-round btn-block">Registrarme y Solicitar</a> <a href="" ng-click="facebook_login()" class="btn btn-round btn-block btn-facebook-auth"><i class="fa fa-facebook"></i>&nbsp;{{user ? user.name : \'Entrar con Facebook\'}}</a> </div> </form> </div>'),a.put("views/forms/sms-checking.html","<pin-code></pin-code>"),a.put("views/home/home.html",'<div class="login-page" ng-controller="HomeCtrl" ng-init="getLoginStatus()"> <!-- Navbar --> <nav class="navbar navbar-toggleable-md bg-primary fixed-top navbar-transparent hidden-md-down" color-on-scroll="500"> <div class="container"> <div class="dropdown button-dropdown"> <a href="" class="dropdown-toggle" id="navbarDropdown" data-toggle="dropdown"> <span class="button-bar"></span> <span class="button-bar"></span> <span class="button-bar"></span> </a> <div class="dropdown-menu" aria-labelledby="navbarDropdown"> <a class="dropdown-header">Dropdown header</a> <a class="dropdown-item" href="#">Action</a> <a class="dropdown-item" href="#">Another action</a> <a class="dropdown-item" href="#">Something else here</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="#">Separated link</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="#">One more separated link</a> </div> </div> <div class="navbar-translate"> <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-bar bar1"></span> <span class="navbar-toggler-bar bar2"></span> <span class="navbar-toggler-bar bar3"></span> </button> <a class="navbar-brand" href="#!/" ui-sref="home" rel="Simulador de credito"> Solicita tu Credito. </a> </div> <div class="collapse navbar-collapse justify-content-end" id="navigation" data-nav-image="images/blurred-image-1.jpg"> <ul class="navbar-nav"> <li class="nav-item"> <a class="nav-link" href="#/signup" ui-sref="signup">Registrarse</a> </li> <li class="nav-item"> <a class="nav-link" href="#/login" ui-sref="login">Entrar</a> </li> <li class="nav-item"> <a class="nav-link" rel="tooltip" title="Follow us on Twitter" data-placement="bottom" href="https://twitter.com/CreativeTim" target="_blank"> <i class="fa fa-twitter"></i> <p class="hidden-lg-up">Twitter</p> </a> </li> <li class="nav-item"> <a class="nav-link" rel="tooltip" title="Like us on Facebook" data-placement="bottom" href="https://www.facebook.com/CreativeTim" target="_blank"> <i class="fa fa-facebook-square"></i> <p class="hidden-lg-up">Facebook</p> </a> </li> <li class="nav-item"> <a class="nav-link" rel="tooltip" title="Follow us on Instagram" data-placement="bottom" href="https://www.instagram.com/CreativeTimOfficial" target="_blank"> <i class="fa fa-instagram"></i> <p class="hidden-lg-up">Instagram</p> </a> </li> <li class="nav-item"> <div class="dropdown button-dropdown"> <a href="#pablo" class="dropdown-toggle" id="navbarDropdown" data-toggle="dropdown"> <img style="width:50%;border-radius:50%" ng-src="{{user.picture.data.url}}"> </a> <div class="dropdown-menu" aria-labelledby="navbarDropdown"> <a class="dropdown-header">Opciones</a> <a class="dropdown-item" href="#">Mis Prestamos</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="#">Configuración</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="#">Salir</a> </div> </div> </li> </ul> </div> </div> </nav> <!-- End Navbar --> <div class="page-header" filter-color="orange"> <div class="page-header-image"></div> <div class="container"> <div class="col-md-4 content-center hidden-md-down"> <div class="row"> <div class="simulator_summary col-lg-6" ng-hide="!$root.switch_summary"> <div class="card card-login card-padding"> <form class="form" method="" action=""> <div class="header header-primary text-center"> </div> <div class="content"> <div class="row"> <div class="col-lg-6 text-left"> <label style="color:#101010"><i class="now-ui-icons ui-1_calendar-60"></i>&nbsp;Fecha de Pago:</label> </div> <div class="col-lg-6 text-right"> <p style="color:#101010"><span class="badge badge-primary">{{ form.data.pay_day || current_date | date:"yyyy - MM - dd" }}</span></p> </div> <div class="col-lg-6 text-left"> <label style="color:#101010">Monto Solicitado:</label> </div> <div class="col-lg-6 text-right"> <p class="label-strong-primary">{{ form.data.amount[0] | currency:"$ "}}</p> </div> <div class="col-lg-6 text-left"> <label style="color:#101010">Interes:</label> </div> <div class="col-lg-6 text-right"> <p class="label-strong-primary">{{form.data.interests || 0 | currency:"$ ":0}} </p> </div> <div class="col-lg-6 text-left"> <label style="color:#101010">Gestión de Credito:</label> </div> <div class="col-lg-6 text-right"> <p class="label-strong-primary">{{form.data.system_quote || 0 | currency:"$ "}}</p> </div> <hr style="1px dashed #858585 !important"> <div class="col-lg-6 text-left"> <label style="color:#101010">Total a Pagar:</label> </div> <div class="col-lg-6 text-right"> <p class="label-strong-primary" style="color:green;!important">{{form.data.total_payment || 0 | currency:"$ ":0}} COP</p> </div> </div> <br> <div class="row"> <div class="col-lg-6"> <a href="#/empezar" ui-sref="home.empezar()" class="btn btn-primary btn-block btn-sm">&nbsp;Registrarme</a> </div> <div class="col-lg-6"> <a href="#/continuar" ui-sref="home.continuar()" class="btn btn-primary btn-block btn-sm">&nbsp;Tengo Cuenta</a> </div> </div> </div> <div class="footer text-center row"> <div class="col-md-3"> <i style="font-size:25px;color: gray" class="now-ui-icons shopping_credit-card"></i> <p style="color:gray;font-size:10px">C. Bancaria</p> </div> <div class="col-md-3"> <i style="font-size:25px;color: gray" class="now-ui-icons tech_mobile"></i> <p style="color:gray;font-size:10px">Celular</p> </div> <div class="col-md-3"> <i style="font-size:25px;color: gray" class="now-ui-icons ui-1_email-85"></i> <p style="color:gray;font-size:10px">Email</p> </div> <div class="col-md-3"> <i style="font-size:25px;color: gray" class="now-ui-icons business_badge"></i> <p style="color:gray;font-size:10px">Colombiano <button class="btn btn-primary btn-icon btn-icon-mini btn-round btn-circle-badge" type="button"> +18 </button></p> </div> </div> </form> </div> </div> <div class="col-lg-6" ng-hide="$root.switch_summary"> <div class="simulator_wrapper"> <h5 class="text-left">¿Cuánto dinero necesitas?</h5> <slider step="50000" ng-model="form.data.amount" initial="200000" range="[100000, 1000000]"></slider> <div class="row"> <div class="col-lg-6 text-left">{{\'\'}}</div> <div style="font-size:20px;margin-top: 20px" class="col-lg-6 text-right">{{form.data.amount[0] || 0 | currency:"COP $ "}}</div> </div> <br> <br> <br> <br> <h5 class="text-left">¿Cuándo puedes pagar?</h5> <slider step="1" ng-model="form.data.days" initial="5" range="[1, 30]"></slider> <div class="row"> <div style="font-size:20px;margin-top: 20px" class="col-lg-6 text-left"></div> <div style="font-size:20px;margin-top: 20px" ng-init="form.data.date = currentDate" class="col-lg-6 text-right">{{\'en \' + form.data.days + \' dias.\'}}</div> </div> <br> <br> <div class="row"> <div class="col-lg-6 text-left"> <a href=""><img src="images/apple_store.98f1b00b.png" style="width:65%;margin-top:15px"></a> </div> <div class="col-lg-6 text-right"> <a href=""><img src="images/google_play_store.06149534.png" style="width:65%;margin-top:15px"></a> </div> </div> </div> </div> <div class="col-lg-6"> <div class="card card-login card-padding" ui-view> <form class="form" method="" action=""> <div class="header header-primary text-center"> </div> <div class="content"> <div class="row"> <div class="col-lg-6 text-left"> <label style="color:#101010"><i class="now-ui-icons ui-1_calendar-60"></i>&nbsp;Fecha de Pago:</label> </div> <div class="col-lg-6 text-right"> <p style="color:#101010"><span class="badge badge-primary">{{ form.data.pay_day || current_date | date:"yyyy - MM - dd" }}</span></p> </div> <div class="col-lg-6 text-left"> <label style="color:#101010">Monto Solicitado:</label> </div> <div class="col-lg-6 text-right"> <p class="label-strong-primary">{{ form.data.amount[0] | currency:"$ ":0}}</p> </div> <div class="col-lg-6 text-left"> <label style="color:#101010">Interes:</label> </div> <div class="col-lg-6 text-right"> <p class="label-strong-primary">{{form.data.interests || 0 | currency:"$ ":0 }}</p> </div> <div class="col-lg-6 text-left"> <label style="color:#101010">Gestión de Credito:</label> </div> <div class="col-lg-6 text-right"> <p class="label-strong-primary">{{form.data.system_quote || 0 | currency:"$ ":0 }}</p> </div> <hr style="1px dashed #858585 !important"> <div class="col-lg-6 text-left"> <label style="color:#101010">Total a Pagar:</label> </div> <div class="col-lg-6 text-right"> <p class="label-strong-primary" style="color:green;!important">{{form.data.total_payment || 0 | currency:"$ ":0}} COP</p> </div> </div> <br> <div class="row"> <div class="col-lg-6"> <a href="#/empezar" ui-sref="home.empezar()" class="btn btn-primary btn-block btn-sm">&nbsp;Registrarme</a> </div> <div class="col-lg-6"> <a href="#/continuar" ui-sref="home.continuar()" class="btn btn-primary btn-block btn-sm">&nbsp;Tengo Cuenta</a> </div> </div> </div> <div class="footer text-center row"> <div class="col-md-3"> <i style="font-size:25px;color: gray" class="now-ui-icons shopping_credit-card"></i> <p style="color:gray;font-size:10px">C. Bancaria</p> </div> <div class="col-md-3"> <i style="font-size:25px;color: gray" class="now-ui-icons tech_mobile"></i> <p style="color:gray;font-size:10px">Celular</p> </div> <div class="col-md-3"> <i style="font-size:25px;color: gray" class="now-ui-icons ui-1_email-85"></i> <p style="color:gray;font-size:10px">Email</p> </div> <div class="col-md-3"> <i style="font-size:25px;color: gray" class="now-ui-icons business_badge"></i> <p style="color:gray;font-size:10px">Colombiano <button class="btn btn-primary btn-icon btn-icon-mini btn-round btn-circle-badge" type="button"> +18 </button></p> </div> </div> </form> </div> </div> <div class="col-lg-12"> </div> </div> </div> </div> <footer class="footer hidden-md-down"> <div class="container"> <nav> <ul> <li> <a href="#"> Ayuda </a> </li> <li> <a href="#"> Acerca de </a> </li> <li> <a href="#"> Terminos </a> </li> <li> <a href="#"> Politicas de Privacidad </a> </li> </ul> </nav> <div class="copyright"> &copy; <script></script>2017, Todos los Derechos Reservados <a href="http://www.daimont.com" target="_blank">Daimont</a>. Creado por <a href="https://www.zarko.com.co" target="_blank">Zarko.com.co</a>. </div> </div> </footer> </div> </div>'),a.put("views/login/login.html",'<div class="login-page" ng-controller="LoginCtrl" ng-init="getLoginStatus()"> <!-- Navbar --> <nav class="navbar navbar-toggleable-md bg-primary fixed-top navbar-transparent" color-on-scroll="500"> <div class="container"> <div class="dropdown button-dropdown"> <a href="#pablo" class="dropdown-toggle" id="navbarDropdown" data-toggle="dropdown"> <span class="button-bar"></span> <span class="button-bar"></span> <span class="button-bar"></span> </a> <div class="dropdown-menu" aria-labelledby="navbarDropdown"> <a class="dropdown-header">Dropdown header</a> <a class="dropdown-item" href="#">Action</a> <a class="dropdown-item" href="#">Another action</a> <a class="dropdown-item" href="#">Something else here</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="#">Separated link</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="#">One more separated link</a> </div> </div> <div class="navbar-translate"> <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-bar bar1"></span> <span class="navbar-toggler-bar bar2"></span> <span class="navbar-toggler-bar bar3"></span> </button> <a class="navbar-brand" href="#!/" ui-sref="home"> Solicita tu Credito. </a> </div> <div class="collapse navbar-collapse justify-content-end" id="navigation" data-nav-image="images/blurred-image-1.jpg"> <ul class="navbar-nav"> <li class="nav-item"> <a class="nav-link" href="#/signup" ui-sref="signup">Registrarse</a> </li> <li class="nav-item"> <a class="nav-link" href="#/login" ui-sref="login">Entrar</a> </li> <li class="nav-item"> <a class="nav-link" rel="tooltip" title="Follow us on Twitter" data-placement="bottom" href="https://twitter.com/CreativeTim" target="_blank"> <i class="fa fa-twitter"></i> <p class="hidden-lg-up">Twitter</p> </a> </li> <li class="nav-item"> <a class="nav-link" rel="tooltip" title="Like us on Facebook" data-placement="bottom" href="https://www.facebook.com/CreativeTim" target="_blank"> <i class="fa fa-facebook-square"></i> <p class="hidden-lg-up">Facebook</p> </a> </li> <li class="nav-item"> <a class="nav-link" rel="tooltip" title="Follow us on Instagram" data-placement="bottom" href="https://www.instagram.com/CreativeTimOfficial" target="_blank"> <i class="fa fa-instagram"></i> <p class="hidden-lg-up">Instagram</p> </a> </li> <li class="nav-item"> <div class="dropdown button-dropdown"> <a href="" class="dropdown-toggle" id="navbarDropdown" data-toggle="dropdown"> <img style="width:50%;border-radius:50%" ng-src="{{user.picture.data.url}}"> </a> <div class="dropdown-menu" aria-labelledby="navbarDropdown"> <a class="dropdown-header">Opciones</a> <a class="dropdown-item" href="#">Mis Prestamos</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="#">Configuración</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="#">Salir</a> </div> </div> </li> </ul> </div> </div> </nav> <!-- End Navbar --> <div class="page-header" filter-color="orange"> <div class="page-header-image"></div> <div class="container"> <div class="col-md-4 content-center"> <div class="card card-login card-padding"> <form name="loginForm" class="form" method="" action=""> <div class="header header-primary text-center"> <div class="logo-container"> <img src="images/now-logo.8bddb848.png" alt=""> </div> </div> <div class="content"> <div class="form-group"> <input type="email" ng-model="form.data.email" class="form-control" placeholder="Corre Electronico"> </div> <div class="form-group"> <div class="form-group"> <input type="password" ng-model="form.data.password" class="form-control" placeholder="Contraseña"> </div> </div> <div class="form-group"> <div class="checkbox text-right" style="color:gray"> <input ng-changed="remember()" id="checkbox1" type="checkbox"> <label for="checkbox1"> Recordar </label> </div> </div> </div> <div class="footer text-center"> <a href="" ng-click="login()" class="btn btn-primary btn-round btn-lg btn-block">Entrar</a> <a href="" ng-click="facebook_login()" class="btn btn-round btn-lg btn-block btn-facebook-auth"><i class="fa fa-facebook"></i>&nbsp;{{user ? user.name : \'Entrar con Facebook\'}}</a> </div> <div class="pull-left"> <h6> <a href="" class="link-darkness">Registrarse</a> </h6> </div> <div class="pull-right"> <h6> <a href="" class="link-darkness">Recuperar Contraseña</a> </h6> </div> </form> </div> </div> </div> <footer class="footer"> <div class="container"> <nav> <ul> <li> <a href="#"> Ayuda </a> </li> <li> <a href="#"> Acerca de </a> </li> <li> <a href="#"> Terminos </a> </li> <li> <a href="#"> Politicas de Privacidad </a> </li> </ul> </nav> <div class="copyright"> &copy; <script></script>2017, Todos los Derechos Reservados <a href="http://www.daimont.com" target="_blank">Daimont</a>. Creado por <a href="https://www.zarko.com.co" target="_blank">Zarko.com.co</a>. </div> </div> </footer> </div> </div>'),a.put("views/register/register.html",'<div class="content-section col-lg-12 text-center"> <h3 class="text-white">Registrarse</h3> </div> <form name="signup"> <div class="panel animated bounceInLeft" style="background-color: rgba(0, 0, 0, 0.3)!important"> <div style="padding: 6px" class="alert alert-danger" ng-show="signup.$valid && formRegister.data.password != formRegister.data.confirm"> <strong></strong> Las contraseñas no coinciden. </div> <div class="form-group"> <label class="text-white">Nombres*:</label> <input type="text" required name="nombres" ng-model="formRegister.data.name" class="form-control" placeholder="Nombres"> </div> <div class="form-group"> <label class="text-white">Apellidos*:</label> <input type="text" required name="last_name" ng-model="formRegister.data.last_name" class="form-control" placeholder="Apellidos"> </div> <div class="form-group"> <label class="text-white">Email*:</label> <input type="email" required name="username" ng-model="formRegister.data.email" class="form-control" placeholder="Correo"> </div> <div class="row"> <div class="col-lg-6"> <div class="form-group"> <label class="text-white">Contraseña*:</label> <input type="password" required name="password" ng-model="formRegister.data.password" class="form-control" placeholder="Contraseña"> </div> </div> <div class="col-lg-6"> <div class="form-group"> <label class="text-white">Confirmar Contraseña*:</label> <input type="password" required name="re-password" ng-model="formRegister.data.confirm" class="form-control" placeholder="Confirmar Contraseña"> </div> </div> </div> <div vc-recaptcha key="\'6LcVHCkTAAAAAJZ34Qsx8U6rapWvpS7w4KW3-4aF\'"></div> <div class="form-group"> <button ng-click="register()" style="width:30%;position:relative;top:5px;margin:0 auto;padding:10px;border-radius: 4px" class="custom-btn custom-btn-primary">Registrarme</button> </div> </div> </form>'),a.put("views/reset/change_password.html",'<div ng-controller="ChangepasswordCtrl"> <div class="row"> <div class="container"> <div class="panel panel-default" style="padding:0px"> <div class="panel-body"> <form name="changePasswordForm" novalidate> <div class="form-group"> <label>Actual contraseña:</label> <input type="password" required placeholder="Actual contraseña" class="form-control" ng-model="form.data.oldpwd"> </div> <div class="form-group"> <label>Nueva contraseña:</label> <input type="password" required placeholder="Nueva contraseña" class="form-control" ng-model="form.data.newpwd"> </div> <div class="form-group"> <label>Confirmar contraseña:</label> <input type="password" required placeholder="Confirmar contraseña" class="form-control" ng-model="form.data.confirmpwd"> </div> <button type="button" class="custom-btn custom-btn-default" ng-click="cancel()">Cancelar</button> <button type="button" class="custom-btn custom-btn-primary" ng-click="changePassword()">Cambiar clave</button> </form> </div> <div class="panel-footer"><i class="glyphicon glyphicon-info-sign"></i>Se notificara al correo acerca del cambio de clave.</div> </div> </div> </div> </div>'),a.put("views/reset/reset.html",'<div class="row forgot-page" ng-controller="ResetPasswordCtrl"> <div class="wrap" style="position:relative;top:50px"> <h1 class="text-white text-center">Cambiar Contraseña?</h1> <div class="panel" style="background-color: rgba(0, 0, 0, 0.3)!important;width: 500px;margin: 0 auto;\r\n        position: relative;\r\n        float: none"> <div class="alert alert-success animated rubberBand" ng-show="success"> <a class="close" ng-click="success = false;">&times;</a> <strong>Listo!</strong> Se ha cambiado su contraseña. </div> <div class="alert alert-danger" ng-show="failed"> <a class="close" ng-click="failed = false;">&times;</a> <strong>Error!</strong> Este enlace Expiro. </div> <form name="resetForm" novalidate> <div class="form-group"> <label class="text-white">Nueva Contraseña:</label> <input type="password" required name="password" ng-model="form.data.newpwd" class="form-control" placeholder="Nueva Contraseña"> </div> <div class="form-group"> <label class="text-white">Confirmar Contraseña:</label> <input type="password" required name="confirm" ng-model="form.data.confirm" class="form-control" placeholder="Confirmar Contraseña"> </div> <div class="form-group"> <button style="padding:10px;border-radius:5px" ng-click="reset()" class="custom-btn custom-btn-primary">Cambiar</button> </div> </form> </div> </div> </div>'),a.put("views/salidas/agregar_salida.html",'<div class="inmodal" ng-controller="SalidaCreateCtrl" ng-init="load()"> <div class="modal-header text-center custom-modal-header"> <!--<i class="fa fa-sliders color-success h-modal-icon"></i>--> <h4 class="modal-title">Crear Salida</h4> </div> <div class="modal-body"> <div> <form name="$parent.formCreateOutput" novalidate> <div class="row"> <div class="col-lg-4"> <div class="form-group"> <label for="name">Concepto*:</label> <input type="text" focus-on="true" required class="form-control input-sm" placeholder="Concepto" name="Concepto" ng-model="$parent.form.data.concepto"> </div> </div> <div class="col-lg-4"> <div class="form-group"> <label for="name">Bodega*:</label> <bodega-field items-max="1" placeholder="Bodega" required ng-model="$parent.form._grocery" key="_id" label="name"><bodega-field> </bodega-field></bodega-field></div> </div> <div class="col-lg-4"> <div class="form-group"> <label for="name">Responsable*:</label> <employee-field placeholder="Responsable" required ng-model="$parent.form._responsible" key="_id" label="name"><employee-field> </employee-field></employee-field></div> </div> </div> </form> </div> <div class="row"> <div class="col-lg-4"> <div class="form-group"> <label>Producto:</label> <producto-field key="_id" id="product_field" label="producto" on-enter="isEmpty()" set-focus="focuset" search-by="[\'idcomposed\', \'refMixed\', \'producto\']" set-object="_productObj" ng-model="_product"> <producto-field> </producto-field></producto-field></div> </div> <div class="col-lg-12"> <div class="row"> <div class="col-lg-4"> <div class="form-group"> <button ng-show="tasks.length > 0" type="button" ng-click="agregarCantidadMultiple()" class="btn btn-xs custom-btn-primary"><i class="fa fa-plus"></i>&nbsp;Agregar Cantidades</button> </div> </div> </div> <div class="table-responsive"> <table class="table table-hover"> <thead> <tr> <th>Seleccionar</th> <th>Codigo</th> <th>Producto</th> <th>Cantidad</th> <th>Costo</th> <th>Precio de Venta</th> <th>V. Iva</th> <th>Total</th> <th style="width: 36px"></th> <th style="width: 36px"></th> </tr> </thead> <tbody> <tr> <td ng-show="!recordsNew || recordsNew.length == 0" colspan="9" style="text-align:center!important"><i class="glyphicon glyphicon-info-sign"></i>&nbsp;sin resultados.</td> </tr> <tr dir-paginate="record in recordsNew |filter:search |itemsPerPage: 5 " pagination-id="productoEntradaEntity"> <td> <label class="text-dark"> <input ng-change="addToTask()" icheck type="checkbox" ng-model="task" class="info-bounce"> </label> </td> <td><span class="label label-primary">{{record.idcomposed}}</span></td> <td>{{record.producto}}</td> <td>{{record.cantidad}}</td> <td>{{record.precio | currency:"$ "}}</td> <td>{{record.precio_venta | currency:"$ "}}</td> <td>{{record.valor_iva | currency:"$ "}}</td> <td>{{record.total | currency:"$ "}}</td> <td><button ng-click="agregarCantidad()" type="button" class="btn btn-primary btn-xs"><i class="glyphicon glyphicon-plus"></i>&nbsp;Cantidad</button></td> <td><button ng-click="delete()" type="button" class="btn btn-danger btn-xs"><i class="glyphicon glyphicon-trash"></i>&nbsp;Quitar</button></td> </tr> </tbody> </table> </div> </div> </div> </div> <div class="modal-footer custom-modal-footer" style="padding:0px"> <button ng-disabled="$parent.formCreateOutput.$invalid" type="button" style="height:40px" class="custom-btn btn-block custom-btn-primary" ng-click="ok()">Agregar</button> </div> </div>'),
a.put("views/salidas/salidas.html",'<div ng-init="load()"> <div class="content" ng-show="!records || records.length == 0"> <div class="table_wrap table_height"> <div class="row table-responsive table_inner"> <div class="controls" ng-show="records.length == 0 && Records"> <h4>No hay registros para mostrar</h4> </div> <p class="text-center" ng-show="!Records"> <img style="width:50px" src="images/loading.23dd1f34.svg"> </p> </div> </div> </div> <div class="col-lg-12 content" ng-show="records.length > 0"> <div class="hpanel"> <div class="panel-body"> <div class="form-group"> <label>Buscar</label> <input type="text" ng-model="search" class="form-control input-sm m-b-md" id="filter" placeholder="Buscar en la tabla"> </div> <div class="table-responsive"> <table class="table table-hover"> <thead> <tr> <th>Fecha</th> <th>Concepto</th> <th>Bodega</th> <th>Responsable</th> <th>Cantidad</th> <th>Total Costo</th> <th>Total Precio Venta</th> <th style="width: 36px"></th> <th style="width: 36px"></th> <th style="width: 36px"></th> </tr> </thead> <tbody> <tr dir-paginate="record in records |filter:search |itemsPerPage: 5 " pagination-id="SalidaEntity"> <td>{{record.createdAt | date:"MM-dd-yyyy \' \' h:mma"}}</td> <td>{{record.data.concepto}}</td> <td>{{record._grocery.data.bodega}}</td> <td>{{record._responsible.full_name}}</td> <td>{{record.data.cantidad}}</td> <td>{{record.data.totalCosto | currency:"$ "}}</td> <td>{{record.data.totalprecioVenta | currency:"$ "}}</td> <td><button ng-click="edit()" type="button" class="btn btn-primary btn-xs"><i class="glyphicon glyphicon-edit"></i>&nbsp;Editar</button></td> <td><button ng-click="delete()" type="button" class="btn btn-warning btn-xs"><i class="glyphicon glyphicon-trash"></i>&nbsp;Anular</button></td> </tr> </tbody> </table> </div> <div class="col-lg-12"> <dir-pagination-controls class="pull-right" pagination-id="SalidaEntity"></dir-pagination-controls> </div> </div> <div class="panel-footer"> Listado de Salidas </div> </div> </div> </div>'),a.put("views/signup/signup.html",'<div class="login-page" ng-controller="signupCtrl" ng-init="getLoginStatus()"> <!-- Navbar --> <nav class="navbar navbar-toggleable-md bg-primary fixed-top navbar-transparent" color-on-scroll="500"> <div class="container"> <div class="dropdown button-dropdown"> <a href="#pablo" class="dropdown-toggle" id="navbarDropdown" data-toggle="dropdown"> <span class="button-bar"></span> <span class="button-bar"></span> <span class="button-bar"></span> </a> <div class="dropdown-menu" aria-labelledby="navbarDropdown"> <a class="dropdown-header">Dropdown header</a> <a class="dropdown-item" href="#">Action</a> <a class="dropdown-item" href="#">Another action</a> <a class="dropdown-item" href="#">Something else here</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="#">Separated link</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="#">One more separated link</a> </div> </div> <div class="navbar-translate"> <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-bar bar1"></span> <span class="navbar-toggler-bar bar2"></span> <span class="navbar-toggler-bar bar3"></span> </button> <a class="navbar-brand" href="#!/" ui-sref="home"> Solicita tu Credito. </a> </div> <div class="collapse navbar-collapse justify-content-end" id="navigation" data-nav-image="images/blurred-image-1.jpg"> <ul class="navbar-nav"> <li class="nav-item"> <a class="nav-link" href="#/register" ui-sref="register">Registrarse</a> </li> <li class="nav-item"> <a class="nav-link" href="#/login" ui-sref="login">Entrar</a> </li> <li class="nav-item"> <a class="nav-link" rel="tooltip" title="Follow us on Twitter" data-placement="bottom" href="https://twitter.com/CreativeTim" target="_blank"> <i class="fa fa-twitter"></i> <p class="hidden-lg-up">Twitter</p> </a> </li> <li class="nav-item"> <a class="nav-link" rel="tooltip" title="Like us on Facebook" data-placement="bottom" href="https://www.facebook.com/CreativeTim" target="_blank"> <i class="fa fa-facebook-square"></i> <p class="hidden-lg-up">Facebook</p> </a> </li> <li class="nav-item"> <a class="nav-link" rel="tooltip" title="Follow us on Instagram" data-placement="bottom" href="https://www.instagram.com/CreativeTimOfficial" target="_blank"> <i class="fa fa-instagram"></i> <p class="hidden-lg-up">Instagram</p> </a> </li> <li class="nav-item"> <div class="dropdown button-dropdown"> <a class="dropdown-toggle" id="navbarDropdown" data-toggle="dropdown"> <img style="width:50%;border-radius:50%" ng-src="{{user.picture.data.url}}"> </a> <div class="dropdown-menu" aria-labelledby="navbarDropdown"> <a class="dropdown-header">Opciones</a> <a class="dropdown-item" href="#">Mis Prestamos</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="#">Configuración</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="#">Salir</a> </div> </div> </li> </ul> </div> </div> </nav> <!-- End Navbar --> <div class="page-header" filter-color="orange"> <div class="page-header-image"></div> <div class="container"> <div class="col-md-4 content-center"> <div class="card card-login card-padding"> <form class="form" name="signup" method="" action=""> <div class="content"> <div class="row"> <div class="col-lg-6"> <div class="form-group"> <input type="text" ng-model="formRegister.data.name" class="form-control" placeholder="Nombres" value=""> </div> </div> <div class="col-lg-6"> <div class="form-group"> <input type="text" ng-model="formRegister.data.last_name" class="form-control" placeholder="Apellidos" value=""> </div> </div> </div> <div class="form-group"> <input type="email" ng-model="formRegister.data.email" class="form-control" placeholder="Corre Electronico" value=""> </div> <div class="input-group form-group-no-border"> <span class="input-group-addon"> <i class="now-ui-icons tech_mobile"></i> </span> <input type="text" ng-model="formRegister.data.metadada.phone" class="form-control" placeholder="Numero Celular"> </div> <div class="form-group"> <div class="form-group"> <input type="password" ng-model="formRegister.data.password" class="form-control" placeholder="Contraseña"> </div> </div> <div class="form-group"> <div class="form-group"> <input type="password" ng-model="formRegister.data.confirm_password" class="form-control" placeholder="Repetir Contraseña"> </div> </div> </div> <div class="footer text-center"> <a href="" ng-disabled="signup.$invalid" ng-click="register()" class="btn btn-primary btn-round btn-lg btn-block">Registrarme</a> <a href="" ng-click="facebook_login()" class="btn btn-round btn-lg btn-block btn-facebook-auth"><i class="fa fa-facebook"></i>&nbsp;{{user ? user.name : \'Entrar con Facebook\'}}</a> </div> <div class="pull-left"> <h6> <a href="#/login" ui-sref="login" class="link-darkness">Entrar</a> </h6> </div> <div class="pull-right"> <h6> <a href="" class="link-darkness">Recuperar Contraseña</a> </h6> </div> </form> </div> </div> </div> <footer class="footer"> <div class="container"> <nav> <ul> <li> <a href="#"> Ayuda </a> </li> <li> <a href="http://presentation.creative-tim.com"> Acerca de </a> </li> <li> <a href="#"> Terminos </a> </li> <li> <a href="#"> Politicas de Privacidad </a> </li> </ul> </nav> <div class="copyright"> &copy; <script></script>2017, Todos los Derechos Reservados <a href="http://www.daimont.com" target="_blank">Daimont</a>. Creado por <a href="https://www.zarko.com.co" target="_blank">Zarko.com.co</a>. </div> </div> </footer> </div> </div>'),a.put("views/system-shoply/sp-gallery-preview.html",'<div class="componentWrap"> <a ng-click="prev()" href=""> <span style="margin-right:60px"> <i class="fa fa-chevron-left" aria-hidden="true"></i> </span> </a> <img style="height:300px;margin-bottom: 30px" ng-src="{{selection.URL || images[0].URL}}"> <a ng-click="next()" href=""> <span style="margin-left:60px"> <i class="fa fa-chevron-right" aria-hidden="true"></i> </span> </a> <div class="row"> <div style="width:100px" class="col-lg-3 col-md-4 col-xs-6 thumb" ng-repeat="image in images"> <a style="cursor:pointer" ng-click="setImage()" class="thumbnail"> <img class="img-responsive" ng-src="{{image.URL}}" alt=""> </a> </div> </div> </div>'),a.put("views/system-shoply/sp-header-toolbar.html",'<div class="row sp-toolbar" ng-show="$root.state.current.name == \'dashboard.empresa\' || $root.state.current.name == \'dashboard.permiso\' || $root.state.current.name == \'dashboard.empleados\' || $root.state.current.name == \'dashboard.vendedores\' || $root.state.current.name == \'dashboard.clientes\' || $root.state.current.name == \'dashboard.productos\' || $root.state.current.name == \'dashboard.rutas\' || $root.state.current.name == \'dashboard.categorias\' || $root.state.current.name == \'dashboard.facturacion\' || $root.state.current.name == \'dashboard.arqueos\' || $root.state.current.name == \'dashboard.apps\' || $root.state.current.name == \'dashboard.bodega\' || $root.state.current.name == \'dashboard.entradas\' || $root.state.current.name == \'dashboard.salidas\' || $root.state.current.name == \'dashboard.ordenes\'"> <div class="col-lg-4 row"> <button ng-show="$root.user._company" ng-click="cambiarEmpresa()" type="button" class="custom-btn custom-btn-primary custom-btn-inverse" ng-click="print()"> <img class="img-circle thumb-photo" ng-src="{{$root.user._company.data.gallery[0].URL}}" preload-image default-image="images/loading.23dd1f34.svg" fallback-image="images/missing-company.png"> {{$root.user._company.data.empresa}}&nbsp; <i class="glyphicon glyphicon-ok"></i> </button> <button style="height: 44px;position:relative" ng-show="$root.grid.selected && $root.state.current.name == \'dashboard.empresa\' " ng-click="connectCompany()" class="animated fadeInRight custom-btn btn-success"><i class="fa fa-database"></i>&nbsp;Conectar</button> </div> <div class="col-lg-4"> </div> <div class="col-lg-4 text-right" ng-hide="$root.state.current.name == \'dashboard.facturacion\'"> <div> <button ng-hide="$root.state.current.name == \'dashboard.ordenes\'" type="button" ng-click="callForCreate()" class="btn custom-btn-primary"><i class="glyphicon glyphicon-plus"></i>&nbsp;Crear</button> </div> </div> </div> <!--toolbar::pedidos--> <div class="row sp-toolbar" ng-show="$root.state.current.name == \'dashboard.pedidos\'"> <div class="col-lg-4 row"> <button ng-show="$root.user._company" ng-click="cambiarEmpresa()" type="button" class="custom-btn custom-btn-primary custom-btn-inverse" ng-click="print()"> <img class="img-circle thumb-photo" ng-src="{{$root.user._company.data.gallery[0].URL}}" preload-image default-image="images/loading.23dd1f34.svg" fallback-image="images/missing-company.png"> {{$root.user._company.data.empresa}}&nbsp; <i class="glyphicon glyphicon-ok"></i> </button> <button style="height: 44px;position:relative" ng-show="$root.grid.selected && $root.state.current.name == \'dashboard.empresa\' " ng-click="connectCompany()" class="animated fadeInRight custom-btn btn-success"><i class="fa fa-database"></i>&nbsp;Conectar</button> </div> <div class="col-lg-4"> <div class="form-group hidden"> <input type="text" class="form-control" ng-model="search" placeholder="Buscar..."> </div> </div> <div class="col-lg-4 text-right"> </div> </div> <!--toolbar::pedidos-->'),a.put("views/system-shoply/sp-sidebar-header.html",'<div class="col-lg-2 animated"> <div class="sidebar"> <div class="profile-info"> <div class="metadata"> <a ui-sref="dashboard.perfil" href="#/perfil"><img preload-image ng-src="{{$root.user.data.gallery[0].URL || \'images/no-user-image.gif\'}}" default-image="images/no-user-image.gif" fallback-image="images/loading.23dd1f34.svg" class="img-circle thumb-photo"></a> <span>{{$root.user.full_name}}</span> <p ng-show="$root.user._permission" style="color: #ffffff;font-size: smaller;font-weight: bold">{{$root.user._permission.data.profile || \'\'}}</p> <p ng-show="$root.user.type ==\'ADMINISTRATOR\'" style="color: #ffffff;font-size: smaller;font-weight: bold">Administrador</p> </div> </div> <sp-sidebar-menu></sp-sidebar-menu> </div> </div>'),a.put("views/system-shoply/sp-sidebar.html",'<nav class="navbar-default navbar-static-side" role="navigation"> <div class="sidebar-collapse"> <ul class="nav sp-menu" id="sp-menu" style="display: block"> <li ng-show="$root.acl.canView(\'mnuEmpresas\')"> <a ui-sref="dashboard.empresa" href="#/empresa"><i class="fa fa-building-o"></i> <span class="nav-label">Empresa</span></a> </li> <li ng-show="$root.acl.canView(\'mnuAjustes\')"> <a href="index.html"><i class="fa fa-cogs"></i> <span class="nav-label">Ajustes</span> <span class="fa arrow"></span></a> <ul class="nav nav-second-level collapse"> <li><a ng-show="$root.acl.canViewForm(\'frmIvas\')" ng-click="agregarIva()">Ivas</a></li> <li><a ng-show="$root.acl.canViewForm(\'frmFormConsecutivos\')" ng-click="agregarConsecutivo()">Consecutivos</a></li> <li><a ng-show="$root.acl.canViewForm(\'frmFormPagos\')" ng-click="agregarFormasDePago()">Formas de pagos</a></li> <li><a ng-show="$root.acl.canViewForm(\'frmCasaComercial\')" ng-click="agregarCasaComercial()">Casas Comerciales</a></li> </ul> </li> <li ng-show="$root.acl.canView(\'mnuPermisos\')"> <a ui-sref="dashboard.permiso" href="#/permiso"><i class="fa fa-universal-access"></i> <span class="nav-label">Permisos</span></a> </li> <li ng-show="$root.acl.canView(\'mnuUsuarios\')"> <a><i class="fa fa-users"></i> <span class="nav-label">Usuarios </span></a> <ul class="nav nav-second-level collapse"> <li><a ui-sref="dashboard.empleados" href="#!/empleado">Empleados</a></li> <li><a ui-sref="dashboard.vendedores" href="#!/vendedores">Vendedores</a></li> <li><a ui-sref="dashboard.clientes" href="#!/clientes">Clientes</a></li> </ul> </li> <li ng-show="$root.acl.canView(\'mnuProductos\')"> <a ui-sref="dashboard.productos" href="#/productos"><i class="fa fa-shopping-bag"></i> <span class="nav-label">Productos</span></a> </li> <li ng-show="$root.acl.canView(\'mnuInventario\')"> <a><i class="glyphicon glyphicon-paste"></i> <span class="nav-label">Inventario</span></a> <ul class="nav nav-second-level collapse"> <li><a ui-sref="dashboard.bodega" href="#!/empleado">Bodegas</a></li> <li><a ui-sref="dashboard.entradas" href="#!/entradas">Entradas</a></li> <li><a ui-sref="dashboard.salidas" href="#!/salidas">Salidas</a></li> <li><a ui-sref="dashboard.existencias" href="#!/existencias">Existencias</a></li> </ul> </li> <li ng-show="$root.acl.canView(\'mnuRutas\')"> <a ui-sref="dashboard.rutas" href="#/rutas"><i class="fa fa-street-view"></i> <span class="nav-label">Rutas</span></a> </li> <li ng-show="$root.acl.canView(\'mnuCategorias\')"> <a ui-sref="dashboard.categorias" href="#/categorias"><i class="fa fa-folder-open"></i> <span class="nav-label">Categorias</span></a> </li> <li ng-show="$root.acl.canView(\'mnuPedidos\')"> <a ui-sref="dashboard.ordenes" href="#!/ordenes"><i class="fa fa-shopping-cart"></i> <span class="nav-label">Ordenes</span> </a> </li> <li ng-show="$root.acl.canView(\'mnuLotes\')"> <a ui-sref="dashboard.lotes" href="#!/lotes"><i class="glyphicon glyphicon-paste"></i> <span class="nav-label">Lotes</span> </a> </li> <li ng-show="$root.acl.canView(\'mnuFacturacion\')"> <a hotkey="{\'f2\': go}"><i class="fa fa-credit-card"></i> <span class="nav-label">Facturación </span><span class="label label-warning pull-right">F2</span></a> <ul class="nav nav-second-level collapse"> <li ng-show="$root.acl.canViewForm(\'frmNuevaFacturacion\')"><a ui-sref="dashboard.facturacion" href="#!/empleado">Nueva Facturación</a></li> <li ng-show="$root.acl.canViewForm(\'frmBuscarFacturacion\')"><a ui-sref="dashboard.buscar-facturacion" href="#!/buscar-facturacion">Buscar</a></li> <li ng-show="$root.acl.canViewForm(\'frmDevoluciones\')"><a ui-sref="dashboard.devoluciones" href="#!/devoluciones">Devoluciones</a></li> </ul> </li> <li ng-show="$root.acl.canView(\'mnuArqueos\')"> <a ui-sref="dashboard.arqueos" href="#!/arqueos"><i class="fa fa-calculator"></i> <span class="nav-label">Arqueos</span> </a> </li> <li ng-show="$root.acl.canView(\'mnuApps\')"> <a ui-sref="dashboard.apps" href="#!/apps"><i class="fa fa-android"></i> <span class="nav-label">Apps</span> </a> </li> <li> <a ui-sref="dashboard.change-password" href="#!/change-password"><i class="fa fa-wpforms"></i> <span class="nav-label">Cambiar Contraseña</span> </a> </li> <li class="special_link"> <a href="package.html"><i class="fa fa-cloud"></i> <span class="nav-label">Mi pagina</span></a> </li> <li class="special_link"> <a href="package.html"><i class="fa fa-book"></i> <span class="nav-label">Mi catalogo publico</span></a> </li> </ul> </div> </nav>'),a.put("views/utils/cropper.html",'<div class="inmodal" ng-init="load()"> <div class="modal-header text-center custom-modal-header"> <h4 class="modal-title">Editar Fotografia</h4> </div> <div class="modal-body custom-modal-body" style="height:350px"> <div ng-show="loading" class="text-center" style="position:relative;top:20%"> <img style="width:60px" src="images/loading.23dd1f34.svg"> <p>Cargando imagen por favor espere..</p> </div> <cropper ng-init="$root.preImage" ng-model="$root.preImage"></cropper> </div> <div class="modal-footer custom-modal-footer"> <button type="button" class="custom-btn custom-btn-default" ng-click="cancel()">Cancelar</button> <button type="button" class="custom-btn custom-btn-primary" ng-click="ok()">Listo</button> </div> </div>'),a.put("views/utils/cropper2.html",'<div class="inmodal" ng-init="load()"> <div class="modal-header text-center custom-modal-header"> <h4 class="modal-title">Editar Fotografia</h4> </div> <div class="modal-body custom-modal-body" style="height:350px"> <div class="cropArea"> <img-crop image="$parent.editImage.preview || $parent.editImage.URL" area-type="{{$parent.area}}" result-image="$parent.image_final"></img-crop> </div> </div> <div class="modal-footer custom-modal-footer" style="padding:0px"> <button type="button" style="height:40px" class="custom-btn btn-block custom-btn-primary" ng-click="ok()">Listo</button> </div> </div>'),a.put("views/utils/preview.html",'<div class="inmodal" ng-init="load()"> <div class="modal-header text-center custom-modal-header"> <h4 class="modal-title">Vista Previa</h4> </div> <div class="modal-body custom-modal-body text-center"> <img preload-image ng-src="{{file}}" default-image="images/missing-image.png" fallback-image="images/loading.23dd1f34.svg"> </div> <div class="modal-footer custom-modal-footer" style="padding:0px"> <button type="button" style="height:40px" class="custom-btn btn-block custom-btn-primary" ng-click="ok()">Listo</button> </div> </div>'),a.put("views/utils/uploader.html",'<div class="text-center left" style="padding: 6px;width:100%"> <div class="row"> <div class="col-lg-12"> <div ng-show="showAlert" class="alert alert-warning alert-dismissible" role="alert"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button> <strong>:(</strong> Solo puedes subir un maximo de 4 imagenes. </div> </div> <div class="col-lg-6 text-left"> <h4 ng-class="label">{{title}}</h4> </div> <div class="col-lg-6 text-right"> <input type="file" multiple name="file" id="file" class="hidden"> <label for="file" class="custom-btn custom-btn-primary large-rounded">{{buttonText}}</label> </div> </div> <div class="image-file-container"> <div class="empty" ng-show="!ngModel || ngModel.length == 0"> <h4 style="top: 20%;position: relative">no hay imagenes disponibles</h4> </div> <div class="file-item" ng-repeat="file in ngModel" ng-show="file"> <div class="file-wrap" ng-show="file.loading"> <div class="item-loading"> <img style="height:20px" src="images/loading.23dd1f34.svg"> <p>Actualizando...</p> </div> </div> <div class="file-wrap" ng-show="!file.loading"> <div class="col-lg-2 image-file"> <img style="width:40px;height:40px" ng-src="{{file.preview || file.URL}}" class="img-circle thumb-photo"> </div> <div class="col-lg-7 text-left"> <p style="text-overflow: ellipsis;word-wrap: break-word;white-space: nowrap;overflow: hidden">{{file.name || file.aname}}</p> <a href="" style="color:#f95c07" ng-click="remove()" class="file-option-link">quitar</a> <a href="" style="color:#f95c07" ng-click="show()" class="file-option-link">ver</a> <a href="" ng-click="edit()" style="color:#f95c07" class="file-option-link">editar</a> </div> <div class="col-lg-3 text-right"> <p class="tiny-text">{{file.udate | date:\'yyyy-MM-dd\'}}</p> </div> </div> </div> </div> </div>')}]);